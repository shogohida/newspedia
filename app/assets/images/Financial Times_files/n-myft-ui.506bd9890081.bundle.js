(window.webpackJsonp=window.webpackJsonp||[]).push([["n-myft-ui"],{"0461bd81":function(t,e,n){"use strict";n.r(e),n.d(e,"client",(function(){return a.default})),n.d(e,"ui",(function(){return r}));var r={};n.r(r),n.d(r,"init",(function(){return it})),n.d(r,"personaliseLinks",(function(){return T})),n.d(r,"updateUi",(function(){return tt}));var a=n("dcfa7677"),o={saved:{actorType:"user",idProperty:"data-content-id",subjectType:"content",uiSelector:'[data-myft-ui="saved"]'},followed:{actorType:"user",idProperty:"data-concept-id",subjectType:"concept",uiSelector:'[data-myft-ui="follow"]'},contained:{actorType:"list",idProperty:"data-content-id",subjectType:"content",uiSelector:'[data-myft-ui="contained"]'}},i={};function l(t){return i[t]||[]}function u(t){return new Promise((function(e){var n=o[t].subjectType,r="".concat(t,".").concat(n);if(a.default.loaded[r])return i[t]=a.default.loaded[r],e();var l=function(){i[t]=a.default.loaded[r].items,e()},u="myft.user.".concat(t,".").concat(n,".load");document.body.addEventListener(u,l),setTimeout((function(){document.body.removeEventListener(u,l),e()}),5e3)}))}function c(t,e){i[t]?-1===d(t,e.uuid)&&i[t].push(e):i[t]=[e]}function s(t,e){var n=d(t,e);-1!==n&&i[t].splice(n,1)}var d=function(t,e){return i[t].findIndex((function(t){return t.uuid===e}))},f=n("2588dbc0"),p=n("c99a337b"),m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.token,n=void 0===e?Object(p.default)():e,r=t.container,a=void 0===r?document.body:r,o=t.inputs,i=void 0===o?a.querySelectorAll("[data-myft-csrf-token]"):o;Array.from(i).forEach((function(t){t.value=n}))};function y(t,e){e!==("true"===t.getAttribute("aria-pressed"))&&f.toggleState(t),t.removeAttribute("disabled")}function b(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(o[t]){var l=o[t].uiSelector,u=o[t].idProperty,c=Array.from(r.querySelectorAll(l)).map((function(t){return t.closest("form")}));c.forEach((function(r){if(e.includes(r.getAttribute(u))){if(h(t,e[0],n,a),y(r.querySelector("button"),n),i){var o=r.querySelector(".n-myft-ui__announcement");o&&(o.innerHTML=o.dataset[n?"pressedText":"unpressedText"])}m({container:r})}}))}}function v(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return b(t,[e],n,r,a,o)}function h(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};"followed"===t&&!0===n&&r.subject&&r.subject.properties&&c(t,r.subject.properties),"followed"===t&&!1===n&&s(t,e)}var g={concept:{idLabel:"concept_id",add:"follow",remove:"unfollow"},content:{idLabel:"article_id",add:"save",remove:"unsave"}},w=function(t,e,n,r){if("update"===e&&"concept"===t){var a=n&&n._rel&&n._rel.instant&&"true"===n._rel.instant?"on":"off";return"instant-alert-".concat(a)}return r&&r.rel&&r.rel.type&&"contained"===r.rel.type?"".concat(e,"-to-list-success"):g[t][e]};function x(t){if(-1!==Object.keys(g).indexOf(t.subjectType)){var e=Object.assign({action:w(t.subjectType,t.action,t.postedData,t.resultData)},t.trackingInfo),n=function(t,e){var n={};return n[g[t].idLabel]=e,n}(t.subjectType,t.subjectId);Object.assign(e,n),r=e,a=Object.assign({},r,{category:"myFT"}),document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:a,bubbles:!0}))}var r,a}var S=n("87ae850e"),k=n("1063c397"),O=n("33cab54f"),T=function(t){var e=t&&"A"===t.nodeName?[t]:Object(O.$$)('a[href^="/myft"]',t);return Promise.all(e.map((function(t){return a.default.personaliseUrl(t.getAttribute("href")).then((function(e){return t.setAttribute("href",e)}))})))};var A=o.followed.idProperty;function j(t,e){var n=t.getAttribute(A).split(","),r=e.name.split(","),a=e.directType?e.directType.split(","):[],o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}));return n.map((function(t,n){delete e.name,delete e.type;var i=Object.assign({name:r[n],_rel:{eventId:o,eventType:"coll-add-all"}},e);return a[n]&&(i.directType=a[n]),{id:t,formData:i}}))}var _,P=n("f9e8967f"),E=n.n(P),I=Object(p.default)(),C="https:"===document.location.protocol||document.location.href.indexOf("local")>=0,D=!1;function F(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}function L(t,e){return a.default.init().then((function(){return a.default.getAll("enabled","endpoint")})).then((function(n){var r=[],o=function(t){if(0!==t.endpoint.indexOf("https://android.googleapis.com/gcm/send"))return t.endpoint;var e=t.endpoint;return t.subscriptionId&&-1===t.endpoint.indexOf(t.subscriptionId)&&(e=t.endpoint+"/"+t.subscriptionId),e}(t);n&&n.items&&n.items.length&&(r=n.items);var i=t.getKey?btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("p256dh")))):"",l=t.getKey?btoa(String.fromCharCode.apply(null,new Uint8Array(t.getKey("auth")))):"",u=r.indexOf(o);return e||!o&&u>=0?a.default.remove("user",null,"enabled","endpoint",encodeURIComponent(o),{token:I}):u<0&&a.default.add("user",null,"enabled","endpoint",encodeURIComponent(o),{authKey:i,authSecret:l,token:I}),!0}))}function U(t){if(D){document.body.dispatchEvent(new CustomEvent("oTracking.event",{detail:{category:"myFT",action:"offer-instant-alerts",permission:Notification.permission},bubbles:!0}));var e=E()("denied"===Notification.permission);e.context.addEventListener("oOverlay.ready",(function(){e.context.querySelector(".js-instant-alerts-confirmation-yes").addEventListener("click",(function(){e.destroy(),navigator.serviceWorker.ready.then((function(t){t.pushManager.subscribe(_).then((function(t){return L(t)}))})),function(t){a.default.init().then((function(){return a.default.add("user",null,"followed","concept",t,{token:I,_rel:{instant:"true"}})}))}(t)})),e.context.querySelector(".js-instant-alerts-confirmation-no").addEventListener("click",(function(){e.destroy()}))}),!1)}}function q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(t,e)||M(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t){return function(t){if(Array.isArray(t))return R(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||M(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(t,e){if(t){if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(t,e):void 0}}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var W,$=function(t,e,n){if(!function(t){return t.querySelector("button").hasAttribute("disabled")}(e)){e.querySelector("button").setAttribute("disabled","");var r=function(t){return"true"===t.querySelector("button").getAttribute("aria-pressed")?"remove":"add"}(e),i=e.getAttribute("data-actor-id"),l=function(t){var e,n=t.querySelector("button"),r=t.querySelectorAll('input[type="hidden"]'),a=[n].concat(N(r));return e={},a.forEach((function(t){if(t.name)if(t.name.startsWith("_rel.")){var n=t.name.slice("_rel.".length);e._rel=e._rel||{},e._rel[n]=t.value}else e[t.name]=t.value})),e}(e),u=function(t){return(t.getAttribute("data-myft-tracking")||"").split(",").map((function(t){return t.split("=")})).reduce((function(t,e){var n=q(e,2),r=n[0],a=n[1],o=r&&r.trim(),i=a&&a.trim()||!0;return o&&i&&(t[o]=i),t}),{})}(e);if(function(t,e){return"followed"===t&&e.getAttribute(A).includes(",")}(t,e))return function(t,e,n,r,o){return Promise.all(j(n,r).map((function(n){return a.default[t]("user",e,"followed","concept",n.id,n.formData,o)}))).then((function(){return y(n.querySelector("button"),"add"===t)}))}(r,i,e,l,u);if("followPlusDigestEmail"===e.getAttribute("data-myft-ui-variant")&&"add"===r)return a.default.followPlusDigestEmail(e.getAttribute("data-concept-id"),l);var c=o[t],s=e.getAttribute(c.idProperty),d=c.actorType,f=c.subjectType;return e.elements.token&&e.elements.token.value||document.body.dispatchEvent(new CustomEvent("oErrors.log",{bubbles:!0,detail:{error:Error("myFT form submitted without a CSRF token"),info:{action:r,actorType:d,actorId:i,relationshipName:t,subjectType:f,subjectId:s,formData:l}}})),a.default[r](d,i,t,f,s,l,u).then((function(){n&&"add"===r&&"followed"===t&&U(s)})).catch((function(t){throw setTimeout((function(){return e.querySelector("button").removeAttribute("disabled")}),1e3),t}))}},B=new k.default(document.body);function K(t,e){return function(n,r){return n.preventDefault(),$(e,r,t.myftOfferInstantAlertNotifications)}}var Y=function(t){var e,n,r,a,i;t.anonymous||m(),W||(W=!0,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;[o.followed.uiSelector,o.saved.uiSelector,'[data-myft-ui="instant"]'].forEach((function(e){Array.from(t.querySelectorAll(e)).forEach((function(t){t.dataset.jsAction&&(t.setAttribute("method","POST"),t.setAttribute("action",t.dataset.jsAction),delete t.dataset.jsAction)}))}))}(),t&&t.anonymous?(n=window.location.pathname,r="/products?segID=400863&segmentID=190b4443-dc03-bd53-e79b-b4b6fbd04e64",a="/login".concat(n.length?"?location=".concat(n):""),i={followed:'Please <a href="'.concat(r,'" class="myft-ui-subscribe" data-trackable="Subscribe">subscribe</a> or <a href="').concat(a,'" data-trackable="Sign In">sign in</a> to add this topic to myFT.'),saved:'Please <a href="'.concat(r,'" class="myft-ui-subscribe" data-trackable="Subscribe">subscribe</a> or <a href="').concat(a,'" data-trackable="Sign In">sign in</a> to save this article.')},["followed","saved"].forEach((function(t){B.on("submit",o[t].uiSelector,(function(e){e.preventDefault(),S.default.show({content:i[t],trackable:"myft-anon",focusSelector:".myft-ui-subscribe",returnFocusSelector:document.activeElement,duration:0})}))}))):(t.flags&&t.flags.myftOfferInstantAlertNotifications&&(e=t.flags.fcmSwitch,C&&window.ServiceWorkerRegistration&&"showNotification"in window.ServiceWorkerRegistration.prototype&&"PushManager"in window?(_=e?{userVisibleOnly:!0,applicationServerKey:F("BFJGSlVTZ08KYS3heiwOovUPEURcYea478jEXXA5luZ1wo6O6MJ_o2NQckxHudMxa15tOh3YcjDZ-_bKZkPG274")}:{userVisibleOnly:!0},navigator.serviceWorker.ready.then((function(t){D=!0,t.pushManager.getSubscription().then((function(t){return!!t&&(L(t),!0)}))}))):Promise.reject()),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.keys(o).forEach((function(e){var n=o[e].uiSelector;n&&(u(e).then((function(){var t=l(e);if(t.length>0){var n=t.map((function(t){return t.uuid}));b(e,n,!0)}})),["add","remove","update"].forEach((function(t){var n=o[e].actorType,r=o[e].subjectType,a="myft.".concat(n,".").concat(e,".").concat(r,".").concat(t);document.body.addEventListener(a,(function(n){var a=n.detail.results&&n.detail.results[0],o=!!n.detail.results;v(e,n.detail.subject,o,void 0,a,!0),x({subjectType:r,action:t,subjectId:n.detail.subject,postedData:n.detail.data,resultData:a,trackingInfo:n.detail.trackingInfo})}))})),B.on("submit",n,K(t,e)))}))}(t.flags),T()))},G=n("20ee13ff"),H=n("ddbd4943"),J=new k.default(document.body),V=Object(p.default)();function Z(t,e,n){return v("contained",e,n),a.default.personaliseUrl("/myft/list/".concat(t)).then((function(t){var e='\n\t\t\t\t<a href="/myft" class="myft-ui__logo" data-trackable="myft-logo"><abbr title="myFT" class="myft-ui__icon"></abbr></a>\n\t\t\t\t\t'.concat(n?'Article added to your list.\n\t\t\t\t<a href="'.concat(t,'" data-trackable="alerts">View list</a>'):"Article removed from your list","\n\t\t\t");e&&S.default.show({content:e,trackable:"myft-feedback-notification"})}))}function z(t,e,n){a.default.personaliseUrl(e).then((function(t){return fetch(t,{credentials:"same-origin"})})).then((function(t){if(t.ok)return t.text();throw new Error("Unexpected response: ".concat(t.statusText))})).then((function(e){return function(t,e){var n=e.name,r=void 0===n?"myft-ui":n,a=e.title,o=void 0===a?"&nbsp;":a,i=e.shaded,l=void 0!==i&&i,u=G.default.getOverlays()[r];u&&u.destroy();var c=new G.default(r,{heading:{title:o,shaded:l},html:t});return c.open(),new Promise((function(t){document.body.addEventListener("oOverlay.ready",(function(){return t(c)}))}))}(e,{name:"myft-lists",title:t})})).then((function(t){H.default.init(t.content),function(t,e){var n=t.content.querySelector(".js-save-to-existing-list"),r=t.content.querySelector(".js-list-select");n&&n.addEventListener("click",(function(n){if(n.preventDefault(),r.value){var o=r.options[r.selectedIndex].value;a.default.add("list",o,"contained","content",e,{token:V}).then((function(e){Z(e.actorId,e.subjectId,!!e.results),t.close()}))}}))}(t,n),function(t,e){var n=t.content.querySelector(".js-create-list"),r=t.content.querySelector(".js-name");n.addEventListener("click",(function(n){if(n.preventDefault(),r.value){var o={token:V,name:r.value};a.default.add("user",null,"created","list",Object(O.uuid)(),o).then((function(t){return e?a.default.add("list",t.subject,"contained","content",e,{token:V}):t})).then((function(n){e&&Z(n.actorId,e,!!n.results),t.close()})).catch((function(t){throw S.default.show({content:e?"Error adding article to new list":"Error creating new list",type:"error"}),t}))}}))}(t,n)})).catch((function(t){throw S.default.show({content:"Sorry, something went wrong",type:"error"}),t}))}function X(t){return a.default.getAll("created","list").then((function(t){return t.filter((function(t){return!t.isRedirect}))})).then((function(e){e.length&&function(t){z("Article saved","/myft/list?fragment=true&fromArticleSaved=true&contentId=".concat(t),t)}(t)}))}function Q(){document.body.addEventListener("myft.user.saved.content.add",(function(t){X(t.detail.subject)})),J.on("click",'[data-myft-ui="copy-to-list"]',(function(t){var e,n;t.preventDefault(),e=t.target.getAttribute("data-content-id"),n=t.target.getAttribute("data-actor-id"),z("Copy to list","/myft/list?fragment=true&copy=true&contentId=".concat(e,"&excludeList=").concat(n),e)})),J.on("click",'[data-myft-ui="create-list"]',(function(t){t.preventDefault(),z("Create list","/myft/list?fragment=true")}))}var tt=function(t){T(t),Object.keys(o).forEach((function(e){var n=l(e);n.length>0&&b(e,n.map((function(t){return t.uuid})),!0,t)})),m({container:t})},et=n("616ba185"),nt=window.location.pathname.startsWith("/myft"),rt=!document.referrer||!new URL(document.referrer).hostname.endsWith("ft.com"),at=document.querySelector(".o-header__top-link--myft"),ot=window.FT&&window.FT.flags&&window.FT.flags.get("myFT_HeaderTooltip");function it(t){Y(t),Q(),function(){if(rt&&!nt&&at&&ot)a.default.getAll("followed","concept").then((function(t){if(t.length){var e=t.sort((function(t,e){return e.lastPublished-t.lastPublished})).map((function(t){var e=t.name;return'<span style="no-wrap">'.concat(e,"</span>")})).slice(0,3),n="Read the latest on ";3===e.length&&(n+="".concat(e.shift(),", ")),n+=e.join(" and "),n+=" stories.",new et.default(at,{target:"myft-header-tooltip",content:n,showOnConstruction:!0,position:"below"})}}))}()}},"2588dbc0":function(t,e){t.exports={toggleState:function(t,e){var n=t.getAttribute("aria-label"),r=t.getAttribute("data-alternate-label");n&&(t.setAttribute("aria-label",r),t.setAttribute("title",r),t.setAttribute("data-alternate-label",n));var a=t.textContent||t.innerText;if(a){var o=t.getAttribute("data-text-variant"),i=t.querySelector("[data-variant-label]"),l=o&&i?i:t,u=t.getAttribute("data-alternate-text")||r;if(l.textContent=u,o){var c=u.includes("Saved")?"Save ":"Saved ";t.setAttribute("data-alternate-text",c)}else t.setAttribute("data-alternate-text",a)}var s="true"===t.getAttribute("aria-pressed");return e||t.setAttribute("aria-pressed",!s),t.dispatchEvent(new CustomEvent("nButtons.stateChange",{detail:{state:s},bubbles:!0})),t}}},"3e6fa1c6":function(t,e,n){"use strict";n.r(e),n.d(e,"getNewArticlesSinceTime",(function(){return mt}));var r=n("f26e1e46"),a=n.n(r),o=n("cb394754"),i=n("244a793a"),l=n("207673ae"),u=n("8551e2a2"),c=n("cd68b636"),s=n("f1258e4c"),d=function(t){return Object(c.a)(t)||console.error("Invalid date passed",[t]),t},f=function(t){return Object(o.a)(d(t))},p=function(t,e){return Object(i.a)(d(t),d(e))},m=function(t){return Object(u.a)(d(t))};function y(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return i=t.done,t},e:function(t){l=!0,o=t},f:function(){try{i||null==n.return||n.return()}finally{if(l)throw o}}}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var v,h=new Set,g=function(t){var e,n=window.localStorage.getItem(t),r=new Date(n);return"string"==typeof(e=n)&&"T"===e.charAt(10)&&d(r)?r:null},w=function(){return g("newArticlesSinceTime")},x=function(){return g("myFTIndicatorDismissedAt")},S=function(){try{var t=window.localStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(t){return!1}},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({},t);t.time&&(e.time=t.time.toISOString()),t.updateStarted&&(e.updateStarted=t.updateStarted.toISOString()),window.localStorage.setItem("myFTIndicatorUpdate",JSON.stringify(e)),j()},O=function(){try{var t=JSON.parse(window.localStorage.getItem("myFTIndicatorUpdate"));return t.time&&(t.time=new Date(t.time)),t.updateStarted&&(t.updateStarted=new Date(t.updateStarted)),t}catch(t){}},T=function(t){return k(Object.assign({},O(),t))},A=function(t){h.size||window.addEventListener("storage",j),h.add(t)};function j(){var t=(O()||{}).count;if(t!==v){var e,n=y(h);try{for(n.s();!(e=n.n()).done;){(0,e.value)(t||0)}}catch(t){n.e(t)}finally{n.f()}v=t||0}}function _(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}var D,F,L,U=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onClick;E(this,t),this.count=void 0,this.container=e,this.container.classList.add("myft__indicator-container"),this.el=document.createElement("span"),this.el.classList.add("myft__indicator"),this.el.classList.add("myft__indicator--hidden"),e.appendChild(this.el),"function"==typeof r&&this.container.addEventListener("click",(function(){return r()}))}return C(t,[{key:"setCount",value:function(t){t!==this.count&&(t<1?this.el.classList.add("myft__indicator--hidden"):(this.el.classList.remove("myft__indicator--hidden"),t<10?this.el.classList.add("myft__indicator--single-digit"):this.el.classList.remove("myft__indicator--single-digit"),this.el.innerText=t>0&&t<200?t:""),this.count=t)}}]),t}(),q=function(){function t(){E(this,t),this.count=void 0,this.faviconLinks=Array.from(document.querySelectorAll("head link[rel=icon]")),this.showDot=!1}return C(t,[{key:"setCount",value:function(t){if(t!==this.count){this.showDot=t>0;var e=this.showDot?"brand-ft-logo-square-coloured-dot":"brand-ft-logo-square-coloured-no-dot";this.faviconLinks.forEach((function(t){t.href=t.href.replace(/brand-ft-logo-square-coloured(-dot|-no-dot)?/,e)})),this.count=t}}}]),t}(),N=function(){function t(){E(this,t),this.count=void 0,this.originalTitle=document.title}return C(t,[{key:"setCount",value:function(t){t!==this.count&&(document.title=t>0?"(".concat(t,") ").concat(this.originalTitle):this.originalTitle,this.count=t)}}]),t}(),M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};D=_(t).map((function(t){return new U(t,e)})),e.flags&&e.flags.myftUnreadFavicon&&(F=new q,L=new N)},R=function(t){D.forEach((function(e){return e.setCount(t)})),F&&F.setCount(t),L&&L.setCount(t)},W=n("08a04e80");function $(t,e,n,r,a,o,i){try{var l=t[o](i),u=l.value}catch(t){return void n(t)}l.done?e(u):Promise.resolve(u).then(r,a)}function B(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){$(o,r,a,i,l,"next",t)}function l(t){$(o,r,a,i,l,"throw",t)}i(void 0)}))}}var K=function(){var t=B(a.a.mark((function t(e,n){var r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(e);case 2:return r=t.sent,o=r.filter((function(t){var e=t.userCompletion;return(void 0===e?-1:e)<1})).filter((function(t){var e=t.contentTimeStamp;return p(Object(s.a)(e),n)})),t.abrupt("return",o.length);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function Y(t){return G.apply(this,arguments)}function G(){return(G=B(a.a.mark((function t(e){var n,r,o,i,l;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new URLSearchParams({originatingSignals:"followed",from:"-1d",source:"myft-ui"}),t.next=3,fetch("/__myft/api/onsite/feed/".concat(e,"?").concat(n.toString()),{credentials:"include"});case 3:return r=t.sent,t.next=6,Object(W.json)(r);case 6:return o=t.sent,i=o.results,l=void 0===i?[]:i,t.abrupt("return",l);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var H=function(t,e){return n=new CustomEvent("oTracking.event",{detail:{category:"unread-articles-indicator",action:"render",count:t,newArticlesSinceTime:e},bubbles:!0}),void document.body.dispatchEvent(n);var n};function J(t,e,n,r,a,o,i){try{var l=t[o](i),u=l.value}catch(t){return void n(t)}l.done?e(u):Promise.resolve(u).then(r,a)}function V(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){J(o,r,a,i,l,"next",t)}function l(t){J(o,r,a,i,l,"throw",t)}i(void 0)}))}}function Z(t,e){return t?e?p(t,e)?t:e:t:e}function z(t,e){return X.apply(this,arguments)}function X(){return(X=V(a.a.mark((function t(e,n){var r,o,i,l,u,c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=O(),l=!(i=!o)&&(!o.time||n.getTime()-o.time.getTime()>3e5),u=!i&&(!o.updateStarted||n.getTime()-o.updateStarted.getTime()>6e5),!(i||l&&u)){t.next=14;break}return T({updateStarted:n}),c=Z(w(),x()),r=!0,t.next=11,K(e,c);case 11:s=t.sent,o&&s===o.count||H(s,c),k({time:n,count:s,updateStarted:!1});case 14:t.next=20;break;case 16:throw t.prev=16,t.t0=t.catch(0),r&&T({updateStarted:!1}),t.t0;case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))).apply(this,arguments)}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tt,et,nt,rt,at=new(function(){function t(){var e,n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expiry=g("deviceSessionExpiry"),function(t){window.localStorage.setItem("deviceSessionExpiry",t.toISOString())}((e=new Date,n=30,Object(l.a)(d(e),n)))}var e,n,r;return e=t,(n=[{key:"isNewSession",value:function(){return!this.expiry||p(new Date,this.expiry)}}])&&Q(e.prototype,n),r&&Q(e,r),t}()),ot=function(t,e,n){return n&&f(n)&&!at.isNewSession()?Promise.resolve(n):function(t){var e="/__myft/users/:userId/last-seen?source=next-myft".replace(":userId",t);return fetch(e,{credentials:"include"}).then(W.json).then((function(t){var e=t.lastSeen;return new Date(e)}))}(t).then((function(t){return f(t)?t:Promise.reject()})).catch((function(){return m(e)}))},it=function(t,e){var n=S()&&w();return ot(t,e,n).then((function(t){var e;return S()&&(e=t,window.localStorage.setItem("newArticlesSinceTime",e.toISOString())),t}))},lt=n("8b8c7872");function ut(t,e,n,r,a,o,i){try{var l=t[o](i),u=l.value}catch(t){return void n(t)}l.done?e(u):Promise.resolve(u).then(r,a)}function ct(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){ut(o,r,a,i,l,"next",t)}function l(t){ut(o,r,a,i,l,"throw",t)}i(void 0)}))}}var st=0===window.location.pathname.indexOf("/myft/following"),dt=function(){return bt().catch(wt)};e.default=ct(a.a.mark((function t(){var e,n,r,o,i,l,u=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=u.length>0&&void 0!==u[0]?u[0]:{},t.prev=1,S()){t.next=4;break}return t.abrupt("return");case 4:return n=document.querySelectorAll(".o-header__top-link--myft"),r=Object.assign({onClick:xt,flags:{}},e),tt=r.flags.MyFT_UnreadArticlesIndicatorPolling,t.next=9,mt();case 9:return o=O()||{},i=o.count,l=void 0===i?0:i,M(n,r),R(l),document.addEventListener("visibilitychange",ht),A((function(t){return R(t)})),st&&xt(),t.abrupt("return",bt());case 18:t.prev=18,t.t0=t.catch(1);case 20:case"end":return t.stop()}}),t,null,[[1,18]])})));function ft(){return pt.apply(this,arguments)}function pt(){return(pt=ct(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(rt){t.next=8;break}return t.next=3,lt.default.uuid();case 3:if(e=t.sent,n=e.uuid){t.next=7;break}throw new Error("No userId");case 7:rt=n;case 8:return t.abrupt("return",rt);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function mt(){return yt.apply(this,arguments)}function yt(){return(yt=ct(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft();case 2:if(e=t.sent,n=m(new Date),nt||!S()){t.next=13;break}return t.prev=5,t.next=8,it(e,new Date);case 8:nt=t.sent,t.next=13;break;case 11:t.prev=11,t.t0=t.catch(5);case 13:return t.abrupt("return",nt||n);case 14:case"end":return t.stop()}}),t,null,[[5,11]])})))).apply(this,arguments)}function bt(){return vt.apply(this,arguments)}function vt(){return(vt=ct(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft();case 2:return e=t.sent,t.next=5,z(e,new Date);case 5:if(tt){t.next=7;break}return t.abrupt("return");case 7:et=window.setTimeout(dt,3e5);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ht(){return gt.apply(this,arguments)}function gt(){return(gt=ct(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("visible"===document.visibilityState){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,ft();case 5:return t.next=7,mt();case 7:return et&&window.clearTimeout(et),t.next=10,bt();case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),wt();case 15:case"end":return t.stop()}}),t,null,[[2,12]])})))).apply(this,arguments)}function wt(){rt=void 0,et&&window.clearTimeout(et)}function xt(){var t;T({count:0,time:new Date}),t=new Date,window.localStorage.setItem("myFTIndicatorDismissedAt",t.toISOString())}},"5ea01441":function(t,e,n){"use strict";n.r(e);var r=n("1063c397"),a=n("dcfa7677"),o=n("1160db06"),i=n.n(o),l=n("616ba185");function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var s=new r.default(document.body),d=function(t,e,n){var r;e?a.default.remove("user",null,"prioritised","concept",t,n):a.default.add("user",null,"prioritised","concept",t,n),document.body.dispatchEvent((r={action:"act"}.action,new CustomEvent("oTracking.event",{detail:{category:"n-messaging",messaging:"myft-onboarding-pinning-promo",action:r},bubbles:!0})))};e.default=function(){a.default.init().then((function(){s.off(),s.on("click","button[data-prioritise-button]",(function(t){t.preventDefault();var e,n=t.target.closest("[data-myft-prioritise]"),r=n?i()(n,{hash:!0}):{},a=t.target.dataset,o=a.conceptId,l=a.prioritised,u=t.target.closest(".myft-pin-button-wrapper");(e=u)&&e.classList.add("loading");var c="true"===l;d(o,c,r);var s=u.querySelector(".n-myft-ui__announcement");s&&(s.innerHTML=s.dataset[c?"pressedText":"unpressedText"])}))})),u(document.querySelectorAll(".o-tooltip--myft-pin-button")).forEach((function(t){new l.default(t)}))}},"7bac049d":function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return b}));var r,a=n("87ae850e"),o=n("1063c397"),i=n("dcfa7677"),l=n("33cab54f"),u=n("2588dbc0"),c=new o.default(document.body),s='[data-myft-ui="instant"]';function d(t,e){Object(l.$$)("".concat(s,'[data-concept-id="').concat(t,'"] button')).forEach((function(t){var n,r;(r=e)!==("true"===(n=t).getAttribute("aria-pressed"))&&u.toggleState(n),n.removeAttribute("disabled"),n.setAttribute("value",!r)}))}function f(t){var e,n=!!((e=t)._rel||e.results&&e.results[0])&&Boolean(e._rel?e._rel.instant:e.results[0].rel.properties.instant);d(t.subject,n)}function p(t,e){if(t.preventDefault(),r&&r.anonymous)a.show({content:'Please <a href="'.concat("/products?segID=400863&segmentID=190b4443-dc03-bd53-e79b-b4b6fbd04e64",'" data-trackable="Subscribe">subscribe</a> or <a href="').concat("/login",'" data-trackable="Sign In">sign in</a> to receive instant alerts.'),trackable:"myft-anon"});else{var n=e.getAttribute("data-concept-id"),o=Object(l.$)("button",e),u=Object(l.$$)("input",e);u.push(o),function(t,e){i.default.updateRelationship("user",null,"followed","concept",t,e)}(n,function(t){var e={};return t.forEach((function(t){if(t.name.startsWith("_rel.")){var n=t.name.slice("_rel.".length);e._rel=e._rel||{},e._rel[n]=t.value}else"hidden"===t.type&&(e[t.name]=t.value)})),e}(u))}}function m(){i.default.loaded&&i.default.loaded["followed.concept"]&&i.default.loaded["followed.concept"].items.forEach((function(t){t._rel.instant&&d(t.uuid,!0)}))}function y(){document.body.addEventListener("myft.user.followed.concept.load",m),document.body.addEventListener("myft.user.followed.concept.remove",(function(t){d(t.detail.subject,!1)})),document.body.addEventListener("myft.user.followed.concept.update",(function(t){return f(t.detail)})),c.on("submit","".concat(s),p)}function b(t){var e=Object(l.$$)(s);r=t,e.length>0&&(m(),y())}},"9a3b5237":function(t,e,n){var r=n("051e1e09");t.exports=(r.default||r).template({1:function(t,e,r,a,o){var i,l,u=null!=e?e:t.nullContext||{},c=t.lambda,s=t.escapeExpression,d=t.hooks.blockHelperMissing,f=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<form class="n-myft-ui n-myft-ui--instant'+(null!=(i=f(r,"if").call(u,null!=e?f(e,"hideButtonText"):e,{name:"if",hash:{},fn:t.program(2,o,0),inverse:t.noop,data:o,loc:{start:{line:2,column:41},end:{line:2,column:100}}}))?i:"")+" "+s(c(null!=e?f(e,"extraClasses"):e,e))+'"\n\t\t\tmethod="GET"\n\t\t\tdata-myft-ui="instant"\n\t\t\tdata-concept-id="'+s(c(null!=e?f(e,"conceptId"):e,e))+'"\n\t\t\taction="/myft/add/'+s(c(null!=e?f(e,"conceptId"):e,e))+'?instant=true"\n\t\t\tdata-js-action="/__myft/api/core/followed/concept/'+s(c(null!=e?f(e,"conceptId"):e,e))+'?method=put">\n'+(null!=(i=t.invokePartial(n("c4549880"),e,{name:"n-myft-ui/components/csrf-token/input",data:o,indent:"\t",helpers:r,partials:a,decorators:t.decorators}))?i:"")+'\t<input type="hidden" value="'+s(c(null!=e?f(e,"name"):e,e))+'" name="name">\n'+(null!=(i=f(r,"if").call(u,null!=e?f(e,"directType"):e,{name:"if",hash:{},fn:t.program(4,o,0),inverse:t.program(6,o,0),data:o,loc:{start:{line:10,column:1},end:{line:14,column:8}}}))?i:"")+'\t<button\n\t\t\taria-label="Get instant alerts for '+s(c(null!=e?f(e,"name"):e,e))+'"\n'+(null!=(i=(l=n("7be2f5ab"),l&&(l.__esModule?l.default:l)).call(u,null!=e?f(e,"hasInstantAlert"):e,(i=o&&f(o,"root"))&&f(i,"cacheablePersonalisedUrl"),{name:"ifAll",hash:{},fn:t.program(8,o,0),inverse:t.program(10,o,0),data:o,loc:{start:{line:17,column:3},end:{line:21,column:13}}}))?i:"")+'\tclass="n-myft-ui__button\n\t'+(null!=(i=d.call(e,c(null!=e?f(e,"variant"):e,e),{name:"variant",hash:{},fn:t.program(12,o,0),inverse:t.noop,data:o,loc:{start:{line:23,column:1},end:{line:23,column:53}}}))?i:"")+"\n\t"+(null!=(i=d.call(e,c(null!=e?f(e,"size"):e,e),{name:"size",hash:{},fn:t.program(12,o,0),inverse:t.noop,data:o,loc:{start:{line:24,column:1},end:{line:24,column:47}}}))?i:"")+'\n\tn-myft-ui__button--instant\n\tn-myft-ui__button--instant-light"\n\tdata-alternate-label="Stop instant alerts for '+s(c(null!=e?f(e,"name"):e,e))+'"\n'+(null!=(i=f(r,"if").call(u,null!=e?f(e,"alternateText"):e,{name:"if",hash:{},fn:t.program(14,o,0),inverse:t.program(16,o,0),data:o,loc:{start:{line:28,column:1},end:{line:36,column:8}}}))?i:"")+'\tdata-concept-id="'+s(c(null!=e?f(e,"conceptId"):e,e))+'" \n\tdata-trackable="instant"\n\ttitle="Get instant alerts for '+s(c(null!=e?f(e,"name"):e,e))+'"\n\tname="_rel.instant"\n\tvalue="'+(null!=(i=f(r,"if").call(u,null!=e?f(e,"hasInstantAlert"):e,{name:"if",hash:{},fn:t.program(21,o,0),inverse:t.program(23,o,0),data:o,loc:{start:{line:41,column:8},end:{line:41,column:55}}}))?i:"")+'"\n\ttype="submit"\n\t>'+(null!=(i=f(r,"if").call(u,null!=e?f(e,"buttonText"):e,{name:"if",hash:{},fn:t.program(25,o,0),inverse:t.program(27,o,0),data:o,loc:{start:{line:43,column:2},end:{line:43,column:63}}}))?i:"")+"</button>\n</form>\n"},2:function(t,e,n,r,a){return" n-myft-ui--instant--hide-text"},4:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t<input type="hidden" value="'+t.escapeExpression(t.lambda(null!=e?o(e,"directType"):e,e))+'" name="directType">\n'},6:function(t,e,n,r,a){return'\t<input type="hidden" value="http://www.ft.com/ontology/concept/Concept" name="directType">\n'},8:function(t,e,n,r,a){return'\t\t\taria-pressed="true"\n'},10:function(t,e,n,r,a){return'\t\t\taria-pressed="false"\n'},12:function(t,e,n,r,a){return" n-myft-ui__button--"+t.escapeExpression(t.lambda(e,e))},14:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\tdata-alternate-text="'+t.escapeExpression(t.lambda(null!=e?o(e,"alternateText"):e,e))+'"\n'},16:function(t,e,n,r,a){var o,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(o=i(n,"if").call(null!=e?e:t.nullContext||{},null!=e?i(e,"buttonText"):e,{name:"if",hash:{},fn:t.program(17,a,0),inverse:t.program(19,a,0),data:a,loc:{start:{line:31,column:1},end:{line:35,column:8}}}))?o:""},17:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\tdata-alternate-text="'+t.escapeExpression(t.lambda(null!=e?o(e,"buttonText"):e,e))+'"\n'},19:function(t,e,n,r,a){return'\tdata-alternate-text="Instant alerts"\n'},21:function(t,e,n,r,a){return"false"},23:function(t,e,n,r,a){return"true"},25:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression(t.lambda(null!=e?o(e,"buttonText"):e,e))},27:function(t,e,n,r,a){return"Instant alerts"},29:function(t,e,n,r,a){return"\x3c!-- Instant alert button hidden due to myFtApiWrite being off --\x3e\n"},compiler:[8,">= 4.3.0"],main:function(t,e,n,r,a){var o,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(o=i(n,"if").call(null!=e?e:t.nullContext||{},(o=(o=a&&i(a,"root"))&&i(o,"flags"))&&i(o,"myFtApiWrite"),{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.program(29,a,0),data:a,loc:{start:{line:1,column:0},end:{line:47,column:7}}}))?o:""},usePartial:!0,useData:!0})},c13b34dd:function(t,e,n){var r=n("051e1e09");function a(t){return t&&(t.__esModule?t.default:t)}t.exports=(r.default||r).template({1:function(t,e,r,o,i){var l,u=t.lambda,c=t.escapeExpression,s=null!=e?e:t.nullContext||{},d=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t<form\n\t\tclass="n-myft-ui n-myft-ui--follow '+c(u(null!=e?d(e,"extraClasses"):e,e))+'"\n\t\tmethod="GET"\n\t\tdata-myft-ui="follow"\n\t\tdata-concept-id="'+c(u(null!=e?d(e,"conceptId"):e,e))+'"\n\t\t'+(null!=(l=d(r,"if").call(s,null!=e?d(e,"collectionName"):e,{name:"if",hash:{},fn:t.program(2,i,0),inverse:t.noop,data:i,loc:{start:{line:7,column:2},end:{line:7,column:85}}}))?l:"")+"\n"+(null!=(l=d(r,"if").call(s,null!=e?d(e,"followPlusDigestEmail"):e,{name:"if",hash:{},fn:t.program(4,i,0),inverse:t.program(6,i,0),data:i,loc:{start:{line:8,column:2},end:{line:19,column:9}}}))?l:"")+">\n"+(null!=(l=t.invokePartial(n("c4549880"),e,{name:"n-myft-ui/components/csrf-token/input",data:i,indent:"\t\t",helpers:r,partials:o,decorators:t.decorators}))?l:"")+'\t\t<div\n\t\t\tclass="n-myft-ui__announcement o-normalise-visually-hidden"\n\t\t\taria-live="assertive"\n\t\t\tdata-pressed-text="Now following '+c(u(null!=e?d(e,"name"):e,e))+'."\n\t\t\tdata-unpressed-text="No longer following '+c(u(null!=e?d(e,"name"):e,e))+'."\n\t\t></div>\n\t\t<button\n'+(null!=(l=a(n("7be2f5ab")).call(s,null!=e?d(e,"setFollowButtonStateToSelected"):e,(l=i&&d(i,"root"))&&d(l,"cacheablePersonalisedUrl"),{name:"ifAll",hash:{},fn:t.program(11,i,0),inverse:t.program(19,i,0),data:i,loc:{start:{line:28,column:3},end:{line:56,column:13}}}))?l:"")+'\t\t\tclass="'+c(u(null!=e?d(e,"extraButtonClasses"):e,e))+"\n\t\t\t\tn-myft-follow-button"+(null!=(l=t.hooks.blockHelperMissing.call(e,u(null!=e?d(e,"variant"):e,e),{name:"variant",hash:{},fn:t.program(23,i,0),inverse:t.noop,data:i,loc:{start:{line:59,column:4},end:{line:59,column:61}}}))?l:"")+'"\n\t\t\tdata-concept-id="'+c(u(null!=e?d(e,"conceptId"):e,e))+'" \n'+(null!=(l=d(r,"if").call(s,null!=e?d(e,"followPlusDigestEmail"):e,{name:"if",hash:{},fn:t.program(25,i,0),inverse:t.noop,data:i,loc:{start:{line:61,column:3},end:{line:63,column:10}}}))?l:"")+'\t\t\tdata-trackable="follow"\n\t\t\ttype="submit">'+(null!=(l=d(r,"if").call(s,null!=e?d(e,"buttonText"):e,{name:"if",hash:{},fn:t.program(27,i,0),inverse:t.program(29,i,0),data:i,loc:{start:{line:66,column:3},end:{line:74,column:12}}}))?l:"")+"</button>\n\t</form>\n"},2:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'data-myft-tracking="collectionName='+t.escapeExpression(t.lambda(null!=e?o(e,"collectionName"):e,e))+'"'},4:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\taction="/__myft/api/core/follow-plus-digest-email/'+t.escapeExpression(t.lambda(null!=e?o(e,"conceptId"):e,e))+'?method=put"\n\t\t\tdata-myft-ui-variant="followPlusDigestEmail"\n'},6:function(t,e,r,o,i){var l,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return(null!=(l=a(n("7be2f5ab")).call(null!=e?e:t.nullContext||{},null!=e?u(e,"setFollowButtonStateToSelected"):e,(l=i&&u(i,"root"))&&u(l,"cacheablePersonalisedUrl"),{name:"ifAll",hash:{},fn:t.program(7,i,0),inverse:t.program(9,i,0),data:i,loc:{start:{line:12,column:3},end:{line:18,column:13}}}))?l:"")+"\t\t"},7:function(t,e,n,r,a){var o=t.lambda,i=t.escapeExpression,l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\taction="/myft/remove/'+i(o(null!=e?l(e,"conceptId"):e,e))+'"\n\t\t\t\tdata-js-action="/__myft/api/core/followed/concept/'+i(o(null!=e?l(e,"conceptId"):e,e))+'?method=delete"\n'},9:function(t,e,n,r,a){var o=t.lambda,i=t.escapeExpression,l=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\taction="/myft/add/'+i(o(null!=e?l(e,"conceptId"):e,e))+'"\n\t\t\t\tdata-js-action="/__myft/api/core/followed/concept/'+i(o(null!=e?l(e,"conceptId"):e,e))+'?method=put"\n'},11:function(t,e,n,r,a){var o,i=t.lambda,l=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\taria-label="Remove '+l(i(null!=e?u(e,"name"):e,e))+' from myFT"\n\t\t\t\ttitle="Remove '+l(i(null!=e?u(e,"name"):e,e))+' from myFT"\n\t\t\t\tdata-alternate-label="Add '+l(i(null!=e?u(e,"name"):e,e))+' to myFT"\n\t\t\t\taria-pressed="true"\n'+(null!=(o=u(n,"if").call(null!=e?e:t.nullContext||{},null!=e?u(e,"alternateText"):e,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.program(14,a,0),data:a,loc:{start:{line:33,column:4},end:{line:41,column:11}}}))?o:"")},12:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t\tdata-alternate-text="'+t.escapeExpression(t.lambda(null!=e?o(e,"alternateText"):e,e))+'"\n'},14:function(t,e,n,r,a){var o,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(o=i(n,"if").call(null!=e?e:t.nullContext||{},null!=e?i(e,"buttonText"):e,{name:"if",hash:{},fn:t.program(15,a,0),inverse:t.program(17,a,0),data:a,loc:{start:{line:36,column:5},end:{line:40,column:12}}}))?o:""},15:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t\t\tdata-alternate-text="'+t.escapeExpression(t.lambda(null!=e?o(e,"buttonText"):e,e))+'"\n'},17:function(t,e,n,r,a){return'\t\t\t\t\t\tdata-alternate-text="Add to myFT"\n'},19:function(t,e,n,r,a){var o,i=t.lambda,l=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\taria-pressed="false"\n\t\t\t\taria-label="Add '+l(i(null!=e?u(e,"name"):e,e))+' to myFT"\n\t\t\t\ttitle="Add '+l(i(null!=e?u(e,"name"):e,e))+' to myFT"\n\t\t\t\tdata-alternate-label="Remove '+l(i(null!=e?u(e,"name"):e,e))+' from myFT"\n'+(null!=(o=u(n,"if").call(null!=e?e:t.nullContext||{},null!=e?u(e,"alternateText"):e,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.program(20,a,0),data:a,loc:{start:{line:47,column:4},end:{line:55,column:11}}}))?o:"")},20:function(t,e,n,r,a){var o,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(o=i(n,"if").call(null!=e?e:t.nullContext||{},null!=e?i(e,"buttonText"):e,{name:"if",hash:{},fn:t.program(15,a,0),inverse:t.program(21,a,0),data:a,loc:{start:{line:50,column:5},end:{line:54,column:12}}}))?o:""},21:function(t,e,n,r,a){return'\t\t\t\t\t\tdata-alternate-text="Added"\n'},23:function(t,e,n,r,a){return" n-myft-follow-button--"+t.escapeExpression(t.lambda(e,e))},25:function(t,e,n,r,a){return'\t\t\t\tdata-trackable-context-messaging="add-to-myft-plus-digest-button"\n'},27:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression(t.lambda(null!=e?o(e,"buttonText"):e,e))},29:function(t,e,r,o,i){var l,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(l=a(n("7be2f5ab")).call(null!=e?e:t.nullContext||{},null!=e?u(e,"setFollowButtonStateToSelected"):e,(l=i&&u(i,"root"))&&u(l,"cacheablePersonalisedUrl"),{name:"ifAll",hash:{},fn:t.program(30,i,0),inverse:t.program(32,i,0),data:i,loc:{start:{line:69,column:4},end:{line:73,column:16}}}))?l:""},30:function(t,e,n,r,a){return"Added"},32:function(t,e,n,r,a){return"Add to myFT"},34:function(t,e,n,r,a){return"\t\x3c!-- Add to myFT button hidden due to myFtApiWrite being off --\x3e\n"},compiler:[8,">= 4.3.0"],main:function(t,e,n,r,a){var o,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(o=i(n,"if").call(null!=e?e:t.nullContext||{},(o=(o=a&&i(a,"root"))&&i(o,"flags"))&&i(o,"myFtApiWrite"),{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.program(34,a,0),data:a,loc:{start:{line:1,column:0},end:{line:79,column:7}}}))?o:""},usePartial:!0,useData:!0})},c4549880:function(t,e,n){var r=n("051e1e09");t.exports=(r.default||r).template({1:function(t,e,n,r,a){var o,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return t.escapeExpression(t.lambda((o=a&&i(a,"root"))&&i(o,"csrfToken"),e))},compiler:[8,">= 4.3.0"],main:function(t,e,n,r,a){var o,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<input\n\tdata-myft-csrf-token\n\tvalue="'+(null!=(o=i(n,"if").call(null!=e?e:t.nullContext||{},(o=a&&i(a,"root"))&&i(o,"cacheablePersonalisedUrl"),{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:3,column:8},end:{line:3,column:72}}}))?o:"")+'"\n\ttype="hidden"\n\tname="token">\n'},useData:!0})},c99a337b:function(t,e,n){"use strict";n.r(e);var r=n("99a4eb02"),a=n.n(r);e.default=function(){var t=a.a.get("FTSession_s")||a.a.get("FTSession");return t?t.slice(-36):""}},f382b16a:function(t,e,n){var r=n("051e1e09");t.exports=(r.default||r).template({1:function(t,e,r,a,o){var i,l=t.lambda,u=t.escapeExpression,c=null!=e?e:t.nullContext||{},s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<span class="myft-pin-divider"></span>\n<div class="myft-pin-button-wrapper">\n\t<form method="post" action="/__myft/api/core/prioritised/concept/'+u(l(null!=e?s(e,"id"):e,e))+"?method="+(null!=(i=s(r,"if").call(c,null!=e?s(e,"prioritised"):e,{name:"if",hash:{},fn:t.program(2,o,0),inverse:t.program(4,o,0),data:o,loc:{start:{line:4,column:80},end:{line:4,column:123}}}))?i:"")+'" data-myft-prioritise>\n'+(null!=(i=t.invokePartial(n("c4549880"),e,{name:"n-myft-ui/components/csrf-token/input",data:o,indent:"\t\t",helpers:r,partials:a,decorators:t.decorators}))?i:"")+'\t\t<input type="hidden" value="'+u(l(null!=e?s(e,"name"):e,e))+'" name="name"> '+(null!=(i=s(r,"if").call(c,null!=e?s(e,"directType"):e,{name:"if",hash:{},fn:t.program(6,o,0),inverse:t.program(8,o,0),data:o,loc:{start:{line:6,column:53},end:{line:8,column:100}}}))?i:"")+'\n\t\t<div\n\t\t\tclass="n-myft-ui__announcement o-normalise-visually-hidden"\n\t\t\taria-live="assertive"\n\t\t\tdata-pressed-text="'+u(l(null!=e?s(e,"name"):e,e))+' pinned in myFT."\n\t\t\tdata-unpressed-text="Unpinned '+u(l(null!=e?s(e,"name"):e,e))+' from myFT."\n\t\t></div>\n\t\t<button id="myft-pin-button__'+u(l(null!=e?s(e,"id"):e,e))+'" class="myft-pin-button" data-prioritise-button data-trackable="prioritised" data-concept-id="'+u(l(null!=e?s(e,"id"):e,e))+'" data-prioritised="'+(null!=(i=s(r,"if").call(c,null!=e?s(e,"prioritised"):e,{name:"if",hash:{},fn:t.program(10,o,0),inverse:t.program(12,o,0),data:o,loc:{start:{line:15,column:158},end:{line:15,column:201}}}))?i:"")+'"\n\t\t\t\taria-label="'+(null!=(i=s(r,"if").call(c,null!=e?s(e,"prioritised"):e,{name:"if",hash:{},fn:t.program(14,o,0),inverse:t.program(16,o,0),data:o,loc:{start:{line:16,column:16},end:{line:16,column:58}}}))?i:"")+" "+u(l(null!=e?s(e,"name"):e,e))+" "+(null!=(i=s(r,"if").call(c,null!=e?s(e,"prioritised"):e,{name:"if",hash:{},fn:t.program(18,o,0),inverse:t.program(20,o,0),data:o,loc:{start:{line:16,column:68},end:{line:16,column:108}}}))?i:"")+' myFT" aria-pressed="'+(null!=(i=s(r,"if").call(c,null!=e?s(e,"prioritised"):e,{name:"if",hash:{},fn:t.program(10,o,0),inverse:t.program(12,o,0),data:o,loc:{start:{line:16,column:129},end:{line:16,column:172}}}))?i:"")+'" title="'+(null!=(i=s(r,"if").call(c,null!=e?s(e,"prioritised"):e,{name:"if",hash:{},fn:t.program(14,o,0),inverse:t.program(16,o,0),data:o,loc:{start:{line:16,column:181},end:{line:16,column:223}}}))?i:"")+" "+u(l(null!=e?s(e,"name"):e,e))+'">\n\t\t</button>\n\t</form>\n</div>\n'},2:function(t,e,n,r,a){return"delete"},4:function(t,e,n,r,a){return"put"},6:function(t,e,n,r,a){var o=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\n\t\t<input type="hidden" value="'+t.escapeExpression(t.lambda(null!=e?o(e,"directType"):e,e))+'" name="directType"> '},8:function(t,e,n,r,a){return'\n\t\t<input type="hidden" value="http://www.ft.com/ontology/concept/Concept" name="directType"> '},10:function(t,e,n,r,a){return"true"},12:function(t,e,n,r,a){return"false"},14:function(t,e,n,r,a){return"Unpin"},16:function(t,e,n,r,a){return"Pin"},18:function(t,e,n,r,a){return"from"},20:function(t,e,n,r,a){return"in"},compiler:[8,">= 4.3.0"],main:function(t,e,n,r,a){var o,i=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return null!=(o=i(n,"if").call(null!=e?e:t.nullContext||{},null!=e?i(e,"showPrioritiseButton"):e,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:1,column:0},end:{line:20,column:7}}}))?o:""},usePartial:!0,useData:!0})},f9e8967f:function(t,e,n){var r=n("20ee13ff").default,a=function(t){return"\n<div class='instant-alerts-confirmation__info'>\n\t<div class='instant-alerts-confirmation-info__icon'></div>\n\t<div class='instant-alerts-confirmation-info__text'>Would you like to receive instant alerts on this device?</div>\n</div>\n".concat(t?"<div class='instant-alerts-confirmation-info__subtext'>Unblock notifications to receive them on this device.</div>":"",'\n<div class=\'instant-alerts-confirmation__buttons\'>\n\t<button\n\t\t\tclass="o-buttons o-buttons--secondary instant-alerts-confirmation__button js-instant-alerts-confirmation-no"\n\t\t\tdata-trackable="decline-instant-alerts"\n\t\t\ttype="submit"\n\t\t\taria-label="Not now"\n\t\t\ttitle="Not now">\n\t\tNot now\n\t</button><button\n\t\t\tclass="o-buttons o-buttons--primary instant-alerts-confirmation__button js-instant-alerts-confirmation-yes"\n\t\t\tdata-trackable="accept-instant-alerts"\n\t\t\ttype="submit"\n\t\t\taria-label="Yes"\n\t\t\ttitle="Yes">\n\t\tYes\n\t</button>\n\t</div>\n</div>\n')};t.exports=function(t){var e=r.getOverlays()["instant-alerts-confirmation"];e&&e.destroy();var n=new r("instant-alerts-confirmation",{heading:{title:'You have added this topic to <abbr title="myFT" class="myft-ui__icon"></abbr>',shaded:!1},modal:!0,html:a(t)});return n.open(),n}}}]);
//# sourceMappingURL=n-myft-ui.506bd9890081.bundle.js.map