var paGlobal=paGlobal||{pageId:Math.round(Math.max(Math.random()*1000000000))+1000000000,pls:{},plData:{},IIntsRun:[],cData:{},data:{},startInject:function(pli){if(paGlobal.plData[pli]){paGlobal.log.warn('called inject twice for pl: '+pli+', ignoring second call');return};paGlobal.plData[pli]={aou:0,uwff:0,ouf:!1};if(paGlobal.pls[pli].to.ip=='mouseleave'){paGlobal.pls[pli].to.ip='event';paGlobal.pls[pli].to.evt='mouseleave'};switch(paGlobal.pls[pli].to.ip){case 'event':var target=document;switch(paGlobal.pls[pli].to.evtTgt){case 'window':target=window;break};target.addEventListener(paGlobal.pls[pli].to.evt,function(){paGlobal.callCreateContainer(pli)});break;default:paGlobal.callCreateContainer(pli)}},callCreateContainer:function(pli){if(!paGlobal.plData[pli].called){if(!paGlobal.pls[pli].rl.s.r||(paGlobal.pls[pli].rl.s.r&&!paGlobal.select(paGlobal.pls[pli].rl.s.r))){setTimeout(function(){paGlobal.plData[pli].called=!0;paGlobal.log.info('pl '+pli+', type: '+paGlobal.pls[pli].t+', starting flow');if(paGlobal.pls[pli].rl.s.i&&!paGlobal.plData[pli].iOnSelector){paGlobal.iOnSelector(pli)}else{paGlobal.createContainer(pli)}},paGlobal.pls[pli].to.in||0)}}},log:{info:function(text){if(paGlobal.debug){console.log('%cPA INFO:','background:blue;color:white;font-weight:bold;',text)}},warn:function(text){if(paGlobal.debug){console.warn('%cPA WARN:','background:orange;color:white;font-weight:bold;',text)}},err:function(text){if(paGlobal.debug){console.error('%cPA ERR:','background:red;color:white;font-weight:bold;',text)}}},getScroll:function(){return window.scrollY||document.body.scrollTop},getScreenDimensions:function(){return{w:document.documentElement.offsetWidth||window.innerWidth||screen.availWidth,h:window.innerHeight||screen.availHeight}},select:function(s){return document.querySelector(s)},selectAll:function(s){return document.querySelectorAll(s)},selectRect:function(s){if(typeof s=='string'){return document.querySelector(s).getBoundingClientRect()}else if(typeof s=='object'){return s.getBoundingClientRect()}else{paGlobal.err('selectRect was called with an unknown parameter');return!1}},checkForSelectors:function(sl){for(let s of sl){if(s){if(!paGlobal.select(s)){return!1}}};return!0},iOnSelector:function(pli){paGlobal.log.info(pli+' delayed, (waiting for selector)');paGlobal.plData[pli].iOnSelector={injected:!1,s:paGlobal.pls[pli].rl.s.i,ir:!0};paGlobal.IIntsRun.push(pli);paGlobal.plData[pli].iOnSelector.interval=setInterval(function(){if(paGlobal.checkForSelectors([paGlobal.plData[pli].iOnSelector.s])){paGlobal.log.info(pli+' found selector, injecting now');clearInterval(paGlobal.plData[pli].iOnSelector.interval);paGlobal.plData[pli].ir=!1;paGlobal.plData[pli].injected=!0;paGlobal.IIntsRun.splice(paGlobal.IIntsRun.indexOf(pli),1);paGlobal.createContainer(pli)}},500)},rOnSelector:function(pli,ci,ui){if(paGlobal.plData[pli].rOnSelector){return};paGlobal.plData[pli].rOnSelector={removed:!1,s:paGlobal.pls[pli].rl.s.r,ir:!0};paGlobal.plData[pli].rOnSelector.interval=setInterval(function(){if(paGlobal.checkForSelectors([paGlobal.plData[pli].rOnSelector.s])){paGlobal.log.info(pli+' remove selector found, removing now');clearInterval(paGlobal.plData[pli].rOnSelector.interval);paGlobal.plData[pli].rOnSelector.ir=!1;paGlobal.pls[pli].st.cbp.cau=!0;paGlobal.remove(pli,ci,ui,'outer');paGlobal.plData[pli].rOnSelector.removed=!0}},150)},createContainer:function(pli){var selectorToCheck=[];switch(paGlobal.pls[pli].t){case 'adhesion':selectorToCheck.push(paGlobal.pls[pli].ap.cp.head,paGlobal.pls[pli].ap.cp.foot);break;case 'multiInsert':selectorToCheck.push(paGlobal.pls[pli].mp.cp.s);break;case 'rail':selectorToCheck.push(paGlobal.pls[pli].rp.cp.s,paGlobal.pls[pli].rp.cp.foot);break;case 'video':selectorToCheck.push(paGlobal.pls[pli].vidp.s);break};if(!paGlobal.checkForSelectors(selectorToCheck)){paGlobal.log.info(pli+' skipped due to not finding one of the pl selectors');return};var ci=Object.keys(paGlobal.cData).length;paGlobal.cData[ci]={u:0,opened:!1,closed:!1};paGlobal.cData[ci].div=document.createElement('div');paGlobal.cData[ci].div.classList.add('pa-global-class','pa-pl-'+pli,'pa-pl-'+paGlobal.pls[pli].t);paGlobal.cData[ci].div.id='pa-container-'+ci;var unitParams={};switch(paGlobal.pls[pli].t){case 'adhesion':var side=paGlobal.pls[pli].ap.cp.s;if(side=='both'){if(paGlobal.plData[pli].aou<1){side='left'}else{side='right'}};paGlobal.cData[ci].adhesionSide=side;unitParams={side:side};break;case 'multiInsert':if(!paGlobal.plData[pli].mip){var params={siblings:{node:[],index:[]},tracker:{injected:0}};if(!paGlobal.plData[pli].infiniteListenAdded){for(let i=paGlobal.pls[pli].mp.cp.fn-1;i<=document.querySelectorAll(paGlobal.pls[pli].mp.cp.s).length;i+=paGlobal.pls[pli].mp.cp.ce){var node=document.querySelectorAll(paGlobal.pls[pli].mp.cp.s)[i];if(node){params.siblings.node.push(node);params.siblings.index.push(i)};if(!paGlobal.pls[pli].mp.cp.ce||(paGlobal.pls[pli].mp.cp.ce&&paGlobal.pls[pli].mp.cp.mc!=1&&params.siblings.index.length>=paGlobal.pls[pli].mp.cp.mc)){break}}};paGlobal.plData[pli].mip=params};break;case 'video':break};paGlobal.cData[ci].div.style=paGlobal.getStyles(pli,unitParams);switch(paGlobal.pls[pli].t){case 'adhesion':case 'stickyBottom':case 'stickyTop':case 'interstitial':case 'rail':try{document.querySelector('body').appendChild(paGlobal.cData[ci].div)}catch(e){return};break;case 'multiInsert':try{if(paGlobal.pls[pli].mp.cp.tbl){var tr=document.createElement('tr');var td=document.createElement('td');td.setAttribute('colspan',paGlobal.select(paGlobal.pls[pli].mp.cp.s).cells.length);tr.appendChild(td);tr.className='pa-tbl-tr';paGlobal.selectAll(paGlobal.pls[pli].mp.cp.s)[paGlobal.plData[pli].mip.siblings.index[paGlobal.plData[pli].mip.tracker.injected]][paGlobal.pls[pli].mp.cp.im](tr);td.appendChild(paGlobal.cData[ci].div)}else{paGlobal.selectAll(paGlobal.pls[pli].mp.cp.s)[paGlobal.plData[pli].mip.siblings.index[paGlobal.plData[pli].mip.tracker.injected]][paGlobal.pls[pli].mp.cp.im](paGlobal.cData[ci].div)};paGlobal.plData[pli].mip.tracker.injected++;paGlobal.log.info('pl '+pli+' multi insert units: '+paGlobal.plData[pli].mip.tracker.injected)}catch(e){paGlobal.log.err('unit '+ci+' (pl '+pli+") failed, (couldn't add unit)  \n"+e);return};break;case 'video':if(paGlobal.pls[pli].vidp.t=='inContent'){paGlobal.select(paGlobal.pls[pli].vidp.s)[paGlobal.pls[pli].vidp.im](paGlobal.cData[ci].div)}else{paGlobal.select('body').appendChild(paGlobal.cData[ci].div)};break};paGlobal.plData[pli].aou++;paGlobal.log.info('container '+ci+' (pl '+pli+') created');switch(paGlobal.pls[pli].t){case 'adhesion':var wfto=!1;paGlobal.cData[ci].reCalculate=function(){if(!wfto){setTimeout(function(){var offsetTop=paGlobal.getOneStyle.adhesion.top(paGlobal.pls[pli].ap.cp.oh,paGlobal.pls[pli].ap.cp.head);var side=unitParams.side;var offsetSide=paGlobal.getOneStyle.adhesion.sideOffset(paGlobal.pls[pli].ap.cp,unitParams);var adhesionWidth=paGlobal.getOneStyle.adhesion.width(paGlobal.pls[pli].ap.cp,unitParams);var adhesionHeight=paGlobal.getOneStyle.adhesion.height(paGlobal.pls[pli].ap.cp,offsetTop);paGlobal.cData[ci].div.style.top=offsetTop+'px';paGlobal.cData[ci].div.style[side]=offsetSide+'px';paGlobal.cData[ci].div.style.width=adhesionWidth+'px';paGlobal.cData[ci].div.style.height=adhesionHeight+'px';wfto=!1},50);wfto=!0}};document.addEventListener('scroll',paGlobal.cData[ci].reCalculate);window.addEventListener('resize',paGlobal.cData[ci].reCalculate);break;case 'rail':var wfto=!1;paGlobal.cData[ci].reCalculate=function(){if(!wfto){setTimeout(function(){var offsetTop=paGlobal.getOneStyle.rail.top(pli);var railWidth=paGlobal.getOneStyle.rail.width(pli);var railHeight=paGlobal.getOneStyle.rail.height(pli,offsetTop);var railLeft=paGlobal.selectRect(paGlobal.pls[pli].rp.cp.s).left-paGlobal.pls[pli].rp.cp.or+paGlobal.pls[pli].rp.cp.ol;paGlobal.cData[ci].div.style.top=offsetTop+'px';paGlobal.cData[ci].div.style.left=railLeft+'px';paGlobal.cData[ci].div.style.width=railWidth+'px';paGlobal.cData[ci].div.style.height=railHeight+'px';wfto=!1},150);wfto=!0}};document.addEventListener('scroll',paGlobal.cData[ci].reCalculate);window.addEventListener('resize',paGlobal.cData[ci].reCalculate);break};var ui=paGlobal.createInner(pli,ci);switch(paGlobal.pls[pli].t){case 'adhesion':if(paGlobal.pls[pli].ap.cp.nfpb&&paGlobal.plData[pli].aou<2){if(paGlobal.cData[ci].div.offsetWidth+2<paGlobal.pls[pli].st.s[0]||!paGlobal.listen.inViewVertical(pli,ci,ui,!0)){if((paGlobal.pls[pli].ap.cp.cts.sq||paGlobal.pls[pli].ap.cp.cts.m)&&(!paGlobal.pls[pli].ap.cp.cts.saw||(paGlobal.pls[pli].ap.cp.cts.saw&&paGlobal.getScreenDimensions().w>=paGlobal.pls[pli].ap.cp.cts.saw))){}else{paGlobal.log.info(pli+' no fit passback activated (pl '+paGlobal.pls[pli].ap.cp.nfpb+')');paGlobal.remove(pli,ci,ci,'outer');if(paGlobal.pls[paGlobal.pls[pli].ap.cp.nfpb]&&paGlobal.pls[paGlobal.pls[pli].ap.cp.nfpb].s=='pb'){paGlobal.startInject(paGlobal.pls[pli].ap.cp.nfpb);return}else{paGlobal.log.warn("couldn't find placement "+paGlobal.pls[pli].ap.cp.nfpb+', passback (no fit) canceled')}}}};if(paGlobal.pls[pli].ap.cp.s=='both'&&paGlobal.plData[pli].aou<2){paGlobal.createContainer(pli)};break;case 'multiInsert':if(paGlobal.plData[pli].mip.tracker.injected<paGlobal.plData[pli].mip.siblings.index.length){paGlobal.createContainer(pli)};var wfto=!1;paGlobal.plData[pli].infiniteListen=function(){if(!wfto){setTimeout(function(){for(let i=paGlobal.plData[pli].mip.siblings.index[paGlobal.plData[pli].mip.siblings.index.length-1]+paGlobal.pls[pli].mp.cp.ce;i<paGlobal.selectAll(paGlobal.pls[pli].mp.cp.s).length;i+=paGlobal.pls[pli].mp.cp.ce){var node=paGlobal.selectAll(paGlobal.pls[pli].mp.cp.s)[i];paGlobal.plData[pli].mip.siblings.node.push(node);paGlobal.plData[pli].mip.siblings.index.push(i);if(!paGlobal.pls[pli].mp.cp.ce||(paGlobal.pls[pli].mp.cp.ce&&paGlobal.pls[pli].mp.cp.mc!=1&&params.siblings.index.length>=paGlobal.pls[pli].mp.cp.mc)){break}};wfto=!1},150);wfto=!0};if(paGlobal.plData[pli].mip.tracker.injected<paGlobal.plData[pli].mip.siblings.index.length){paGlobal.createContainer(pli)}};if(paGlobal.pls[pli].mp.cp.il&&!paGlobal.plData[pli].infiniteListenAdded){paGlobal.plData[pli].infiniteListenAdded=!0;document.addEventListener('scroll',paGlobal.plData[pli].infiniteListen)};break}},fakeScroll:new Event('scroll'),squeezeContent:function(pli,ci,ui){if(paGlobal.plData[pli].sqc){return};if(!paGlobal.pls[pli].ap.cp.cts.s){return paGlobal.log.warn('unit '+ui+' (pl '+pli+') called squeeze content without selector')};paGlobal.plData[pli].sqcStarted=!0;if(paGlobal.pls[pli].ap.cp.cts.mgin){paGlobal.log.info('unit '+ui+'(pl '+pli+') adding margin to content for squeeze');paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style.margin=paGlobal.pls[pli].ap.cp.cts.mgin};paGlobal.plData[pli].sqc={cv:!1,squeezeNow:function(){var screenWidth=paGlobal.getScreenDimensions().w;if(!paGlobal.pls[pli].ap.cp.cts.saw||(paGlobal.pls[pli].ap.cp.cts.saw&&screenWidth>=paGlobal.pls[pli].ap.cp.cts.saw)){var requiredWidth=paGlobal.pls[pli].ap.cp.lp.oep+paGlobal.pls[pli].ap.cp.lp.oec+paGlobal.pls[pli].ap.cp.rp.oep+paGlobal.pls[pli].ap.cp.rp.oec+paGlobal.percentToPx(paGlobal.getWiderAdhesion(pli),paGlobal.pls[pli].vp.p.w)*2;if(paGlobal.pls[pli].ap.cp.cts.sacw&&screenWidth-requiredWidth<paGlobal.pls[pli].ap.cp.cts.sacw&&paGlobal.plData[pli].sqc.ranOnce){paGlobal.plData[pli].sqc.cv=!0;paGlobal.plData[pli].sqc.reset();return};paGlobal.plData[pli].sqc.cv=!1;var contentWidth=paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).offsetWidth;var setTo=screenWidth-requiredWidth;if(paGlobal.pls[pli].ap.cp.cts.sacw&&setTo<paGlobal.pls[pli].ap.cp.cts.sacw){setTo=paGlobal.pls[pli].ap.cp.cts.sacw};paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style.maxWidth=setTo+'px';document.dispatchEvent(paGlobal.fakeScroll);paGlobal.plData[pli].sqc.ranOnce=!0}else{paGlobal.plData[pli].sqc.reset()}},reset:function(){paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style.maxWidth=paGlobal.plData[pli].sqc.oldWidthStyle||''}};paGlobal.plData[pli].sqc.oldWidthStyle=getComputedStyle(paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s)).maxWidth;paGlobal.plData[pli].sqc.oldOffsetWidth=paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).offsetWidth;paGlobal.plData[pli].sqc.squeezeNow();wfto=!1;paGlobal.plData[pli].sqc.addListenerWait=function(){if(wfto){return};setTimeout(function(){paGlobal.plData[pli].sqc.squeezeNow()},50)};window.addEventListener('resize',paGlobal.plData[pli].sqc.addListenerWait)},moveContent:function(pli,ci,ui){function marginIsAuto(){return parseFloat(getComputedStyle(paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s)).marginLeft)==((parseFloat(getComputedStyle(paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s)).marginRight)>=0&&parseFloat(getComputedStyle(paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s)).marginRight))||0)};paGlobal.plData[pli].mvc={side:paGlobal.pls[pli].ap.cp.s,marginIsAuto:marginIsAuto(),requiredSide:paGlobal.pls[pli].ap.cp.lp.oep+paGlobal.pls[pli].ap.cp.lp.oec+paGlobal.data[ui].demand.s[0],autoFunctions:{move:function(){paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style['margin-'+paGlobal.plData[pli].mvc.side]=paGlobal.plData[pli].mvc.requiredSide+'px';paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style[paGlobal.plData[pli].mvc.side]=paGlobal.plData[pli].mvc.requiredSide+'px';document.dispatchEvent(paGlobal.fakeScroll)},reset:function(){paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style['margin-'+paGlobal.plData[pli].mvc.side]='auto';paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style[paGlobal.plData[pli].mvc.side]='auto'}},getOffsetSide:function(){if(paGlobal.pls[pli].ap.cp.s=='left'){return paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).offsetLeft}else{return paGlobal.getScreenDimensions().w-(paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).offsetLeft+paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).offsetWidth)}},notAutoFunctions:{move:function(){paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style['margin-'+paGlobal.plData[pli].mvc.side]=paGlobal.plData[pli].mvc.requiredSide+'px';paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style[paGlobal.plData[pli].mvc.side]=paGlobal.plData[pli].mvc.requiredSide+'px';document.dispatchEvent(paGlobal.fakeScroll)},reset:function(){paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style['margin-'+paGlobal.plData[pli].mvc.side]=paGlobal.plData[pli].mvc.oldMarginSide||'auto';paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).style[paGlobal.plData[pli].mvc.side]=paGlobal.plData[pli].mvc.oldSide||''},checkNow:function(){if(paGlobal.plData[pli].mvc.getOffsetSide()<paGlobal.plData[pli].mvc.requiredSide){paGlobal.plData[pli].mvc.notAutoFunctions.move();document.dispatchEvent(paGlobal.fakeScroll)}},checkWhenDone:function(){if(wfto){return};wfto=!0;var currentWidth=paGlobal.getScreenDimensions().w;function checkResize(){function checkNow(){if(currentWidth==paGlobal.getScreenDimensions().w){wfto=!1;paGlobal.plData[pli].mvc.notAutoFunctions.checkNow()}else{currentWidth=paGlobal.getScreenDimensions().w;setTimeout(function(){checkNow()},250)}};setTimeout(function(){checkNow()},250)};checkResize()}}};paGlobal.plData[pli].mvc.autoFunction=function(){var requiredWidth=paGlobal.select(paGlobal.pls[pli].ap.cp.cts.s).offsetWidth+paGlobal.plData[pli].mvc.requiredSide*2;if(paGlobal.getScreenDimensions().w<requiredWidth){paGlobal.plData[pli].mvc.autoFunctions.move()}else{paGlobal.plData[pli].mvc.autoFunctions.reset()}};if(paGlobal.plData[pli].mvc.marginIsAuto){paGlobal.plData[pli].mvc.autoFunction();window.addEventListener('resize',paGlobal.plData[pli].mvc.autoFunction)}else{paGlobal.plData[pli].mvc.oldMarginSide=getComputedStyle(document.querySelector(paGlobal.pls[pli].ap.cp.cts.s))['margin-'+paGlobal.plData[pli].mvc.side];paGlobal.plData[pli].mvc.oldLeft=getComputedStyle(document.querySelector(paGlobal.pls[pli].ap.cp.cts.s))[paGlobal.plData[pli].mvc.side];var wfto=!1;paGlobal.plData[pli].mvc.notAutoFunctions.checkNow();window.addEventListener('resize',paGlobal.plData[pli].mvc.notAutoFunctions.checkWhenDone)}},createInner:function(pli,ci){var ui=Object.keys(paGlobal.data).length;paGlobal.data[ui]={opened:!1,closed:!1,fv:!1,demand:{cb:'',s:[paGlobal.pls[pli].st.s[0],paGlobal.pls[pli].st.s[1]],tn:0,skipIndex:{}},refresh:{started:!1,running:!1},listenFired:!1,googleImp:function(info){if(!paGlobal.data[ui].listenFired){paGlobal.data[ui].listenFired=!0;if(info.isEmpty==!1){top.paGlobal.data[ui].impListener(!0)}else{top.paGlobal.data[ui].impListener(!1)}}},hbFunctions:{changeHeight:function(){function editHeights(){paGlobal.cData[ci].div.style.width='100%';paGlobal.cData[ci].div.style.maxWidth='100%';paGlobal.cData[ci].div.style.height='auto';paGlobal.data[ui].div.style.width='100%';paGlobal.data[ui].div.style.height='auto';try{var height;if(paGlobal.data[ui].frame.contentDocument.querySelector('iframe')){height=paGlobal.data[ui].frame.contentDocument.querySelector('iframe').contentDocument.querySelector('html').offsetHeight+'px'}else{height=paGlobal.data[ui].frame.contentDocument.querySelector('html').offsetHeight+'px'};paGlobal.data[ui].frame.style.height=height;paGlobal.data[ui].frame.contentDocument.querySelector('iframe').style.height='100%';paGlobal.data[ui].frame.contentDocument.querySelector('iframe').style.width='100%'}catch(e){console.error('apAds_line failed!!')};try{delete paGlobal.listen.lvPls[ui]}catch(e){}};var intervalRun=setInterval(function(){editHeights()},100);setTimeout(function(){clearInterval(intervalRun)},1500)},removeAd:function(){if(paGlobal.pls[pli].t=='adhesion'){paGlobal.pls[pli].st.cbp.cau=!0};paGlobal.remove(pli,ci,ui,'outer')},stopRefresh:function(){paGlobal.refresh.stop(pli,ci,ui)},hideAd:function(){setTimeout(function(){console.log('hideAd called');if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t!='adhesion'){paGlobal.data[ui].div.style.height=0};paGlobal.cData[ci].div.style.opacity=0;paGlobal.data[ui].hbHide=!0},50)},newDiv:function(code){for(let i of paGlobal.selectAll('#pa-container-'+ci+' .pa-unit-global.pa-pl-'+pli)){var ui=i.id.split('-')[i.id.split('-').length-1];try{paGlobal.data[ui].div.style.display='none'}catch(e){};if(paGlobal.data[ui].refresh.running){paGlobal.refresh.stop(pli,ci,ui)}};var newDiv=document.createElement('div');newDiv.id=code;try{paGlobal.cData[ci].div.appendChild(newDiv);paGlobal.cData[ci].div.style.height='auto';paGlobal.cData[ci].div.style.width='auto';paGlobal.cData[ci].div.style.padding='';paGlobal.cData[ci].div.style['max-width']='100%';paGlobal.cData[ci].div.style['max-height']='100%'}catch(e){}}},impListener:function(imp){if(imp){if(paGlobal.bl&&!paGlobal.checkBl(paGlobal.data[ui].frame)){paGlobal.log.info('unit '+ui+' (pl '+pli+') fill blocked due to blacklist');return paGlobal.data[ui].impListener(!1)};paGlobal.log.info('unit '+ui+' (pl '+pli+') impression from: '+paGlobal.data[ui].demand.cb);paGlobal.plData[pli].ouf=!0;paGlobal.plData[pli].uwff--;paGlobal.data[ui].hbHide=!1;paGlobal.data[ui].opened=!0;if(paGlobal.pls[pli].d.type=='live'&&!paGlobal.data[ui].demand.cad&&paGlobal.pls[pli].d.live[paGlobal.data[ui].demand.tn].skipRefresh){paGlobal.data[ui].demand.skipIndex[paGlobal.data[ui].demand.tn]=!0};if(paGlobal.pls[pli].st.cb){paGlobal.addClsBtn(pli,ci,ui)};if(paGlobal.data[ui].op){paGlobal.data[ui].div.removeEventListener('mouseover',paGlobal.data[ui].op.of);paGlobal.cData[ci].div.removeEventListener('mouseleave',paGlobal.data[ui].op.op)};if(paGlobal.pls[pli].t=='adhesion'){if(paGlobal.pls[pli].ap.cp.cts.m&&paGlobal.pls[pli].ap.cp.s!='both'){if(!paGlobal.pls[pli].ap.cp.cts.s){paGlobal.pls[pli].ap.cp.cts.s=paGlobal.pls[pli].ap.cp.cs};paGlobal.moveContent(pli,ci,ui)};if(paGlobal.pls[pli].ap.cp.cts.sq){if(!paGlobal.pls[pli].ap.cp.cts.s){paGlobal.pls[pli].ap.cp.cts.s=paGlobal.pls[pli].ap.cp.cs};paGlobal.squeezeContent(pli,ci,ui);var fakeResize=new Event('resize');window.dispatchEvent(fakeResize)};if(paGlobal.pls[pli].ap.cp.mvtc.on){var side=paGlobal.cData[ci].adhesionSide;if(paGlobal.data[ui].demand.s[0]==paGlobal.pls[pli].ap.cp.mvtc.ios[0]&&paGlobal.data[ui].demand.s[1]==paGlobal.pls[pli].ap.cp.mvtc.ios[1]){paGlobal.log.info('unit '+ui+' (pl '+pli+') Initiating move to corner');paGlobal.data[ui].mvtcTop=paGlobal.data[ui].div.style.removeProperty('top')||paGlobal.data[ui].div.style.top;paGlobal.data[ui].div.style.position='fixed';paGlobal.data[ui].div.style[side]=paGlobal.pls[pli].ap.cp.mvtc.os.a+paGlobal.pls[pli].ap.cp.mvtc.os.t;paGlobal.data[ui].div.style.bottom=paGlobal.pls[pli].ap.cp.mvtc.ob.a+paGlobal.pls[pli].ap.cp.mvtc.ob.t}else if(paGlobal.data[ui].mvtcTop){paGlobal.data[ui].div.style[side]=null;paGlobal.data[ui].div.style.removeProperty(side);paGlobal.data[ui].div.style.bottom=null;paGlobal.data[ui].div.style.removeProperty('bottom');paGlobal.data[ui].div.style.top=paGlobal.data[ui].mvtcTop;paGlobal.data[ui].div.style.setProperty('position','sticky');paGlobal.data[ui].div.style.setProperty('position','-webkit-sticky')}}};paGlobal.data[ui].demand.cs=paGlobal.data[ui].demand.s;if(paGlobal.pls[pli].vp.op.on){if(paGlobal.pls[pli].vp.op.aos){if(paGlobal.data[ui].demand.s[0]>=paGlobal.pls[pli].vp.op.aosp[0]&&paGlobal.data[ui].demand.s[1]>=paGlobal.pls[pli].vp.op.aosp[1]){paGlobal.openPart(pli,ci,ui)}else{paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px';paGlobal.data[ui].div.style.height=paGlobal.data[ui].demand.s[1]+'px'}}else{paGlobal.openPart(pli,ci,ui)}}else if(paGlobal.pls[pli].t=='multiInsert'&&paGlobal.pls[pli].mp.cp.sb){if(!paGlobal.pls[pli].mp.cp.sbp.aos||(paGlobal.pls[pli].mp.cp.sbp.aos&&paGlobal.data[ui].demand.s[1]>=paGlobal.pls[pli].mp.cp.sbp.aos)){paGlobal.smallerBox(pli,ci,ui)}else{if(paGlobal.pls[pli].t=='multiInsert'&&paGlobal.pls[pli].mp.cp.sb){paGlobal.cleanSmallerBox(pli,ci,ui)};paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px';paGlobal.data[ui].div.style.height=paGlobal.data[ui].demand.s[1]+'px'}}else{paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px';paGlobal.data[ui].div.style.height=paGlobal.data[ui].demand.s[1]+'px'};paGlobal.cData[ci].div.style.opacity=1;if(!paGlobal.data[ui].fi){paGlobal.data[ui].fi=!0;if(paGlobal.pls[pli].to.rem){setTimeout(function(){paGlobal.remove(pli,ci,ui,'outer')},paGlobal.pls[pli].to.rem)}};try{paGlobal.data[ui].div.querySelector('iframe.current-frame').remove()}catch(e){};paGlobal.data[ui].frame.className='current-frame';paGlobal.data[ui].frame.style.display='block';if(paGlobal.pls[pli].t=='adhesion'){if(paGlobal.cData[ci].adhesionSide&&paGlobal.cData[ci].adhesionSide=='left'){try{var frameDoc=paGlobal.data[ui].frame.contentDocument;frameDoc.querySelector('img').style.position='absolute';frameDoc.querySelector('img').style.right=0}catch(e){try{frameDoc.querySelector('iframe').style.position='absolute';frameDoc.querySelector('iframe').style.right=0}catch(e){try{frameDoc.querySelector('div').style.position='absolute';frameDoc.querySelector('div').style.right=0}catch(e){}};try{frameDoc.querySelector('iframe').contentDocument.querySelector('html').style.position='absolute';frameDoc.querySelector('iframe').contentDocument.querySelector('html').style.right=0}catch(e){}}}};if(paGlobal.pls[pli].to.r&&!paGlobal.data[ui].demand.cad){paGlobal.refresh.start(pli,ci,ui,paGlobal.pls[pli].to.r)};switch(paGlobal.pls[pli].t){case 'interstitial':paGlobal.cData[ci].div.style.height='100%';break;case 'multiInsert':if(paGlobal.pls[pli].mp.cp.fold&&paGlobal.pls[pli].d.type=='direct'){if(!paGlobal.data[ui].foldCalled){paGlobal.data[ui].foldCalled=!0;paGlobal.foldingAd(pli,ui)}};if(paGlobal.pls[pli].mp.cp.st.p){paGlobal.cData[ci].div.style.padding=paGlobal.pls[pli].mp.cp.st.p};if(paGlobal.pls[pli].mp.cp.st.b){paGlobal.cData[ci].div.style.border=paGlobal.pls[pli].mp.cp.st.b};if(paGlobal.pls[pli].mp.cp.st.br.a){paGlobal.cData[ci].div.style['border-radius']=paGlobal.pls[pli].mp.cp.st.br.a+paGlobal.pls[pli].mp.cp.st.br.t};break;case 'adhesion':break;case 'stickyBottom':if(!paGlobal.data[ui].fha&&paGlobal.pls[pli].sbp.cp.afh&&paGlobal.select(paGlobal.pls[pli].sbp.cp.afh)){paGlobal.data[ui].fha=!0;paGlobal.select(paGlobal.pls[pli].sbp.cp.afh).style.height=paGlobal.select(paGlobal.pls[pli].sbp.cp.afh).offsetHeight+(paGlobal.data[ui].demand.cs[1]+paGlobal.pls[pli].sbp.cp.afha)+'px'};if(paGlobal.pls[pli].sbp.cp.pd){paGlobal.cData[ci].div.style.paddingTop=paGlobal.pls[pli].sbp.cp.pd+'px'};break;case 'stickyTop':if(paGlobal.pls[pli].stp.cp.pd){paGlobal.cData[ci].div.style.paddingBottom=paGlobal.pls[pli].stp.cp.pd+'px'};break};if(paGlobal.data[ui].demand.cad){paGlobal.data[ui].demand.cad=!1}}else{paGlobal.log.info('unit '+ui+' (pl '+pli+') no impression from: '+paGlobal.data[ui].demand.cb);if(paGlobal.pls[pli].d.type=='live'&&!paGlobal.data[ui].demand.cad&&paGlobal.pls[pli].d.live[paGlobal.data[ui].demand.tn].skipRefresh&&!paGlobal.pls[pli].d.live[paGlobal.data[ui].demand.tn].skipRefreshImpOnly){paGlobal.data[ui].demand.skipIndex[paGlobal.data[ui].demand.tn]=!0};paGlobal.data[ui].demand.tn++;if(paGlobal.pls[pli].d.type=='live'&&!paGlobal.data[ui].demand.cad&&paGlobal.data[ui].demand.tn<paGlobal.pls[pli].d.live.length){paGlobal.writeDoc(pli,ci,ui)}else{paGlobal.log.info('unit '+ui+' (pl '+pli+') end of stack with no fill');paGlobal.plData[pli].uwff--;paGlobal.data[ui].frame.remove();if(paGlobal.pls[pli].d.eospb&&!paGlobal.plData[pli].ouf&&!paGlobal.pls[pli].d.deos){if(!paGlobal.plData[pli].uwff){paGlobal.log.info(pli+' no impression passback activated');paGlobal.pls[pli].st.cbp.cau=!0;paGlobal.remove(pli,ci,ui,'outer');if(paGlobal.pls[paGlobal.pls[pli].d.eospb]&&paGlobal.pls[paGlobal.pls[pli].d.eospb].s=='pb'){paGlobal.log.info(pli+' all units removed, no impression passback calling '+paGlobal.pls[pli].d.eospb);paGlobal.startInject(paGlobal.pls[pli].d.eospb)}else{paGlobal.log.warn("couldn't find placement "+paGlobal.pls[pli].d.eospb+', passback canceled')}};return};if(paGlobal.pls[pli].d.deos){paGlobal.data[ui].demand.cad=!0;paGlobal.log.info('unit: '+ui+'(pl '+pli+') running direct at end of stack');paGlobal.writeDoc(pli,ci,ui)};if(paGlobal.pls[pli].to.nir){paGlobal.refresh.start(pli,ci,ui,paGlobal.pls[pli].to.nir)}else if(!paGlobal.pls[pli].to.roio&&paGlobal.pls[pli].to.r){paGlobal.refresh.start(pli,ci,ui,paGlobal.pls[pli].to.r)}}}}};paGlobal.data[ui].div=document.createElement('div');paGlobal.data[ui].div.classList.add('pa-unit-global','pa-pl-'+pli);paGlobal.data[ui].div.id='pa-unit-'+ui;paGlobal.data[ui].div.style=paGlobal.getInnerStyles(pli,ci,ui);paGlobal.cData[ci].div.appendChild(paGlobal.data[ui].div);switch(paGlobal.pls[pli].t){case 'adhesion':if(paGlobal.pls[pli].ap.cp.sa.t){setTimeout(function(){var offsetTop=paGlobal.data[ui].div.offsetTop;paGlobal.data[ui].div.style.position='relative';paGlobal.data[ui].div.style.top=offsetTop+'px';paGlobal.pls[pli].ap.cp.sa.px=offsetTop+paGlobal.data[ui].div.offsetHeight},paGlobal.pls[pli].ap.cp.sa.t)};break;case 'stickyBottom':var wfto=!1;paGlobal.data[ui].reCalculate=function(){if(!wfto){setTimeout(function(){paGlobal.data[ui].div.style['margin-left']=paGlobal.selectRect(paGlobal.pls[pli].sbp.ip.ctn).left+paGlobal.selectRect(paGlobal.pls[pli].sbp.ip.ctn).width/2-paGlobal.pls[pli].st.s[0]/2+'px';wfto=!1},150);wfto=!0}};if(paGlobal.pls[pli].sbp.ip.ctn&&paGlobal.select(paGlobal.pls[pli].sbp.ip.ctn)){window.addEventListener('resize',paGlobal.data[ui].reCalculate)};if(paGlobal.pls[pli].sbp.cp.on){var wfto2=!1;paGlobal.data[ui].reCalculateOffset=function(){if(!wfto2){setTimeout(function(){if(paGlobal.select(paGlobal.pls[pli].sbp.cp.on)&&parseInt(paGlobal.selectRect(paGlobal.pls[pli].sbp.cp.on).bottom/10,10)*10==parseInt(paGlobal.getScreenDimensions().h/10,10)*10){paGlobal.cData[ci].div.style.bottom=paGlobal.selectRect(paGlobal.pls[pli].sbp.cp.on).height+'px'}else{paGlobal.cData[ci].div.style.bottom=paGlobal.pls[pli].sbp.cp.oh+'px'};wfto2=!1},75);wfto2=!0}};document.addEventListener('scroll',paGlobal.data[ui].reCalculateOffset)};break;case 'stickyTop':var wfto=!1;paGlobal.data[ui].reCalculate=function(){if(!wfto){setTimeout(function(){paGlobal.data[ui].div.style['margin-left']=paGlobal.selectRect(paGlobal.pls[pli].stp.ip.ctn).left+paGlobal.selectRect(paGlobal.pls[pli].stp.ip.ctn).width/2-paGlobal.pls[pli].st.s[0]/2+'px';wfto=!1},150);wfto=!0}};if(paGlobal.pls[pli].stp.ip.ctn&&paGlobal.select(paGlobal.pls[pli].stp.ip.ctn)){window.addEventListener('resize',paGlobal.data[ui].reCalculate)};if(paGlobal.pls[pli].stp.cp.on){var wfto2=!1;paGlobal.data[ui].reCalculateOffset=function(){if(!wfto2){setTimeout(function(){if(paGlobal.select(paGlobal.pls[pli].stp.cp.on)&&parseInt(paGlobal.selectRect(paGlobal.pls[pli].stp.cp.on).top/10,10)*10<5&&parseInt(paGlobal.selectRect(paGlobal.pls[pli].stp.cp.on).top/10,10)*10>-5){paGlobal.cData[ci].div.style.top=paGlobal.selectRect(paGlobal.pls[pli].stp.cp.on).height+'px'}else{paGlobal.cData[ci].div.style.top=paGlobal.pls[pli].stp.cp.oh+'px'};wfto2=!1},75);wfto2=!0}};document.addEventListener('scroll',paGlobal.data[ui].reCalculateOffset)};break;case 'rail':var wfto=!1;paGlobal.data[ui].reCalculate=function(){if(!wfto){setTimeout(function(){paGlobal.data[ui].div.style.maxHeight=paGlobal.cData[ci].div.offsetHeight+'px';wfto=!1},1500);wfto=!0}};document.addEventListener('scroll',paGlobal.data[ui].reCalculate);break};paGlobal.log.info('unit '+ui+' (pl '+pli+') inner div created');if(paGlobal.pls[pli].t!='video'||paGlobal.vidFunctions.stats){paGlobal.listen.view(pli,ci,ui)}else{paGlobal.video(pli,ci,ui)};if(paGlobal.pls[pli].rl.s.r){paGlobal.rOnSelector(pli,ci,ui)};paGlobal.cData[ci].u++;if(paGlobal.pls[pli].t=='multiInsert'){if(paGlobal.pls[pli].mp.ip.multi&&paGlobal.cData[ci].u<paGlobal.pls[pli].mp.ip.multi){var totalWidth=0;for(let i=0;i<paGlobal.cData[ci].u;i++){totalWidth+=paGlobal.pls[pli].st.s[0]+5};if(totalWidth+paGlobal.pls[pli].st.s[0]+5<paGlobal.cData[ci].div.offsetWidth){paGlobal.createInner(pli,ci)}}};return ui},addClsBtn:function(pli,ci,ui){if(paGlobal.pls[pli].st.cbp.p.d!='inner'&&paGlobal.cData[ci].clsBtnAdded){return};if(paGlobal.pls[pli].st.cbp.p.d=='inner'&&paGlobal.data[ui].clsBtnAdded){return};paGlobal.cData[ci].clsBtnAdded=!0;paGlobal.data[ui].clsBtnAdded=!0;paGlobal.data[ui].clsBtn=document.createElement('div');paGlobal.data[ui].clsBtn.style='text-align:center;position:'+paGlobal.pls[pli].st.cbp.p.p+';border-radius:'+paGlobal.pls[pli].st.cbp.br+paGlobal.pls[pli].st.cbp.brt+';background:'+paGlobal.pls[pli].st.cbp.bg+';color:'+paGlobal.pls[pli].st.cbp.c+';'+paGlobal.pls[pli].st.cbp.p.os.hp+':'+paGlobal.pls[pli].st.cbp.p.os.ho+paGlobal.pls[pli].st.cbp.p.os.hot+';'+paGlobal.pls[pli].st.cbp.p.os.vp+':'+paGlobal.pls[pli].st.cbp.p.os.vo+paGlobal.pls[pli].st.cbp.p.os.vot+';width:'+paGlobal.pls[pli].st.cbp.s[0].a+paGlobal.pls[pli].st.cbp.s[0].t+';height:'+paGlobal.pls[pli].st.cbp.s[1].a+paGlobal.pls[pli].st.cbp.s[1].t+';font-size:'+paGlobal.pls[pli].st.cbp.fs+'px;'+'font-weight:'+paGlobal.pls[pli].st.cbp.fw+';padding:'+paGlobal.pls[pli].st.cbp.pd+'px;font-family:'+paGlobal.pls[pli].st.cbp.ff+';z-index:'+paGlobal.pls[pli].st.cbp.zi+';cursor:pointer;overflow: hidden;';paGlobal.data[ui].clsBtn.className='cls-btn';var appendToDiv;if(paGlobal.pls[pli].st.cbp.p.d=='inner'){appendToDiv=paGlobal.data[ui].div}else{appendToDiv=paGlobal.cData[ci].div};setTimeout(function(){appendToDiv.appendChild(paGlobal.data[ui].clsBtn);paGlobal.data[ui].activeSafeDiv=function(){if(paGlobal.data[ui].op){paGlobal.data[ui].op.safeActive=!0}};paGlobal.data[ui].deactiveSafeDiv=function(){if(paGlobal.data[ui].op){paGlobal.data[ui].op.safeActive=!1}};if(paGlobal.pls[pli].st.cbp.cbsd.on){appendSafeDiv()};if(paGlobal.pls[pli].vp.op&&paGlobal.pls[pli].vp.op.on){if(paGlobal.data[ui].op){paGlobal.data[ui].op.safeActive=!1};paGlobal.data[ui].clsBtn.addEventListener('mouseover',paGlobal.data[ui].activeSafeDiv);paGlobal.data[ui].clsBtn.addEventListener('mouseleave',paGlobal.data[ui].deactiveSafeDiv)};var lineHeightSet=setInterval(function(){paGlobal.data[ui].clsBtn.style.lineHeight=paGlobal.data[ui].clsBtn.offsetHeight-parseFloat(paGlobal.data[ui].clsBtn.style.padding.split('px')[0])*2+'px'},50);setTimeout(function(){clearTimeout(lineHeightSet)},600);var cbt=document.createElement('div');cbt.style='position: absolute;top: 0;bottom: 0;right: 0;width: 100%;background: rgb(0,0,0,0.5);';paGlobal.data[ui].clsBtn.appendChild(cbt);var cbtNum=document.createElement('span');cbtNum.style='color:'+paGlobal.pls[pli].st.cbp.cdc+';position:absolute;right:0;left:0;top:0;bottom:0;height:100%;width:100%;';paGlobal.data[ui].clsBtn.appendChild(cbtNum);var cltNumber=paGlobal.pls[pli].st.cbp.cd/1000;var cltPercentJumps=100/cltNumber;var cltPercent=100;cbtNum.innerText=cltNumber;var cltInt=setInterval(function(){cltPercent-=cltPercentJumps;cbt.style.width=cltPercent+'%';cltNumber--;cbtNum.innerHTML=cltNumber},1000);setTimeout(function(){paGlobal.data[ui].clsBtn.innerHTML='X';cbtNum.remove();clearInterval(cltInt);cbt.remove();paGlobal.data[ui].clsBtn.onclick=function(){paGlobal.remove(pli,ci,ui)}},paGlobal.pls[pli].st.cbp.cd)},paGlobal.pls[pli].st.cbp.d);function appendSafeDiv(){paGlobal.data[ui].div.style.overflow='visible';paGlobal.cData[ci].div.style.overflow='visible';paGlobal.data[ui].safeDiv=document.createElement('div');paGlobal.data[ui].clsBtn.before(paGlobal.data[ui].safeDiv);paGlobal.data[ui].safeDiv.style='position:absolute;'+paGlobal.pls[pli].st.cbp.cbsd.hp+':'+paGlobal.pls[pli].st.cbp.cbsd.ho+paGlobal.pls[pli].st.cbp.cbsd.hot+';'+paGlobal.pls[pli].st.cbp.cbsd.vp+':'+paGlobal.pls[pli].st.cbp.cbsd.vo+paGlobal.pls[pli].st.cbp.cbsd.vot+';width: '+paGlobal.pls[pli].st.cbp.cbsd.s[0].a+paGlobal.pls[pli].st.cbp.cbsd.s[0].t+';height:'+paGlobal.pls[pli].st.cbp.cbsd.s[1].a+paGlobal.pls[pli].st.cbp.cbsd.s[1].t+';z-index:'+paGlobal.pls[pli].st.cbp.cbsd.zi+';';paGlobal.data[ui].safeDiv.className='cls-btn-safe-div';if(paGlobal.pls[pli].vp.op&&paGlobal.pls[pli].vp.op.on){paGlobal.data[ui].safeDiv.addEventListener('mouseover',paGlobal.data[ui].activeSafeDiv);paGlobal.data[ui].safeDiv.addEventListener('mouseleave',paGlobal.data[ui].deactiveSafeDiv)}}},getLoweredSize:function(os,w,t){if(t=='px'){return w}else{return paGlobal.percentToPx(os,w)}},openPart:function(pli,ci,ui){if(paGlobal.pls[pli].vp.op.a||paGlobal.pls[pli].st.a){paGlobal.data[ui].div.style.transition='height 0.5s, width 0.5s'};if(paGlobal.pls[pli].vp.op.sp=='part'){paGlobal.data[ui].div.style.width=paGlobal.getLoweredSize(paGlobal.data[ui].demand.s[0],paGlobal.pls[pli].vp.op.lw.a,paGlobal.pls[pli].vp.op.lw.t)+'px';paGlobal.data[ui].div.style.height=paGlobal.getLoweredSize(paGlobal.data[ui].demand.s[1],paGlobal.pls[pli].vp.op.lh.a,paGlobal.pls[pli].vp.op.lh.t)+'px';paGlobal.data[ui].demand.opcl=!0}else{paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px';paGlobal.data[ui].div.style.height=paGlobal.data[ui].demand.s[1]+'px';paGlobal.data[ui].demand.opcl=!1};if(paGlobal.pls[pli].vp.op.f){setTimeout(function(){if(paGlobal.pls[pli].vp.op.sp=='part'){paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px';paGlobal.data[ui].div.style.height=paGlobal.data[ui].demand.s[1]+'px';paGlobal.data[ui].demand.opcl=!1}else{paGlobal.data[ui].div.style.width=paGlobal.getLoweredSize(paGlobal.data[ui].demand.s[0],paGlobal.pls[pli].vp.op.lw.a,paGlobal.pls[pli].vp.op.lw.t)+'px';paGlobal.data[ui].div.style.height=paGlobal.getLoweredSize(paGlobal.data[ui].demand.s[1],paGlobal.pls[pli].vp.op.lh.a,paGlobal.pls[pli].vp.op.lh.t)+'px';paGlobal.data[ui].demand.opcl=!0}},paGlobal.pls[pli].vp.op.f*1000)};if(paGlobal.pls[pli].vp.op.eoh){paGlobal.data[ui].op={of:function(){setTimeout(function(){if(!paGlobal.data[ui].op.safeActive){if(paGlobal.pls[pli].vp.op.a||paGlobal.pls[pli].st.a){paGlobal.data[ui].div.style.transition='height 0.5s, width 0.5s'};paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px';paGlobal.data[ui].div.style.height=paGlobal.data[ui].demand.s[1]+'px';paGlobal.largeCloseBtn(pli,ci,ui)}},10)},op:function(){if(paGlobal.data[ui].demand.opcl){paGlobal.data[ui].div.style.width=paGlobal.getLoweredSize(paGlobal.data[ui].demand.s[0],paGlobal.pls[pli].vp.op.lw.a,paGlobal.pls[pli].vp.op.lw.t)+'px';paGlobal.data[ui].div.style.height=paGlobal.getLoweredSize(paGlobal.data[ui].demand.s[1],paGlobal.pls[pli].vp.op.lh.a,paGlobal.pls[pli].vp.op.lh.t)+'px';paGlobal.smallCloseBtn(pli,ci,ui)}}};paGlobal.data[ui].div.addEventListener('mouseover',paGlobal.data[ui].op.of);paGlobal.cData[ci].div.addEventListener('mouseleave',paGlobal.data[ui].op.op)}},largeCloseBtn:function(pli,ci,ui){paGlobal.data[ui].clsBtnLineHeight=paGlobal.data[ui].clsBtnLineHeight||paGlobal.data[ui].clsBtn.style.lineHeight;var styles={borderRadius:'50%',height:'50px',width:'50px',lineHeight:'50px',fontSize:'20px'};styles[paGlobal.pls[pli].st.cbp.p.os.vp]='-20px';if(paGlobal.pls[pli].st.cbp.p.d=='inner'){styles[paGlobal.pls[pli].st.cbp.p.os.hp]='-20px'};paGlobal.data[ui].div.style.overflow='visible';paGlobal.cData[ci].div.style.overflow='visible';paGlobal.data[ui].clsBtn.style.transition='height 0.7s, width 0.7s, top 0.7s, right 0.7s, left 0.7s, font-size 0.7s, line-height 0.7s, border-radius 0.7s';for(let s of Object.keys(styles)){paGlobal.data[ui].clsBtn.style[s]=styles[s]}},smallCloseBtn:function(pli,ci,ui){var styles={borderRadius:paGlobal.pls[pli].st.cbp.br+paGlobal.pls[pli].st.cbp.brt,height:paGlobal.pls[pli].st.cbp.s[1].a+paGlobal.pls[pli].st.cbp.s[1].t,width:paGlobal.pls[pli].st.cbp.s[0].a+paGlobal.pls[pli].st.cbp.s[0].t,fontSize:paGlobal.pls[pli].st.cbp.fs+'px',lineHeight:paGlobal.data[ui].clsBtnLineHeight};styles[paGlobal.pls[pli].st.cbp.p.os.hp]=paGlobal.pls[pli].st.cbp.p.os.ho+paGlobal.pls[pli].st.cbp.p.os.hot;styles[paGlobal.pls[pli].st.cbp.p.os.vp]=paGlobal.pls[pli].st.cbp.p.os.vo+paGlobal.pls[pli].st.cbp.p.os.vot;for(let s of Object.keys(styles)){paGlobal.data[ui].clsBtn.style[s]=styles[s]}},remove:function(pli,ci,ui,removeDiv){if(paGlobal.pls[pli].t=='video'){paGlobal.vidFunctions.xButton();return};switch(paGlobal.pls[pli].t){case 'adhesion':document.removeEventListener('scroll',paGlobal.cData[ci].reCalculate);window.removeEventListener('resize',paGlobal.cData[ci].reCalculate);if(paGlobal.plData[pli].sqc&&document.querySelectorAll('.pa-global-class.pa-pl-'+pli).length<2){window.removeEventListener('resize',paGlobal.plData[pli].sqc.addListenerWait);paGlobal.plData[pli].sqc.reset()};if(paGlobal.plData[pli].mvc){if(paGlobal.plData[pli].mvc.marginIsAuto){window.removeEventListener('resize',paGlobal.plData[pli].mvc.autoFunction);paGlobal.plData[pli].mvc.autoFunctions.reset()}else{window.removeEventListener('resize',paGlobal.plData[pli].mvc.notAutoFunctions.checkWhenDone);paGlobal.plData[pli].mvc.notAutoFunctions.reset()}};if(paGlobal.pls[pli].ap.cp.cts.m){if(paGlobal.cData[ci].moveContent){window.removeEventListener('resize',paGlobal.cData[ci].moveContent)}};break;case 'stickyTop':window.removeEventListener('resize',paGlobal.data[ui].reCalculate);if(paGlobal.pls[pli].stp.cp.on){document.removeEventListener('scroll',paGlobal.data[ui].reCalculateOffset)};break;case 'stickyBottom':window.removeEventListener('resize',paGlobal.data[ui].reCalculate);if(paGlobal.pls[pli].sbp.cp.on){document.removeEventListener('scroll',paGlobal.data[ui].reCalculateOffset)};break;case 'multiInsert':if(paGlobal.pls[pli].mp.cp.fold){if(paGlobal.data[ui].positionFolds){document.removeEventListener('scroll',paGlobal.data[ui].positionFolds)}};if(paGlobal.pls[pli].mp.cp.sb&&paGlobal.data[ui].smallerBoxChange){document.removeEventListener('scroll',paGlobal.data[ui].smallerBoxChange)};break;case 'rail':document.removeEventListener('scroll',paGlobal.cData[ci].reCalculate);window.removeEventListener('resize',paGlobal.cData[ci].reCalculate);document.removeEventListener('scroll',paGlobal.data[ui].reCalculate);break};if(paGlobal.pls[pli].st.cbp.cau&&!paGlobal.data[ui].closed){paGlobal.log.info('unit '+ui+' (pl '+pli+') called remove for all units');paGlobal.data[ui].closed=!0;paGlobal.data[ci].closed=!0;for(let i of document.querySelectorAll('.'+paGlobal.cData[ci].div.classList[1])){var ci2=parseInt(i.id.split('-')[i.id.split('-').length-1]);paGlobal.cData[ci2].closed=!0;for(let a of document.querySelectorAll('#'+i.id+' > div.pa-unit-global')){var ui2=parseInt(a.id.split('-')[a.id.split('-').length-1]);paGlobal.data[ui2].closed=!0;paGlobal.remove(pli,ci2,ui2,'outer')}}}else{if(paGlobal.plData[pli].rOnSelector){clearInterval(paGlobal.plData[pli].rOnSelector.interval)};paGlobal.log.info('unit '+ui+' (pl '+pli+') removed');paGlobal.data[ui].closed=!0;if(paGlobal.pls[pli].st.a){paGlobal.data[ui].div.style.transition='height 0.5s';paGlobal.data[ui].div.style.height=0;setTimeout(function(){paGlobal.data[ui].div.remove()},500)}else{paGlobal.data[ui].div.remove()};paGlobal.cData[ci].u--;if(paGlobal.cData[ci].u<1){if(paGlobal.pls[pli].st.a){setTimeout(function(){paGlobal.cData[ci].div.remove()},500)}else{paGlobal.cData[ci].div.remove()}}else{if(removeDiv=='outer'){for(let nextUnit of document.querySelectorAll('.'+paGlobal.cData[ci].div.classList[1]+'[id^=pa-unit-]')){paGlobal.remove(paGlobal.cData[ci].div,nextUnit,'inner')}}};try{delete paGlobal.listen.lvPls[ui]}catch(e){console.log('failed to delete from listener array')};if(paGlobal.data[ui].refresh&&(paGlobal.data[ui].refresh.started||paGlobal.data[ui].refresh.running)){paGlobal.refresh.stop(pli,ci,ui)}}},getOneStyle:{adhesion:{top:function(oh,head){if(head){return oh+paGlobal.selectRect(head).height+(paGlobal.selectRect(head).top+paGlobal.getScroll())}else{return oh}},sideOffset:function(cp,unitParams){if(unitParams.side=='left'){return cp.lp.oep}else{return cp.rp.oep}},width:function(cp,unitParams){var adhesionWidth=0;var sideOffsetsSelect='lp';if(unitParams.side=='right'){sideOffsetsSelect='rp'};if(cp.cs&&paGlobal.select(cp.cs)){if(unitParams.side=='left'){adhesionWidth=paGlobal.selectRect(cp.cs).left-cp[sideOffsetsSelect].oec-cp[sideOffsetsSelect].oep}else{adhesionWidth=paGlobal.getScreenDimensions().w-paGlobal.selectRect(cp.cs).right-(cp[sideOffsetsSelect].oec+cp[sideOffsetsSelect].oep)*2}}else{adhesionWidth=(paGlobal.getScreenDimensions().w-cp.cw)/2-cp[sideOffsetsSelect].oec-cp[sideOffsetsSelect].oep};if(adhesionWidth<=0){adhesionWidth=0};return adhesionWidth},height:function(cp,top){var adhesionHeight=0;if(cp.foot){adhesionHeight=paGlobal.select(cp.foot).offsetTop-top-cp.of}else{adhesionHeight=paGlobal.select('body').getBoundingClientRect().height-top-cp.of};if(adhesionHeight<0){adhesionHeight=0};if(cp.sa.px){if(adhesionHeight>cp.sa.px){adhesionHeight=cp.sa.px}};return adhesionHeight},inner:{top:function(ip,height){switch(ip.pt){case 'center':return window.innerHeight/2-height/2;break;case 'top':return ip.pa||0;break;case 'bottom':return window.innerHeight-height-(ip.pa||0);break}},width:function(ui){return paGlobal.data[ui].demand.s[0]}}},rail:{top:function(pli){if(paGlobal.pls[pli].rp.cp.s){return paGlobal.pls[pli].rp.cp.oh+paGlobal.selectRect(paGlobal.pls[pli].rp.cp.s).height+(paGlobal.selectRect(paGlobal.pls[pli].rp.cp.s).top+paGlobal.getScroll())}else{return paGlobal.pls[pli].rp.cp.oh}},width:function(pli){return paGlobal.selectRect(paGlobal.pls[pli].rp.cp.s).width+paGlobal.pls[pli].rp.cp.ol-paGlobal.pls[pli].rp.cp.or},height:function(pli,top){var result;if(paGlobal.pls[pli].rp.cp.foot){result=paGlobal.selectRect(paGlobal.pls[pli].rp.cp.foot).top+paGlobal.getScroll()-top-paGlobal.pls[pli].rp.cp.of}else{result=paGlobal.selectRect('body').height-top-paGlobal.pls[pli].rp.cp.of};if(result<0){result=0};return result},inner:{top:function(ip,height){switch(ip.pt){case 'center':return window.innerHeight/2-height/2;break;case 'top':return ip.pa;break;case 'bottom':return window.innerHeight-height-ip.pa;break}}}}},getStyles:function(pli,unitParams){var styles={};if(paGlobal.pls[pli].st.zi){styles['z-index']=paGlobal.pls[pli].st.zi};if(paGlobal.pls[pli].st.contBck){styles.background=paGlobal.pls[pli].st.contBck};if(paGlobal.pls[pli].st.a){styles.transition='height 0.5s'};if(paGlobal.pls[pli].st.ora){switch(paGlobal.pls[pli].t){case 'multiInsert':if(paGlobal.pls[pli].mp.cp.st.p){styles.padding=paGlobal.pls[pli].mp.cp.st.p};break;case 'stickyBottom':case 'stickyTop':var t='sbp';var s='top';if(paGlobal.pls[pli].t=='stickyTop'){t='stp';s='bottom'};if(paGlobal.pls[pli][t].cp.pd){styles['padding-'+s]=paGlobal.pls[pli][t].cp.pd+'px'};break}};var plSStyles={};switch(paGlobal.pls[pli].t){case 'adhesion':var offsetTop=paGlobal.getOneStyle.adhesion.top(paGlobal.pls[pli].ap.cp.oh,paGlobal.pls[pli].ap.cp.head);var side=unitParams.side;var offsetSide=paGlobal.getOneStyle.adhesion.sideOffset(paGlobal.pls[pli].ap.cp,unitParams);var adhesionWidth=paGlobal.getOneStyle.adhesion.width(paGlobal.pls[pli].ap.cp,unitParams);var adhesionHeight=paGlobal.getOneStyle.adhesion.height(paGlobal.pls[pli].ap.cp,offsetTop);plSStyles={position:'absolute',top:offsetTop+'px',[side]:offsetSide+'px',width:adhesionWidth+'px',height:adhesionHeight+'px'};if(!paGlobal.pls[pli].ap.cp.sa.ns){paGlobal.select('body').style.cssText+='overflow:unset !important'};break;case 'stickyBottom':plSStyles={position:'fixed',bottom:(paGlobal.pls[pli].sbp.cp.oh||0)+'px',width:'100%',overflow:paGlobal.pls[pli].st.ovf||'hidden'};if(!paGlobal.pls[pli].sbp.ip.ctn||(paGlobal.pls[pli].sbp.ip.ctn&&!paGlobal.select(paGlobal.pls[pli].sbp.ip.ctn))){plSStyles.margin='0 auto';plSStyles.left=0;plSStyles.right=0};if(paGlobal.pls[pli].sbp.cp.on&&paGlobal.select(paGlobal.pls[pli].sbp.cp.on)&&parseInt(paGlobal.selectRect(paGlobal.pls[pli].sbp.cp.on).bottom/10,10)*10==parseInt(paGlobal.getScreenDimensions().h/10,10)*10){plSStyles.bottom=paGlobal.selectRect(paGlobal.pls[pli].sbp.cp.on).height+'px'};if(paGlobal.pls[pli].sbp.cp.mxw){plSStyles['max-width']=paGlobal.pls[pli].sbp.cp.mxw+paGlobal.pls[pli].sbp.cp.mxwt;delete plSStyles.overflow};break;case 'stickyTop':plSStyles={position:'fixed',top:paGlobal.pls[pli].stp.cp.oh+'px',width:'100%',overflow:paGlobal.pls[pli].st.ovf||'hidden'};if(paGlobal.pls[pli].stp.cp.on&&paGlobal.select(paGlobal.pls[pli].stp.cp.on)&&parseInt(paGlobal.selectRect(paGlobal.pls[pli].stp.cp.on).top/10,10)*10<5&&parseInt(paGlobal.selectRect(paGlobal.pls[pli].stp.cp.on).top/10,10)*10>-5){plSStyles.top=paGlobal.selectRect(paGlobal.pls[pli].stp.cp.on).height+'px'};if(!paGlobal.pls[pli].stp.ip.ctn||(paGlobal.pls[pli].stp.ip.ctn&&!paGlobal.select(paGlobal.pls[pli].stp.ip.ctn))){plSStyles.margin='0 auto';plSStyles.left=0;plSStyles.right=0};if(paGlobal.pls[pli].stp.cp.mxw){plSStyles['max-width']=paGlobal.pls[pli].stp.cp.mxw+paGlobal.pls[pli].stp.cp.mxwt;delete plSStyles.overflow};break;case 'multiInsert':plSStyles={'max-width':paGlobal.pls[pli].mp.cp.st.mw.a+paGlobal.pls[pli].mp.cp.st.mw.t,'display':paGlobal.pls[pli].mp.cp.st.d,'position':paGlobal.pls[pli].mp.cp.p};if(paGlobal.pls[pli].mp.cp.st.w&&paGlobal.pls[pli].mp.cp.st.w.a){plSStyles.width=paGlobal.pls[pli].mp.cp.st.w.a+paGlobal.pls[pli].mp.cp.st.w.t};if(paGlobal.pls[pli].mp.cp.st.m){plSStyles.margin=paGlobal.pls[pli].mp.cp.st.m};if(paGlobal.pls[pli].mp.cp.st.f){if(paGlobal.pls[pli].mp.cp.st.f=='clear'){plSStyles.clear='both'}else{plSStyles.float=paGlobal.pls[pli].mp.cp.st.f}};if(paGlobal.pls[pli].mp.cp.st.d=='inline-block'){plSStyles.width=paGlobal.pls[pli].mp.cp.st.mw.a+paGlobal.pls[pli].mp.cp.st.mw.t};if(paGlobal.pls[pli].mp.cp.st.d=='inline'){plSStyles.maxWidth=paGlobal.pls[pli].mp.cp.st.mw.a+paGlobal.pls[pli].mp.cp.st.mw.t;plSStyles.width=paGlobal.pls[pli].mp.cp.st.mw.a+paGlobal.pls[pli].mp.cp.st.mw.t};if(paGlobal.pls[pli].mp.cp.st.d=='flex'){plSStyles['justify-content']='space-evenly'};break;case 'rail':var offsetTop=paGlobal.getOneStyle.rail.top(pli);var railWidth=paGlobal.getOneStyle.rail.width(pli);var railHeight=paGlobal.getOneStyle.rail.height(pli,offsetTop);var railLeft=paGlobal.selectRect(paGlobal.pls[pli].rp.cp.s).left-paGlobal.pls[pli].rp.cp.or+paGlobal.pls[pli].rp.cp.ol;plSStyles={position:'absolute',top:offsetTop+'px',left:railLeft+'px',width:railWidth+'px',height:railHeight+'px'};paGlobal.select('body').style.cssText+='overflow:unset !important';break;case 'interstitial':plSStyles={position:'fixed',top:0,bottom:0,right:0,left:0,width:'100%',height:0,background:'rgb(0,0,0,0.9)'};break;case 'video':var position=paGlobal.pls[pli].vidp.p;if(paGlobal.pls[pli].vidp.t=='interstitial'){position='fixed'}else if(paGlobal.pls[pli].vidp.fas=='relative'){position='relative'};if(paGlobal.pls[pli].vidp.t=='inContent'){plSStyles={'max-height':0,'margin':paGlobal.pls[pli].vidp.m||'0 auto','overflow':paGlobal.pls[pli].st.ovf||'hidden','text-align':'center','position':position,'max-width':paGlobal.pls[pli].vidp.mxw+paGlobal.pls[pli].vidp.mxwt};if(paGlobal.pls[pli].vidp.p=='fixed'&&paGlobal.pls[pli].vidp.fas=='fixed'){plSStyles['max-width']=paGlobal.pls[pli].vidp.mxwf+paGlobal.pls[pli].vidp.mxwft;plSStyles.width=paGlobal.pls[pli].vidp.mxwf+paGlobal.pls[pli].vidp.mxwft};if(paGlobal.pls[pli].vidp.p=='fixed'&&paGlobal.pls[pli].vidp.fas=='fixed'&&paGlobal.pls[pli].vidp.t!='interstitial'){plSStyles[paGlobal.pls[pli].vidp.vp]=paGlobal.pls[pli].vidp.vpo+paGlobal.pls[pli].vidp.vpot;plSStyles[paGlobal.pls[pli].vidp.hp]=paGlobal.pls[pli].vidp.hpo+paGlobal.pls[pli].vidp.hpot}}else{plSStyles={position:'fixed'}};if(paGlobal.pls[pli].st.a){plSStyles.transition='max-height 500ms ease-out'};break};return paGlobal.convertStyles(styles,plSStyles)},getInnerStyles:function(pli,ci,ui){styles={'z-index':1,'height':0};if(paGlobal.pls[pli].st.bck){styles.background=paGlobal.pls[pli].st.bck};if(paGlobal.pls[pli].st.a){styles.transition='height 0.5s, margin 0.5s'};if(paGlobal.pls[pli].st.ora){styles.width=paGlobal.pls[pli].st.s[0]+'px';styles.height=paGlobal.pls[pli].st.s[1]+'px'};var plSStyles={};switch(paGlobal.pls[pli].t){case 'adhesion':var adhesionAdTop=paGlobal.getOneStyle.adhesion.inner.top(paGlobal.pls[pli].ap.ip,paGlobal.pls[pli].st.s[1]);var adhesionAdWidth=paGlobal.getOneStyle.adhesion.inner.width(ui);plSStyles={'position':'sticky','position':'sticky','top':adhesionAdTop+'px','width':adhesionAdWidth+'px','max-width':'100%','overflow':paGlobal.pls[pli].st.ovf||'hidden'};var side='left';var otherSide='right';if(paGlobal.cData[ci].adhesionSide=='right'){side='right';otherSide='left'};var sideMargin='auto';var otherSideMargin='auto';if(paGlobal.pls[pli].ap.ip.is){switch(paGlobal.pls[pli].ap.ip.is){case 'center':sideMargin='auto';otherSideMargin='auto';break;case 'end':sideMargin=0;otherSideMargin='auto';break;case 'content':sideMargin='auto';otherSideMargin=0;break}};plSStyles['margin-'+side]=sideMargin;plSStyles['margin-'+otherSide]=otherSideMargin;if(!paGlobal.pls[pli].st.ora){plSStyles.width=0};if(paGlobal.pls[pli].ap.cp.sa.ns){plSStyles.position='relative'};break;case 'stickyBottom':plSStyles={'position':'relative','overflow':paGlobal.pls[pli].st.ovf||'hidden'};if(!paGlobal.pls[pli].sbp.ip.ctn||(paGlobal.pls[pli].sbp.ip.ctn&&!paGlobal.select(paGlobal.pls[pli].sbp.ip.ctn))){plSStyles.margin='0 auto';plSStyles.left=0;plSStyles.right=0};if(paGlobal.pls[pli].sbp.ip.ctn&&paGlobal.select(paGlobal.pls[pli].sbp.ip.ctn)){plSStyles['margin-left']=paGlobal.selectRect(paGlobal.pls[pli].sbp.ip.ctn).left+paGlobal.selectRect(paGlobal.pls[pli].sbp.ip.ctn).width/2-paGlobal.pls[pli].st.s[0]/2+'px;'};break;case 'stickyTop':plSStyles={'position':'relative','overflow':paGlobal.pls[pli].st.ovf||'hidden'};if(!paGlobal.pls[pli].stp.ip.ctn||(paGlobal.pls[pli].stp.ip.ctn&&!paGlobal.select(paGlobal.pls[pli].stp.ip.ctn))){plSStyles.margin='0 auto';plSStyles.left=0;plSStyles.right=0};if(paGlobal.pls[pli].stp.ip.ctn&&paGlobal.select(paGlobal.pls[pli].stp.ip.ctn)){plSStyles['margin-left']=paGlobal.selectRect(paGlobal.pls[pli].stp.ip.ctn).left+paGlobal.selectRect(paGlobal.pls[pli].stp.ip.ctn).width/2-paGlobal.pls[pli].st.s[0]/2+'px;'};break;case 'multiInsert':plSStyles={position:'relative','margin':paGlobal.pls[pli].mp.ip.m};if(!paGlobal.pls[pli].mp.cp.fold){plSStyles.overflow=paGlobal.pls[pli].st.ovf||'hidden'};break;case 'rail':var railAdTop=paGlobal.getOneStyle.rail.inner.top(paGlobal.pls[pli].rp.ip,paGlobal.pls[pli].st.s[1]);plSStyles={'position':'sticky','position':'sticky','top':railAdTop+'px','margin':'0 auto','max-width':'100%','overflow':'hidden'};break;case 'interstitial':plSStyles={top:paGlobal.getScreenDimensions().h/2-paGlobal.pls[pli].st.s[1]/2+'px',margin:'0 auto',position:'relative','overflow':'hidden'};break;case 'video':plSStyles={'position':'relative','display':'inherit','height':'inherit','width':'inherit','max-height':'inherit','max-width':'inherit','overflow':'hidden','margin':'0 auto'};if(paGlobal.pls[pli].vidp.p=='fixed'){if(paGlobal.pls[pli].vidp.fas=='fixed'){(plSStyles.width='100%'),(plSStyles['max-width']='100%')}else{plSStyles['max-width']=paGlobal.pls[pli].vidp.mxw+paGlobal.pls[pli].vidp.mxwt}};break};return paGlobal.convertStyles(styles,plSStyles)},multipleStyles:{sticky:'sticky;position:-webkit-sticky'},convertStyles:function(styles,specificStyles){var result='';for(let i of Object.keys(styles)){result+=i+':'+(paGlobal.multipleStyles[styles[i]]||styles[i])+';'};for(let i of Object.keys(specificStyles)){result+=i+':'+(paGlobal.multipleStyles[specificStyles[i]]||specificStyles[i])+';'};return result},addFrame:function(ui){paGlobal.data[ui].frame=document.createElement('iframe');paGlobal.data[ui].frame.src='about:blank';paGlobal.data[ui].frame.setAttribute('frameborder','0');paGlobal.data[ui].frame.setAttribute('marginwidth','0');paGlobal.data[ui].frame.setAttribute('marginheight','0');paGlobal.data[ui].frame.setAttribute('scrolling','no');paGlobal.data[ui].frame.style.width='inherit';paGlobal.data[ui].frame.style.height='inherit';paGlobal.data[ui].frame.style.display='none';paGlobal.data[ui].frame.style.maxWidth='100%';paGlobal.data[ui].frame.style.margin=0;paGlobal.data[ui].div.appendChild(paGlobal.data[ui].frame)},getDirectImgs:function(pli,link){var regImg='<img onload="imp()" src='+link+'>';if(paGlobal.pls[pli].t=='multiInsert'){if(paGlobal.pls[pli].mp.cp.fold){var index=parseInt(link.split('/')[link.split('/').length-1]);var result='';for(let i=1;i<paGlobal.pls[pli].mp.cp.foldParams.si+2;i++){var foldingImgClass='class="folding-image"';var callImp='';if(i==1){foldingImgClass='';callImp='onload="imp()"'};result+='<img style="position:absolute"'+foldingImgClass+' src="https://powerad.ai/creatives/part/'+pli+'/'+index+'/'+i+'"'+' '+callImp+'">'};return result}else{return regImg}}else{return regImg}},compileDoc:function(pli,ci,ui){var result='<html><head><title>Yukshy Inject Frame</title><script>function imp(){top.paGlobal.data['+ui+'].impListener(true);};function noImp(){top.paGlobal.data['+ui+'].impListener(false)};</script>';if(paGlobal.pls[pli].d.type=='direct'||paGlobal.data[ui].demand.cad){paGlobal.data[ui].demand.cb='direct';var clickThrough='';if(paGlobal.pls[pli].d.c.ct){clickThrough='href="'+paGlobal.pls[pli].d.c.ct+'"'};result+='</head><body><a target="_blank" '+clickThrough+'>'+paGlobal.getDirectImgs(pli,paGlobal.pls[pli].d.c.l)+'</a></body></html>';return result}else{var cDemand=paGlobal.pls[pli].d.live[paGlobal.data[ui].demand.tn]||{};paGlobal.data[ui].demand.s=cDemand.s||paGlobal.pls[pli].st.s;if(typeof paGlobal.data[ui].demand.s[0]=='string'){paGlobal.data[ui].demand.s[0]=parseInt(paGlobal.data[ui].demand.s[0])||paGlobal.pls[pli].st.s[0];paGlobal.data[ui].demand.s[1]=parseInt(paGlobal.data[ui].demand.s[1])||paGlobal.pls[pli].st.s[1]};cDemand.s=paGlobal.data[ui].demand.s;paGlobal.data[ui].demand.cb=cDemand.name||cDemand.partner||'Unknown';var rn=Math.floor(Math.random()*50);switch(cDemand.partner){case 'other':result+='<script>'+top.paGlobal.__uspapiString+'</scr'+'ipt>';result+='<script>var impTimeout = setTimeout(function(){imp()},'+cDemand.timeout+");var noImpression=new Event('noImpression');document.addEventListener('noImpression',function(){noImp()})</script>";result+=cDemand.headTag+'</head><body>'+cDemand.bodyTag+'</body></html>';break;case 'google':if(paGlobal.adLight&&!cDemand.adLightOff){result+='<script src="https://tagan.adlightning.com/nextmillenium/op.js"></script>'};result+='<script>'+top.paGlobal.__uspapiString+'</scr'+'ipt>';result+=`<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script><script>var googletag = googletag || {};googletag.cmd = googletag.cmd || [];googletag.cmd.push(function() {googletag.defineSlot('/90814396/${cDemand.unitName}', [${cDemand.s}], 'inject-google-slot-id-${rn}').addService(googletag.pubads());googletag.pubads().enableSingleRequest();googletag.enableServices();});googletag.cmd.push(function(){googletag.pubads().addEventListener('slotRenderEnded',top.paGlobal.data[${ui}].googleImp);});</script></head><body><div id='inject-google-slot-id-${rn}'><script>googletag.cmd.push(function(){googletag.display('inject-google-slot-id-${rn}');});</script></div></body></html>`;break;case 'hb':var pSizes=[];var hbSizes=(cDemand&&cDemand.hbSizes)||[];for(let size of hbSizes){paGlobal.data[ui].demand.s=size;if(paGlobal.listen.inViewHorizontal(pli,ci,ui)){pSizes.push(size)}};if(hbSizes[0]&&!pSizes[0]){paGlobal.log.info('unit '+ui+' (pl '+pli+') skipping demand '+(paGlobal.data[ui].demand.tn+1)+' ('+paGlobal.data[ui].demand.cb+') as no fitting size found');return paGlobal.data[ui].impListener(!1)};result=`<html><head></head><body><\/body><script>var frame = document.createElement('iframe');frame.src='about:blank';frame.setAttribute('frameborder','0');frame.setAttribute('marginwidth','0');frame.setAttribute('marginheight','0');frame.setAttribute('scrolling','no');frame.style.width='100%';frame.style.height='100%';document.querySelector('body').appendChild(frame);var jsonCall = new XMLHttpRequest();jsonCall.open('get','https://hb.brainlyads.com/json-parts/${cDemand.linkNumber}/?pageId=${paGlobal.pageId}&sizes=${JSON.stringify(pSizes)}&winbidder=${JSON.stringify(top.hb_win && top.hb_win[cDemand.linkNumber]) || ''}');jsonCall.send();jsonCall.onreadystatechange = function(){if(this.status == 200 && this.readyState == 4){var parts = JSON.parse(this.response);if(parts.skipDFP){frame.id = 'google_ads_iframe_/90814396/'+(parts.code||'')+'_0';};frame.contentDocument.open();frame.contentDocument.write(\`<html><head><script>${top.paGlobal.__uspapiString}<\\/script>${paGlobal.adLight && !cDemand.adLightOff ? '<script src="https://tagan.adlightning.com/nextmillenium/op.js"><\\/script>' : ''}\${parts.head}<script>var prebidSize;var amzSize;pbjs.que.push(function(){pbjs.onEvent('bidWon',function(data){prebidSize = [data.width,data.height];});});googletag.cmd.push(function(){googletag.pubads().addEventListener('slotRenderEnded',function(info){if(info.isEmpty==!1){if(${pSizes && pSizes[0]}){var amzn_win;var cDoc=document.querySelector('iframe').contentWindow;for(let a=0;a<5;a++){if(cDoc.amzn_win){amzn_win=cDoc.amzn_win;break;};try{cDoc=cDoc.document.querySelector('iframe').contentWindow}catch(e){break;}};if(amzn_win){if((amzn_win.amzSize && amzn_win.amzSize[0])||(amzn_win.adUnitSize && amzn_win.adUnitSize[0])){amzSize=amzn_win.amzSize||amzn_win.adUnitSize}try{var f = document.querySelector('iframe[id^="google_ads_iframe_/"]');var fSize=[parseInt(f.width),parseInt(f.height)];if(fSize[0]&&fSize[0] != 0){amzSize = fSize;}}catch(e){}};top.paGlobal.data[${ui}].demand.s = prebidSize||amzSize||info.size;};top.paGlobal.data[${ui}].impListener(true);}else if(info.isEmpty==!0){top.paGlobal.data[${ui}].impListener(false);}})});document.addEventListener('apAds',function(){console.log('pa info apAds event now fired');top.paGlobal.data[${ui}].hbFunctions.stopRefresh();});document.addEventListener('apAds_line',function(){console.log('pa info: apAds_line event now fired');top.paGlobal.data[${ui}].hbFunctions.changeHeight();});document.addEventListener('apAds_x',function(){console.log('pa info apAds_x event now fired');top.paGlobal.data[${ui}].hbFunctions.removeAd();});document.addEventListener('apAds_hide',function(){console.log('pa info apAds_hide event now fired');top.paGlobal.data[${ui}].hbFunctions.hideAd();});document.addEventListener('apAds_div',function(info){console.log('pa info apAds_div event now fired');console.log(info.detail);top.paGlobal.data[${ui}].hbFunctions.newDiv(info.detail);});<\\/script></head><body>\${parts.body}</body></html>\`);frame.contentDocument.close()}};</script></html>`;break;case 'amazon':if(paGlobal.adLight&&!cDemand.adLightOff){result+='<script src="https://tagan.adlightning.com/nextmillenium/op.js"></script>'};result+=`<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script><script>var googletag=googletag||{};googletag.cmd=googletag.cmd||[];googletag.cmd.push(function(){googletag.defineSlot('/90814396/${cDemand.unitName}',[[${cDemand.s[1]},${cDemand.s[0]}]],'inject-amazon-slot-id-1').addService(googletag.pubads());googletag.pubads().disableInitialLoad();googletag.pubads().enableSingleRequest();googletag.enableServices()});</script><script type='text/javascript'>!function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");apstag.init({pubID:'79e40b05-e673-4b6c-85f9-79252a7f96a5',adServer:'googletag',bidTimeout:2e3});apstag.fetchBids({slots:[{slotID:'inject-amazon-slot-id-1',slotName:'/90814396/${cDemand.unitName}',sizes:[${cDemand.s[0]},${cDemand.s[1]}]}]},function(bids){googletag.cmd.push(function(){apstag.setDisplayBids();googletag.pubads().refresh()})});googletag.cmd.push(function(){googletag.pubads().addEventListener('slotRenderEnded',top.paGlobal.data[${ui}].googleImp);})</script></head><body><div id='inject-amazon-slot-id-1'><script>googletag.cmd.push(function(){googletag.display('inject-amazon-slot-id-1')});</script></div></body></html>`;break};return result}},writeDoc:function(pli,ci,ui){if(paGlobal.pls[pli].d.type=='live'&&!paGlobal.data[ui].demand.cad){var cDemand=paGlobal.pls[pli].d.live[paGlobal.data[ui].demand.tn];paGlobal.data[ui].demand.s=cDemand.s||paGlobal.pls[pli].st.s;if(paGlobal.data[ui].demand.s[0]=='string'){paGlobal.data[ui].demand.s[0]=parseInt(paGlobal.data[ui].demand.s[0])||paGlobal.pls[pli].st.s[0];paGlobal.data[ui].demand.s[1]=parseInt(paGlobal.data[ui].demand.s[1])||paGlobal.pls[pli].st.s[1]};paGlobal.data[ui].demand.cb=cDemand.name||cDemand.partner||'Unknown'}else{paGlobal.data[ui].demand.s=paGlobal.pls[pli].st.s;paGlobal.data[ui].demand.cb='Direct'};if(!paGlobal.listen.inViewHorizontal(pli,ci,ui)){paGlobal.log.info('unit '+ui+' (pl '+pli+') skipping demand '+(paGlobal.data[ui].demand.tn+1)+' ('+paGlobal.data[ui].demand.cb+") as it doesn't fit (percent view)");return paGlobal.data[ui].impListener(!1)};if(paGlobal.data[ui].demand.skipIndex[paGlobal.data[ui].demand.tn]){paGlobal.log.info('unit '+ui+' (pl '+pli+') skipping demand '+(paGlobal.data[ui].demand.tn+1)+' ('+paGlobal.data[ui].demand.cb+') as skip on refresh is active');return paGlobal.data[ui].impListener(!1)};paGlobal.data[ui].newFrame=paGlobal.data[ui].frame.cloneNode();paGlobal.data[ui].frame.remove();paGlobal.data[ui].frame=paGlobal.data[ui].newFrame;paGlobal.data[ui].div.appendChild(paGlobal.data[ui].frame);frameDoc=paGlobal.data[ui].frame.contentDocument;paGlobal.log.info('unit '+ui+' (pl '+pli+') calling: '+paGlobal.data[ui].demand.cb+' ('+(paGlobal.data[ui].demand.tn+1)+')');paGlobal.data[ui].listenFired=!1;try{frameDoc.open();frameDoc.write(paGlobal.compileDoc(pli,ci,ui));frameDoc.close()}catch(e){paGlobal.log.warn('failed to write to doc')}},smallerBox:function(pli,ci,ui,frame){paGlobal.cData[ci].div.style.height=paGlobal.pls[pli].mp.cp.sbp.h+'px';paGlobal.data[ui].div.style.height=paGlobal.pls[pli].mp.cp.sbp.h+'px';paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px';paGlobal.data[ui].div.style.position='absolute';paGlobal.data[ui].div.style.top=0;paGlobal.data[ui].div.style.left=0;paGlobal.data[ui].div.style.right=0;paGlobal.data[ui].div.style.clip='rect(0px, '+paGlobal.data[ui].demand.s[0]+'px, '+paGlobal.pls[pli].mp.cp.sbp.h+'px, 0px)';paGlobal.data[ui].frame.style.position='fixed';paGlobal.data[ui].frame.style.top=paGlobal.getScreenDimensions().h/2-paGlobal.data[ui].demand.s[1]/2+'px';paGlobal.data[ui].frame.style.height=paGlobal.data[ui].demand.s[1]+'px';if(paGlobal.pls[pli].mp.cp.sbp.soa=='stick'){paGlobal.data[ui].smallerBoxChange=function(){var maxToTop=paGlobal.getScreenDimensions().h/2-paGlobal.data[ui].demand.s[1]/2;var maxFromTop=maxToTop+paGlobal.data[ui].demand.s[1]-paGlobal.pls[pli].mp.cp.sbp.h;if(paGlobal.selectRect(paGlobal.data[ui].div).top<=maxToTop){paGlobal.data[ui].frame.style.position='absolute';paGlobal.data[ui].frame.style.top=0}else if(paGlobal.selectRect(paGlobal.data[ui].div).top>=maxFromTop){paGlobal.data[ui].frame.style.position='absolute';paGlobal.data[ui].frame.style.top=paGlobal.pls[pli].mp.cp.sbp.h-paGlobal.data[ui].demand.s[1]+'px';paGlobal.data[ui].frame.style.bottom=0}else{paGlobal.data[ui].frame.style.position='fixed';paGlobal.data[ui].frame.style.top=paGlobal.getScreenDimensions().h/2-paGlobal.data[ui].demand.s[1]/2+'px'}};document.addEventListener('scroll',paGlobal.data[ui].smallerBoxChange)}},cleanSmallerBox:function(pli,ci,ui){if(paGlobal.data[ui].smallerBoxChange){document.removeEventListener('scroll',paGlobal.data[ui].smallerBoxChange)};paGlobal.cData[ci].div.style.removeProperty('height');paGlobal.data[ui].div.style.removeProperty('width');paGlobal.data[ui].div.style.removeProperty('top');paGlobal.data[ui].div.style.removeProperty('right');paGlobal.data[ui].div.style.removeProperty('left');paGlobal.data[ui].div.style.removeProperty('clip');paGlobal.data[ui].div.style.position='relative';if(paGlobal.data[ui].op){paGlobal.data[ui].div.removeEventListener('mouseover',paGlobal.data[ui].op.of);paGlobal.cData[ci].div.removeEventListener('mouseleave',paGlobal.data[ui].op.op)}},foldingAd:function(pli,ui){var positoinFoldsListenerAdded=!1;var imgHeight=paGlobal.pls[pli].st.s[1];var foldHeight=imgHeight-paGlobal.pls[pli].mp.cp.foldParams.fh;var eachFoldHeight=foldHeight/paGlobal.pls[pli].mp.cp.foldParams.si;var foldAmount=paGlobal.pls[pli].mp.cp.foldParams.si;var foldAtPercent=paGlobal.pls[pli].mp.cp.foldParams.fap;var img=paGlobal.data[ui].frame.contentDocument.querySelector('a');var imgs=img.querySelectorAll('img');var foldingImgs=img.querySelectorAll('.folding-image');var eachTop=0;for(let i of imgs){i.style.top=eachTop+'px';eachTop+=eachFoldHeight};var firstHeight=paGlobal.pls[pli].mp.cp.foldParams.fh;var foldHeight=(imgHeight-firstHeight)/paGlobal.pls[pli].mp.cp.foldParams.si;var eachHeight=[firstHeight];for(let i=0;i<foldingImgs.length;i++){eachHeight.push(foldHeight)};function getOdd(i){return i%2==1};function getOffsetTop(i){result=0;for(let a=0;a<i+1;a++){result+=imgs[a].getBoundingClientRect().height};if(getOdd(i)){result-=imgs[i].offsetHeight-imgs[i].getBoundingClientRect().height};return result};paGlobal.data[ui].positionFolds=function(){if(paGlobal.data[ui].div.getBoundingClientRect().top+imgHeight>=(window.innerHeight/100)*foldAtPercent){for(let i=0;i<foldingImgs.length;i++){var percent=(window.innerHeight/100)*foldAtPercent;var imgOffset=paGlobal.data[ui].div.getBoundingClientRect().top;var pxOut=percent-imgOffset;pxIn=imgHeight-pxOut;pxToDeg=foldHeight/90;var deg=pxIn/pxToDeg;deg=deg/foldAmount;deg=deg>=90?90:deg<=0?0:deg;foldingImgs[i].style.transform='skew('+(getOdd(i)?'-':'')+deg+'deg) rotateX('+(getOdd(i)?'-':'')+deg+'deg)';foldingImgs[i].style.transformOrigin=getOdd(i)?'bottom':'top';foldingImgs[i].style.top=getOffsetTop(i)+'px';paGlobal.data[ui].div.querySelector('iframe').style.width=foldingImgs[i].getBoundingClientRect().width+'px';paGlobal.data[ui].div.querySelector('iframe').style.minWidth=foldingImgs[i].getBoundingClientRect().width+'px'}}else{offsetTop=0;for(let i=0;i<imgs.length;i++){imgs[i].style.transform='skew(0deg) rotateX(0deg)';imgs[i].style.top=offsetTop+'px';offsetTop+=imgs[i].getBoundingClientRect().height}};unitHeight=0;for(let i of imgs){unitHeight+=i.getBoundingClientRect().height};paGlobal.data[ui].div.style.height=unitHeight+'px'};function foldAd(){paGlobal.data[ui].positionFolds();if(!positoinFoldsListenerAdded){positoinFoldsListenerAdded=!0;document.addEventListener('scroll',paGlobal.data[ui].positionFolds);paGlobal.data[ui].div.style.transition=''}};foldAd();var foldNowInt=setInterval(function(){foldAd()},100);setTimeout(function(){clearInterval(foldNowInt)},1000)},percentToPx(dimension,percent){return(percent/100)*dimension},refresh:{start:function(pli,ci,ui,time){if(paGlobal.data[ui].refresh.finished){return};if(!time||time<5000){time=5000};paGlobal.data[ui].refresh.timer=setTimeout(function(){paGlobal.refresh.finished(pli,ci,ui)},time);paGlobal.log.info('unit '+ui+' (pl '+pli+') refresh started for '+time/1000+' seconds');paGlobal.data[ui].refresh.startTs=new Date().getTime();paGlobal.data[ui].refresh.started=!0;paGlobal.data[ui].refresh.running=!0;paGlobal.data[ui].refresh.ran=0;paGlobal.data[ui].refresh.currentRunningTime=time;paGlobal.data[ui].div.onmouseenter=function(){paGlobal.refresh.pause(pli,ci,ui,time)};paGlobal.data[ui].div.onmouseleave=function(){paGlobal.refresh.resume(pli,ci,ui,time)}},pause:function(pli,ci,ui,time){if(!paGlobal.data[ui].refresh.running){return};paGlobal.data[ui].refresh.running=!1;var ran=new Date().getTime()-paGlobal.data[ui].refresh.startTs;paGlobal.data[ui].refresh.ran+=ran;clearTimeout(paGlobal.data[ui].refresh.timer);paGlobal.log.info('unit '+ui+' (pl '+pli+') paused refresh')},resume:function(pli,ci,ui,time){if(paGlobal.data[ui].refresh.finished||paGlobal.data[ui].refresh.running||!paGlobal.listen.unitInView(pli,ci,ui).iv){return};paGlobal.log.info('unit '+ui+' (pl '+pli+') resumed refresh');var leftToRun=time-paGlobal.data[ui].refresh.ran;paGlobal.data[ui].refresh.startTs=new Date().getTime();paGlobal.data[ui].refresh.timer=setTimeout(function(){paGlobal.refresh.finished(pli,ci,ui)},leftToRun);paGlobal.data[ui].refresh.running=!0},stop:function(pli,ci,ui,time){paGlobal.log.info('unit '+ui+' (pl '+pli+') stopped refresh');clearTimeout(paGlobal.data[ui].refresh.timer);paGlobal.data[ui].refresh={started:!0,running:!1,finished:!0}},finished:function(pli,ci,ui){clearTimeout(paGlobal.data[ui].refresh.timer);if(paGlobal.data[ui].closed){return};if(paGlobal.data[ui].refresh.finished){return};paGlobal.data[ui].demand.tn=0;try{delete paGlobal.data[ui].frame}catch(e){};paGlobal.addFrame(ui);paGlobal.writeDoc(pli,ci,ui);paGlobal.data[ui].refresh={started:!1,running:!1}}},listen:{inViewVertical:function(pli,ci,ui,nfpb){if(paGlobal.pls[pli].vp.lbv&&!paGlobal.data[ui].fv&&paGlobal.selectRect(paGlobal.data[ui].div).top-paGlobal.getScreenDimensions().h<paGlobal.pls[pli].vp.lbv&&paGlobal.selectRect(paGlobal.data[ui].div).top+paGlobal.data[ui].demand.s[1]+paGlobal.pls[pli].vp.lbv>=0){return!0};switch(paGlobal.pls[pli].t){case 'multiInsert':case 'video':return paGlobal.selectRect(paGlobal.data[ui].div).top+paGlobal.data[ui].demand.s[1]>=paGlobal.percentToPx(paGlobal.data[ui].demand.s[1],paGlobal.pls[pli].vp.p.h)&&paGlobal.getScreenDimensions().h-paGlobal.selectRect(paGlobal.data[ui].div).top>=paGlobal.percentToPx(paGlobal.data[ui].demand.s[1],paGlobal.pls[pli].vp.p.h);break;case 'stickyBottom':case 'stickyTop':case 'interstitial':return!0;break;case 'rail':case 'adhesion':return paGlobal.selectRect(paGlobal.data[ui].div).top+paGlobal.data[ui].demand.s[1]>=paGlobal.percentToPx(paGlobal.data[ui].demand.s[1],paGlobal.pls[pli].vp.p.h)&&paGlobal.getScreenDimensions().h-paGlobal.selectRect(paGlobal.data[ui].div).top>=paGlobal.percentToPx(paGlobal.data[ui].demand.s[1],paGlobal.pls[pli].vp.p.h)&&paGlobal.cData[ci].div.offsetHeight>=paGlobal.percentToPx(paGlobal.data[ui].demand.s[1],paGlobal.pls[pli].vp.p.h);break}},inViewHorizontal:function(pli,ci,ui){if(paGlobal.pls[pli].t=='interstitial'){return!0}else{if(paGlobal.pls[pli].t=='adhesion'){if((paGlobal.pls[pli].ap.cp.cts.sq||paGlobal.pls[pli].ap.cp.cts.m)&&(!paGlobal.pls[pli].ap.cp.cts.saw||(paGlobal.pls[pli].ap.cp.cts.saw&&paGlobal.getScreenDimensions().w>=paGlobal.pls[pli].ap.cp.cts.saw))){if(!paGlobal.plData[pli].sqcStarted||!paGlobal.plData[pli].sqc.cv){return!0}else{}}};return paGlobal.cData[ci].div.offsetWidth+2>=paGlobal.percentToPx(paGlobal.data[ui].demand.s[0],paGlobal.pls[pli].vp.p.w)}},unitInView:function(pli,ci,ui){if(document.visibilityState=='hidden'){return{iv:!1,sh:!0}};if(paGlobal.pls[pli].vp.sd.mn.w&&paGlobal.getScreenDimensions().w<paGlobal.pls[pli].vp.sd.mn.w){return{iv:!1}};if(paGlobal.pls[pli].vp.sd.mn.h&&paGlobal.getScreenDimensions().h<paGlobal.pls[pli].vp.sd.mn.h){return{iv:!1}};if(paGlobal.pls[pli].vp.sd.mx.w&&paGlobal.getScreenDimensions().w>paGlobal.pls[pli].vp.sd.mx.w){return{iv:!1}};if(paGlobal.pls[pli].vp.sd.mx.h&&paGlobal.getScreenDimensions().h>paGlobal.pls[pli].vp.sd.mx.h){return{iv:!1}};if(paGlobal.pls[pli].vp.s.s&&paGlobal.getScroll()<paGlobal.pls[pli].vp.s.s){return{iv:!1}};if(paGlobal.pls[pli].vp.s.h&&paGlobal.getScroll()>paGlobal.pls[pli].vp.s.h){return{iv:!1}};if(paGlobal.pls[pli].vp.hon){if(!paGlobal.data[ui].demand.cs){paGlobal.data[ui].demand.cs=paGlobal.data[ui].demand.s};for(let i of paGlobal.selectAll(paGlobal.pls[pli].vp.hon)){if(paGlobal.selectRect(paGlobal.data[ui].div).bottom>=paGlobal.selectRect(i).top&&paGlobal.selectRect(paGlobal.data[ui].div).bottom<=paGlobal.selectRect(i).top+paGlobal.selectRect(i).height+paGlobal.data[ui].demand.cs[1]&&paGlobal.selectRect(paGlobal.data[ui].div).left<=paGlobal.selectRect(i).left+paGlobal.selectRect(i).width&&paGlobal.selectRect(paGlobal.data[ui].div).left+paGlobal.data[ui].demand.cs[0]>=paGlobal.selectRect(i).left){return{iv:!1}}}};if(paGlobal.pls[pli].vp.lra&&!paGlobal.data[ui].fv){return{iv:!0}};if(paGlobal.listen.inViewVertical(pli,ci,ui)&&paGlobal.listen.inViewHorizontal(pli,ci,ui)){return{iv:!0}}else{if(paGlobal.pls[pli].t!='adhesion'){return{iv:!1,sh:!0}}else{return{iv:!1}}}},view:function(pli,ci,ui){paGlobal.data[ui].wfv=!0;paGlobal.listen.lvPls[ui]={pli:pli,ci:ci};if(!paGlobal.vlc){paGlobal.vlc=!0;paGlobal.wfvto=!1;document.addEventListener('scroll',paGlobal.listen.viewListener);window.addEventListener('resize',paGlobal.listen.viewListener);if(paGlobal.atvc){document.addEventListener('visibilitychange',paGlobal.listen.viewListener)}};paGlobal.listen.viewListener()},lvPls:{},viewListener:function(){if(!paGlobal.wfvto){paGlobal.wfvto=!0;setTimeout(function(){for(let ui of Object.keys(paGlobal.listen.lvPls)){ui=parseInt(ui);if(!paGlobal.listen.lvPls[ui]||!paGlobal.listen.lvPls[ui].pli){continue};var result=paGlobal.listen.unitInView(paGlobal.listen.lvPls[ui].pli,paGlobal.listen.lvPls[ui].ci,ui);if(result.iv){if(paGlobal.data[ui].wfv){paGlobal.data[ui].wfv=!1;if(!paGlobal.data[ui].fv){paGlobal.data[ui].fv=!0;paGlobal.addFrame(ui);paGlobal.writeDoc(paGlobal.listen.lvPls[ui].pli,paGlobal.listen.lvPls[ui].ci,ui);paGlobal.plData[paGlobal.listen.lvPls[ui].pli].uwff++};if(!paGlobal.data[ui].hbHide){paGlobal.cData[paGlobal.listen.lvPls[ui].ci].div.style.opacity=1};if(paGlobal.data[ui].opened){if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].st.a){if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t=='adhesion'){paGlobal.data[ui].div.style.transition='width 0.5s, opacity 0.4';paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px'}else if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t!='multiInsert'||(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t=='multiInsert'&&!paGlobal.pls[paGlobal.listen.lvPls[ui].pli].mp.cp.fold)){paGlobal.data[ui].div.style.transition='height 0.5s, opacity 0.4s'}};if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t!='adhesion'&&(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t!='multiInsert'||(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t=='multiInsert'&&!paGlobal.pls[paGlobal.listen.lvPls[ui].pli].mp.cp.fold))){if(!paGlobal.pls[paGlobal.listen.lvPls[ui].pli].vp.op.on){paGlobal.data[ui].div.style.height=paGlobal.data[ui].demand.s[1]+'px'}else{paGlobal.data[ui].div.style.height=paGlobal.getLoweredSize(paGlobal.data[ui].demand.s[1],paGlobal.pls[paGlobal.listen.lvPls[ui].pli].vp.op.lh.a,paGlobal.pls[paGlobal.listen.lvPls[ui].pli].vp.op.lh.t)+'px'}}else if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t=='adhesion'){paGlobal.data[ui].div.style.width=paGlobal.data[ui].demand.s[0]+'px'};if(paGlobal.data[ui].refresh.started){paGlobal.refresh.resume(paGlobal.listen.lvPls[ui].pli,paGlobal.listen.lvPls[ui].ci,ui,paGlobal.data[ui].refresh.currentRunningTime)}}}}else{if(!paGlobal.data[ui].wfv){paGlobal.data[ui].wfv=!0;if(paGlobal.data[ui].opened&&paGlobal.data[ui].refresh.started){paGlobal.refresh.pause(paGlobal.listen.lvPls[ui].pli,paGlobal.listen.lvPls[ui].ci,ui,paGlobal.data[ui].refresh.currentRunningTime)}};if(!result.sh){if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].st.a){if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t=='adhesion'){paGlobal.data[ui].div.style.transition='width 0.5s, opacity 0.7s'}else{paGlobal.data[ui].div.style.transition='height 0.5s, opacity 0.7s'}};if(paGlobal.pls[paGlobal.listen.lvPls[ui].pli].t!='adhesion'){paGlobal.data[ui].div.style.height=0}else{paGlobal.data[ui].div.style.width=0};paGlobal.cData[paGlobal.listen.lvPls[ui].ci].div.style.opacity=0}}};paGlobal.wfvto=!1},75)}}},getWiderAdhesion:function(pli){if(document.querySelector('.pa-global-class.pa-pl-'+pli)){var ad=document.querySelector('.pa-unit-global.pa-pl-'+pli);return paGlobal.data[ad.id.split('-')[ad.id.split('-').length-1]].demand.s[0]};var uis=[];for(let i of document.querySelectorAll('.pa-unit-global.pa-pl-'+pli)){uis.push(parseInt(i.id.split('-')[i.id.split('-').length-1]))};return Math.max(paGlobal.data[uis[0]].demand.s[0],paGlobal.data[uis[1]].demand.s[0])},vidFunctions:{xButton:function(){if(paGlobal.vidFunctions.stats.position=='fixed'&&paGlobal.pls[vidPli].vidp.xftr){paGlobal.pls[vidPli].vidp.p='relative';paGlobal.pls[vidPli].vidp.asa='pause';paGlobal.vidFunctions.togglePosition.inContent()}else{paGlobal.vidFunctions.remove();paGlobal.vidFunctions.close()}},inView:function(){if(paGlobal.vidFunctions.vidParams.position=='fixed'||paGlobal.vidFunctions.vidParams.type=='interstitial'){if((paGlobal.vidFunctions.vidParams.atSelector=='relative'||!vidCont)&&paGlobal.vidFunctions.vidParams.type!='interstitial'){if(!vidCont){paGlobal.log.warn("can't find selector to change video relative to")}else{if(vidCont.getBoundingClientRect().top>window.innerHeight-vidCont.offsetHeight/2){paGlobal.vidFunctions.togglePosition.fixed();setTimeout(function(){paGlobal.vidFunctions.togglePosition.fixed()},50)}else if(vidCont.getBoundingClientRect().top+vidCont.offsetHeight/2<0){paGlobal.vidFunctions.togglePosition.fixed()}else{paGlobal.vidFunctions.togglePosition.inContent()}}}else{};return!0}else{if(paGlobal.pls[vidPli].vidp.asa=='pause'){return vidDiv.getBoundingClientRect().top+paGlobal.vidFunctions.getHeight(vidDiv)/2>=0&&vidDiv.getBoundingClientRect().top+paGlobal.vidFunctions.getHeight(vidDiv)/2<=screen.availHeight}else if(paGlobal.pls[vidPli].vidp.asa=='move'){if(vidDiv.getBoundingClientRect().top+paGlobal.vidFunctions.getHeight(vidDiv)/2<=screen.availHeight){if(vidCont.getBoundingClientRect().top+paGlobal.vidFunctions.getHeight(vidDiv)/2>=0){paGlobal.vidFunctions.togglePosition.inContent()}else{paGlobal.vidFunctions.togglePosition.fixed()};return!0}else{return!1}}};paGlobal.log.warn("can't determine if video is in view with current position and scroll action");return!1},addVideo:function(){paGlobal.vidFunctions.stats.added=!0;var jwScript=document.createElement('script');jwScript.src=paGlobal.pls[vidPli].vidp.pl;jwScript.id='jw-library-script';vidDiv.appendChild(jwScript);var vidElement=document.createElement('div');vidElement.id='pa-jw-player';vidDiv.appendChild(vidElement);jwScript.addEventListener('load',function(){paGlobal.vidFunctions.playerInstance=jwplayer('pa-jw-player');var playerInstance=paGlobal.vidFunctions.playerInstance;paGlobal.vidFunctions.playerInstance.setup({file:paGlobal.pls[vidPli].vidp.vl,image:paGlobal.pls[vidPli].vidp.img});paGlobal.vidFunctions.playerInstance.on('ready',function(){paGlobal.vidFunctions.listen.imp();if(!paGlobal.vidFunctions.vidParams.clickToPlay){paGlobal.vidFunctions.playerInstance.setMute(!0);paGlobal.vidFunctions.play();paGlobal.vidFunctions.playerInstance.play()};paGlobal.vidFunctions.playerInstance.on('adRequest',function(){paGlobal.log.info('Video ad requested')})})})},togglePosition:{fixed:function(){if(paGlobal.vidFunctions.stats.position!='fixed'){if(paGlobal.vidFunctions.stats.opened&&!paGlobal.vidFunctions.stats.removed){paGlobal.vidFunctions.stats.position='fixed';vidDiv.style.position='fixed';vidDiv.style.width=paGlobal.pls[vidPli].vidp.mxwf+paGlobal.pls[vidPli].vidp.mxwft;vidDiv.style.maxWidth=paGlobal.pls[vidPli].vidp.mxwf+paGlobal.pls[vidPli].vidp.mxwft;vidDiv.style.zIndex=paGlobal.pls[vidPli].vidp.zif||1000000;vidDiv.style.height=paGlobal.vidFunctions.getHeight(vidDiv)+'px';vidDiv.style.maxHeight=paGlobal.vidFunctions.getHeight(vidDiv)+'px';vidDiv.style[paGlobal.pls[vidPli].vidp.vp]=paGlobal.pls[vidPli].vidp.vpo+paGlobal.pls[vidPli].vidp.vpot;vidDiv.style[paGlobal.pls[vidPli].vidp.hp]=paGlobal.pls[vidPli].vidp.hpo+paGlobal.pls[vidPli].vidp.hpot}else{}};if(paGlobal.pls[vidPli].vidp.hxf&&paGlobal.pls[vidPli].st.cb){try{vidCont.querySelector('.cls-btn').style.display='none'}catch(e){}}else if(paGlobal.pls[vidPli].st.cb){try{vidCont.querySelector('.cls-btn').style.display='block'}catch(e){}}},inContent:function(){vidDiv.style.transition='';if(paGlobal.vidFunctions.stats.position=='fixed'&&vidCont&&vidDiv){paGlobal.vidFunctions.stats.position='inContent';vidDiv.style.position=paGlobal.vidFunctions.vidParams.atSelector=='relative'?'relative':paGlobal.vidFunctions.vidParams.position;vidDiv.style[paGlobal.pls[vidPli].vidp.vp]=0;vidDiv.style[paGlobal.pls[vidPli].vidp.hp]=0;vidDiv.style.width='inherit';vidDiv.style.maxWidth='inherit';vidDiv.style.height=paGlobal.vidFunctions.getHeight(vidDiv)+'px';vidDiv.style.maxHeight=paGlobal.vidFunctions.getHeight(vidDiv)+'px';vidCont.style.height=paGlobal.vidFunctions.getHeight(vidDiv)+'px';vidCont.style.maxHeight=paGlobal.vidFunctions.getHeight(vidDiv)+'px'};if(paGlobal.pls[vidPli].vidp.hxr&&paGlobal.pls[vidPli].st.cb){try{vidCont.querySelector('.cls-btn').style.display='none'}catch(e){}}else if(paGlobal.pls[vidPli].st.cb){try{vidCont.querySelector('.cls-btn').style.display='block'}catch(e){}}}},imp:function(){if(paGlobal.pls[vidPli].st.cb){paGlobal.addClsBtn(vidPli,vidCi,vidUi);if(paGlobal.pls[vidPli].hxf&&paGlobal.vidFunctions.stats.position=='fixed'){try{vidCont.querySelector('.cls-btn').style.display='none'}catch(e){}}else if(paGlobal.pls[vidPli].hxr&&paGlobal.vidFunctions.stats.position=='inContent'){try{vidCont.querySelector('.cls-btn').style.display='none'}catch(e){}}};paGlobal.vidFunctions.open();if(!paGlobal.vidFunctions.vidParams.clickToPlay){paGlobal.vidFunctions.play()}else{paGlobal.vidFunctions.playerInstance.setMute(!1);vidDiv.addEventListener('click',togglePlaying);function togglePlaying(){paGlobal.vidFunctions.stats.started=!0;paGlobal.vidFunctions.stats.playing=!0;vidDiv.removeEventListener('click',togglePlaying)}};paGlobal.vidFunctions.playerInstance.on('complete adComplete adSkipped',function(){if(!paGlobal.vidFunctions.vidParams.clickToPlay){paGlobal.vidFunctions.finished()};if(paGlobal.pls[vidPli].vidp.live){paGlobal.vidFunctions.playerInstance.on('firstFrame',function(){paGlobal.vidFunctions.finished()})}})},noImp:function(){paGlobal.log.info('no fill for video');paGlobal.vidFunctions.playerInstance.stop();if(!paGlobal.vidFunctions.vidParams.clickToPlay){paGlobal.vidFunctions.remove()};if(paGlobal.vidFunctions.vidParams.recall>paGlobal.vidFunctions.stats.recalled){paGlobal.vidFunctions.recall()}else if(paGlobal.pls[vidPli].vidp.nip){paGlobal.vidFunctions.remove();if(paGlobal.pls[paGlobal.pls[vidPli].vidp.nip]&&paGlobal.pls[paGlobal.pls[vidPli].vidp.nip].s=='pb'){paGlobal.startInject(paGlobal.pls[vidPli].vidp.nip);return}else{paGlobal.log.warn("couldn't find placement "+paGlobal.pls[vidPli].vidp.nip+', passback (no fit) canceled')}}else if(paGlobal.pls[vidPli].vidp.prebid){paGlobal.vidFunctions.prebid()}else if(paGlobal.vidFunctions.vidParams.type=='interstitial'){paGlobal.vidFunctions.close()}},finished:function(){paGlobal.vidFunctions.remove();if(!paGlobal.pls[vidPli].vidp.ko||paGlobal.vidFunctions.vidParams.type=='interstitial'){paGlobal.vidFunctions.close()}else if(paGlobal.pls[vidPli].vidp.dp){paGlobal.vidFunctions.callDisplay()}},remove:function(){try{var vidFinishedEvt=new Event('vidFinished');document.dispatchEvent(vidFinishedEvt)}catch(e){console.warn('failed to fire video finished event!\n'+e)};paGlobal.vidFunctions.stats.removed=!0;vidDiv.style.maxHeight=0;setTimeout(function(){vidDiv.remove()},500);try{document.querySelector('#jw-library-script').remove();document.querySelector('#pa-jw-player').remove()}catch(e){};document.removeEventListener('scroll',paGlobal.vidFunctions.listen.view);paGlobal.log.info('video removed')},getHeight:function(vidDiv){return vidDiv.offsetWidth*0.5625},open:function(){if(paGlobal.vidFunctions.vidParams.type=='interstitial'){vidCont.style.transition='max-height 0.5s';vidCont.style.height='100%';vidCont.style.maxHeight='100%';vidCont.style.width='100%';vidCont.style.maxWidth='100%';vidCont.style.background='rgb(0,0,0,0.8)';vidCont.style.top=0;vidCont.style.bottom=0;vidCont.style.right=0;vidCont.style.left=0;vidDiv.style.zIndex=paGlobal.pls[vidPli].st.zi||100000;vidDiv.style.transition='height: 0.5s';vidDiv.style.maxWidth=paGlobal.pls[vidPli].vidp.mxw+paGlobal.pls[vidPli].vidp.mxwt;vidDiv.style.maxHeight=paGlobal.vidFunctions.getHeight(vidDiv)+'px';vidDiv.style.position='absolute';vidDiv.style.margin='0px auto';vidDiv.style.left=0;vidDiv.style.right=0;vidDiv.style.top=window.innerHeight/2-paGlobal.vidFunctions.getHeight(vidDiv)/2+'px'}else{vidCont.style.maxHeight=paGlobal.vidFunctions.getHeight(vidDiv)+'px';vidCont.style.height=paGlobal.vidFunctions.getHeight(vidDiv)+'px'};paGlobal.vidFunctions.stats.opened=!0},play:function(){paGlobal.vidFunctions.stats.started=!0;paGlobal.vidFunctions.stats.playing=!0;if(paGlobal.vidFunctions.vidParams.type=='interstitial'){paGlobal.vidFunctions.playerInstance.setMute(!1)}else{paGlobal.vidFunctions.playerInstance.setMute(!0)};paGlobal.vidFunctions.listen.mouse();if(!paGlobal.vidFunctions.vidParams.clickToPlay){paGlobal.vidFunctions.playerInstance.play()}},pause:function(){paGlobal.vidFunctions.stats.playing=!1;paGlobal.vidFunctions.playerInstance.pause()},close:function(){if(!vidCont){paGlobal.log.warn("can't close video container, not found");return};paGlobal.vidFunctions.stats.closed=!0;vidCont.style.maxHeight=0;setTimeout(function(){vidCont.remove()},500);paGlobal.log.info('video closed')},recall:function(){paGlobal.vidFunctions.stats.recalled++;paGlobal.vidFunctions.addVideo();paGlobal.log.info('video recalled (#'+paGlobal.vidFunctions.stats.recalled+')')},prebid:function(){paGlobal.log.info('video calling prebid');if(paGlobal.pls[vidPli].vidp.pr.ns){try{var insertMode=paGlobal.pls[vidPli].vidp.im;paGlobal.select(paGlobal.pls[vidPli].vidp.pr.ns)[insertMode](vidCont);paGlobal.log.info('moved prebid video to new selector')}catch(e){paGlobal.log.err('failed to move the prebid video to new selector: '+e)}};var googScript=document.createElement('script');googScript.setAttribute('async','async');googScript.src='https://www.googletagservices.com/tag/js/gpt.js';vidCont.appendChild(googScript);var preScript=document.createElement('script');preScript.src='https://acdn.adnxs.com/prebid/not-for-prod/1/prebid.js';vidCont.appendChild(preScript);var bidders=[];if(paGlobal.pls[vidPli].vidp.pr.teads){bidders.push({pageId:paGlobal.pls[vidPli].vidp.pr.teadsp.pageId,placementId:paGlobal.pls[vidPli].vidp.pr.teadsp.placementId})};if(paGlobal.pls[vidPli].vidp.pr.teads){bidders.push({targetingUUID:paGlobal.pls[vidPli].vidp.pr.unrulyp.targetingUUID,siteId:paGlobal.pls[vidPli].vidp.pr.unrulyp.siteId})};top.vidPreUnits=[{code:'pa-vid-pre-slot',mediaTypes:{video:{context:'outstream',playerSize:[640,480]}},bids:bidders}];top.googletag=top.googletag||{};top.googletag.cmd=top.googletag.cmd||[];top.googletag.cmd.push(function(){top.googletag.pubads().disableInitialLoad()});top.pbjs=top.pbjs||{};top.pbjs.que=top.pbjs.que||[];top.pbjs.que.push(function(){top.pbjs.addAdUnits(vidPreUnits);top.pbjs.requestBids({bidsBackHandler:initAdserver,timeout:1000})});function initAdserver(){if(top.pbjs.initAdserverSet)return;top.pbjs.initAdserverSet=!0;top.googletag.cmd.push(function(){top.pbjs.que.push(function(){top.pbjs.setTargetingForGPTAsync();top.googletag.pubads().refresh()})})};setTimeout(function(){initAdserver()},3000);top.googletag.cmd.push(function(){top.googletag.defineSlot('/90814396/'+paGlobal.pls[vidPli].vidp.pr.code,[1,1],'pa-vid-pre-slot').addService(googletag.pubads());top.googletag.pubads().enableSingleRequest();top.googletag.enableServices()});googletag.cmd.push(function(){googletag.pubads().addEventListener('slotRenderEnded',function(info){if(paGlobal.vidFunctions.stats.prebidSlotRenderRec){return};paGlobal.vidFunctions.stats.prebidSlotRenderRec=!0;if(info.isEmpty==!1){vidCont.style.maxHeight='auto';vidCont.style.maxHeight='';vidCont.style.height='auto';vidCont.style.position='relative';paGlobal.log.info('recieved fill for prebid video')}else if(info.isEmpty==!0){paGlobal.log.info('no fill for prebid video')}})});var preVidDiv=document.createElement('div');preVidDiv.id='pa-vid-pre-slot';var preVidDivScript=document.createElement('script');preVidDivScript.innerHTML=`googletag.cmd.push(function(){googletag.display('pa-vid-pre-slot');})`;try{vidCont.appendChild(preVidDiv);preVidDiv.appendChild(preVidDivScript)}catch(e){paGlobal.log.err('failed to add prebid video div to page: '+e)}},callDisplay:function(){if(paGlobal.vidFunctions.stats.displayCalled){return};paGlobal.log.info('calling display after video');paGlobal.vidFunctions.stats.displayCalled=!0;paGlobal.createInner(vidPli,vidCi)},listen:{imp:function(){if(paGlobal.pls[vidPli].vidp.live){var playerInstance=paGlobal.vidFunctions.playerInstance;paGlobal.vidFunctions.playerInstance.on('adImpression',function(){paGlobal.vidFunctions.stats.filled=!0;paGlobal.vidFunctions.imp()});paGlobal.vidFunctions.playerInstance.on('adError error',function(){paGlobal.vidFunctions.noImp()})}else{paGlobal.vidFunctions.imp();paGlobal.vidFunctions.playerInstance.on('error adError',function(){paGlobal.vidFunctions.noImp()})}},mouse:function(){vidDiv.onmouseenter=function(){if(paGlobal.vidFunctions.vidParams.userClicked){paGlobal.vidFunctions.playerInstance.setMute(!1)}}},view:function(){if(paGlobal.vidFunctions.inView()){if(!paGlobal.vidFunctions.stats.added){paGlobal.vidFunctions.addVideo()}else{if(paGlobal.vidFunctions.stats.started){if(paGlobal.vidFunctions.stats.playing){}else{if(!paGlobal.vidFunctions.stats.finished){if(!paGlobal.vidFunctions.vidParams.clickToPlay){paGlobal.vidFunctions.play()}}else{}}}else{}}}else{if(paGlobal.vidFunctions.stats.opened&&!paGlobal.vidFunctions.stats.removed){if(paGlobal.vidFunctions.stats.started){if(paGlobal.vidFunctions.stats.playing){paGlobal.vidFunctions.pause()}}else{}}else{}}}},inViewCallback:function(){}},video:function(pli,ci,ui){vidPli=pli;vidCont=paGlobal.cData[ci].div;vidCi=ci;vidDiv=paGlobal.data[ui].div;vidUi=ui;(paGlobal.vidFunctions.stats={vidCalled:!0,position:'inContent',innerAdded:!1,opened:!1,started:!1,playing:!1,videoClosed:!1,recalled:0,removed:!1,mute:!0}),(paGlobal.vidFunctions.vidParams={type:paGlobal.pls[vidPli].vidp.t,position:paGlobal.pls[vidPli].vidp.p,atSelector:paGlobal.pls[vidPli].vidp.fas,maxRecall:paGlobal.pls[vidPli].vidp.nor,keepOpen:paGlobal.pls[vidPli].vidp.ko,displayAfter:paGlobal.pls[vidPli].vidp.dp,userClicked:!1,prebid:paGlobal.pls[vidPli].vidp.prebid,clickToPlay:paGlobal.pls[vidPli].vidp.ctp});if(paGlobal.pls[vidPli].vidp.prebid){paGlobal.vidFunctions.vidParams.prebidParams=paGlobal.pls[vidPli].vidp.prebidParams};if(paGlobal.pls[vidPli].vidp.t=='interstitial'){paGlobal.vidFunctions.stats.position='interstitial'};function toggleUserClicked(){paGlobal.vidFunctions.vidParams.userClicked=!0;document.removeEventListener('click',toggleUserClicked)};document.addEventListener('click',toggleUserClicked);if(!vidCont){paGlobal.log.warn("cant add video, as container wasn't fount");return};paGlobal.vidFunctions.listen.view(paGlobal.pls[vidPli],vidCont,vidDiv);document.addEventListener('scroll',paGlobal.vidFunctions.listen.view)},urlChangeListener:function(){var wftfuc=!1;currentUrl=location.href;setInterval(function(){if(currentUrl!=location.href){urlChanged()};function urlChanged(){if(wftfuc){return};paGlobal.log.info('url change detected');currentUrl=location.href;wftfuc=!0;try{for(let i of top.document.querySelectorAll('[id^=ad_is]')){try{i.remove()}catch(e){}}}catch(e){};try{top.document.querySelector('.ut_container').remove()}catch(e){};for(let div of paGlobal.selectAll('.pa-unit-global')){var pli=parseInt(div.classList[1].split('-')[div.classList[1].split('-').length-1]);var ci=parseInt(div.parentElement.id.split('-')[div.id.split('-').length-1]);var ui=parseInt(div.id.split('-')[div.id.split('-').length-1]);paGlobal.remove(pli,ci,ui,'inner')};for(let pli of paGlobal.IIntsRun){clearInterval(paGlobal.plData[pli].iOnSelector.interval)};paGlobal.plData={};paGlobal.IIntsRun=[];try{delete paGlobal.vidFunctions.stats}catch(e){paGlobal.vidFunctions.stats={}};paGlobal.getPlacements();wftfuc=!1}},paGlobal.urlCLTo||500)},getPlacements:function(){var plReq=new XMLHttpRequest();plReq.open('GET','https://powerad.ai/pubPls/?width='+paGlobal.getScreenDimensions().w+'&url='+encodeURIComponent(top.window.location.href),!0);plReq.withCredentials=!0;plReq.send();plReq.onreadystatechange=function(){if(plReq.readyState==4){try{var pls=JSON.parse(plReq.response)}catch(e){paGlobal.log.err('failed to parse pls\n'+e);paGlobal.successRes=!1;return};if(pls.err){paGlobal.log.warn('recieved an error: '+pls.err);paGlobal.successRes=!1;return};paGlobal.pls=pls.pls;paGlobal.successRes=!0;if(pls.adLight){paGlobal.adLight=!0};if(!paGlobal.debug&&pls.debug){paGlobal.debug=pls.debug};if(pls.gatID){var gatS=document.createElement('script');gatS.src='https://www.googletagmanager.com/gtag/js?id=UA-'+pls.gatID;document.querySelector('head').appendChild(gatS);window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)};gtag('js',new Date());gtag('config','UA-'+pls.gatID)};if(pls.bl){paGlobal.bl=pls.bl};if(pls.debug){var rs=[],pbs=[],ms=[];for(let pli of Object.keys(paGlobal.pls)){switch(paGlobal.pls[pli].s){case 'r':rs.push(pli);break;case 'pb':pbs.push(pli);break;case 'm':ms.push(pli);break}};paGlobal.log.info('recieved pls: \nActive: '+rs.join(', ')+'\nPB: '+pbs.join(', ')+'\nM: '+ms.join(', ')+'\n'+(pls.geoInfo||''))};paGlobal.atvc=pls.atvc||!1;paGlobal.us_p='1---';if(pls.ca){paGlobal.log.info('In California, CCPA functions in effect');if(pls.ccpaAutoOut){paGlobal.us_p='1NYN';paGlobal.log.info('Pub set to CCPA Auto Opt-Out.')}else{function getCCPAMan(){paGlobal.us_p=getCookie('usprivacy')||getCookie('us_privacy')||'1---'};if(top.window.__uspapi){paGlobal.log.info('Found IAB CCPA Framework functions on page from pub');try{top.window.__uspapi('getUSPData',1,function(us_p,s){if(s){paGlobal.us_p=(us_p&&us_p.uspString.toUpperCase())||'1---'}else{getCCPAMan()}})}catch(e){getCCPAMan()}}else{paGlobal.log.info("Couldn't find IAB CCPA Framework functions on page from Pub, will try to get cookie manually");getCCPAMan()}}};top.paGlobal.__uspapiString="window.__uspapi = top.window.__uspapi || function(c,v,cb){switch(c.toLowerCase()){case 'getuspdata':try{cb({uspString:'"+(top.paGlobal.us_p||'')+"',version:1},true)}catch(e){return;}break;default:try{cb({uspString:'"+(top.paGlobal.us_p||'')+"',version:1},true)} catch(e){return;}return;}}";var readyToInjectTS=new Date().getTime();if(document.readyState=='loading'){document.addEventListener('DOMContentLoaded',function(){paGlobal.log.info('lost for body wait: '+(new Date().getTime()-readyToInjectTS));for(let pli of Object.keys(paGlobal.pls)){if(paGlobal.pls[pli].s=='r'){paGlobal.startInject(pli)}}})}else{for(let pli of Object.keys(paGlobal.pls)){if(paGlobal.pls[pli].s=='r'){paGlobal.startInject(pli)}}};if(pls.urlCL&&!paGlobal.urlChangeListenerAdded){paGlobal.urlChangeListenerAdded=!0;paGlobal.urlChangeListener()}}}},checkBl:function(f){if(!paGlobal.bl){return!0};if(f.contentDocument&&f.contentDocument.documentElement){for(let i of paGlobal.bl){if(f.contentDocument.documentElement.innerHTML.toLowerCase().indexOf(i.toLowerCase())!=-1){return!1}};for(let fr of f.contentDocument.querySelectorAll('iframe')){if(!paGlobal.checkBl(fr)){return!1}};return!0}}};function callUnitMan(pli){console.log('call unit manually ('+pli+')');if(paGlobal.successRes){if(paGlobal.pls[pli]&&paGlobal.pls[pli].s=='m'){paGlobal.startInject(pli)}else{console.warn("couldn't find placement: "+pli+' in manual placement list')}}else{console.warn('called placement (pl '+pli+') before placements were received, will call again once placements are recieved');var callManAdAfterLoadInt=setInterval(function(){if(paGlobal.successRes){if(paGlobal.pls[pli]&&paGlobal.pls[pli].s=='m'){paGlobal.startInject(pli);clearInterval(callManAdAfterLoadInt)}}},50);setTimeout(function(){clearInterval(callManAdAfterLoadInt);if(paGlobal.successRes){if(!paGlobal.plData[pli]){if(paGlobal.pls[pli]&&paGlobal.pls[pli].s=='m'){paGlobal.startInject(pli)}else{console.warn("couldn't find placement: "+pli+' in manual placement list')}}}else{console.warn('failed to get placements withing timeout for manual call, canceling')}},1500)}};function getCookie(name){var result='';var name=name+'=';var cookieArray=document.cookie.split(';');for(let i of cookieArray){removeSpaces(i);if(i.indexOf(name)==0){result=i.substring(name.length,i.length);break}};return result};function removeSpaces(t){for(let a=0;a<100;a++){if(t.charAt(0)==' '){t=t.substring(1)}else{break}};return t};paGlobal.getPlacements()
