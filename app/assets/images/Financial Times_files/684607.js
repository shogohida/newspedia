"use strict";!function(){var l,v,u,p,f,i,c,r={},m=function(){function e(e,t,r,o,n){if(v=e,i=o,f=r,l=t,u=n)p=u.storage;else if("ls"===e.storage)try{p=new(brandmetrics.getModule(32))(v,l,!1)}catch(e){p=void 0}}return e.prototype.isReady=function(){return c&&c.isInitiated},e.prototype.hasConsent=function(){return!0},e.prototype.addEventListener=function(e){"ready"===e.event&&this.isReady()?e.handler({api:this}):l.on(e)},e.prototype.triggerSurvey=function(o){var d=this,u=function(e,t,r){o&&o.callback&&o.callback(e,t,r)},c={mid:(o=o||{}).mid,bid:o.bid,callback:o.callback,autoRender:void 0===o.autoRender||o.autoRender,force:void 0!==o.force&&o.force,isTest:void 0!==o.isTest&&o.isTest,dtName:o.dtName},e=[];if("none"!==v.storage&&p){var t=p.state(),r=0,n=0;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];!1===a.isAnswered&&a.nbrOfSurveys<v.survey.max&&Date.now()-a.lastSurvey>1e3*v.survey.interval*60&&(r=Math.max(r,a.lastSurvey),Date.now()-a.lastSurvey<6048e5&&(n+=a.nbrOfSurveys),e.push(a))}(n>=v.survey.maxTot||Date.now()-r<1e3*v.survey.intervalTot*60)&&u(!1)}var s=Math.random()<=v.surveyRandomization;c.callback||c.mid||c.isTest||c.force||s?function(e,t){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=t||null;var o=document.getElementsByTagName("script")[0];if(null==o||null==o.parentNode)throw new Error("can't find script tag");o.parentNode.insertBefore(r,o)}(f.GetConfigUrl(c.mid||null,c.isTest||!1,c.force,c.dtName,e),function(){var e=brandmetrics.getModule(-1),t=!1,r=!1,o=!1;if(void 0!==e)for(var n=0,i=e.surveys;n<i.length;n++){var a=i[n];o=!0;var s=d.createSurvey(a);u(!0,a,s),t=!0,c.autoRender&&(s.show(),r=!0)}t||u(!1),l.emit("surveyloaded",{available:o,showed:r})}):s||l.emit("surveyloadskipped",c)},e.prototype.createSurvey=function(e){if(void 0===e||void 0===e.measurementId||void 0===e.displayOption)throw new Error("");if(i){var t=i(f,e,l,p||(u?u.storage:void 0));return r[e.measurementId]=t}throw new Error("brandmetrics: This configuration does not support creating surveys.")},e.prototype.addMetadata=function(e){if(void 0===e||void 0===e.name||void 0===e.value||"string"!=typeof e.value)throw new Error("Invalid Argument");f.upsertParam(e.name,e.value)},e.prototype.setDoNotTrack=function(){var e=localStorage;e&&(e.setItem("__bmdnt","true"),e.removeItem("__bm_m"),e.removeItem("__bm_s")),f.postOptout()},e.prototype.triggerExposure=function(e){var t=0<v.listeners.filter(function(e){return"api"===e.type}).length;if(void 0===u||!t)throw new Error("brandmetrics: triggerExposure only works when an API- listener is configured.");u.triggerApiExposure(e)},e.prototype.collectAds=function(e){},e.prototype.getState=function(){return p?p.state():void 0},e.prototype.reinitialize=function(){void 0!==u&&u.reinitialize()},e}();window.brandmetrics.register({id:1,ctor:function(e,t,r,o,n,i,a){var s=new m(e,t,r,o,n),d={bm:s,collection:u,options:e,utils:t,client:r,callback:function(){a(s),l.emit("ready",{api:s})}};switch(i){case 0:c=new(brandmetrics.getModule(131072))(d);break;case 1:c=new(brandmetrics.getModule(262144))(d);break;default:throw new Error("Failed to start brandmetrics, the mode: "+i+" is not defined.")}c.start()}})}();"use strict";var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(){var o,v,m,g,h,a,i=!1,w=[],y=[],b=function(t,s,o){t.forEach(function(t){var e;switch(t.status){case 1:E(t);var n=Math.floor((t.last-t.start)/1e3),i=s.storage.updateExp(t.mid,t.uid,0,n);g.postEvent(11,t.mid,i,{pid:t.uid,ts:(n+1).toString()})}var r=w.indexOf(t);o?(null===(e=m)||void 0===e||e.unObserve(t.element),w.splice(r,1)):w[r]={status:3,uid:t.uid,mid:t.mid,element:t.element}}),c(s.storage)},u=function(t,e){var n=w.indexOf(t),i=e.storage.updateExp(t.mid,t.uid,1,1);g.postEvent(10,t.mid,i,{pid:t.uid}),w[n]=__assign(__assign({},t),{status:1,start:Date.now(),last:Date.now()})},E=function(t){var e=Date.now(),n=h.getIdleTimeout();if(e-t.last>n+1){var i=t.last-t.start;t.start=e-i-n}t.last=e},l=function(r,s){for(var t=function(t){var e,n,i=(e=t.element,0<(n=s.filter(function(t){return t.element===e})).length&&n[0]);switch(t.status){case 1:i&&!i.inView?b([t],r,!1):E(t);break;case 0:case 3:i&&i.inView&&u(t,r)}},e=0,n=w;e<n.length;e++){t(n[e])}c(r.storage)},c=function(t){var e=w.map(function(t){return 1===t.status?{mid:t.mid,uid:t.uid,start:t.start,last:t.last}:null});t.setSession(e.filter(function(t){return null!==t}))},s=function(u,l){var t,c=!1,d=null;if(l.element instanceof HTMLElement)d=l.element;else{var e=document.querySelectorAll(h.escapeSelector("#"+l.element));d=0<e.length?e[e.length-1]:null}for(var f=null!==d?w.filter(function(t){return t.element===d}):[],p=[],n=function(a){for(var t=function(t){var e=!0;for(var n in t)if(t.hasOwnProperty(n)){if("ntv"===t.source&&"urlPattern"===n||"meta"===n)continue;l.key[n]!=t[n]&&(e=!1)}if(e){var i=function(e,t){var n;if(void 0===t)switch(e.source){case"apn":n=["creativeId"];break;case"gpt":n=["creativeId","lineItemId"];break;case"pbj":n=["dealId"];break;case"ntv":case"api":case"slot":n=["key"];break;default:throw Error("Constructing id's from source: "+e.source+" is not implemented.")}else n=t;return n.map(function(t){return e[t]}).join(":")}(l.key,a.uks);if(t.meta&&!0===t.meta.collect&&l.ad&&y.indexOf(i)<0&&y.push(i),g.postEvent(12,a.id,void 0,{pid:i}),void 0===m||null===d){var r=u.storage.updateExp(a.id,i,1,1);g.postEvent(10,a.id,r,{pid:i})}else{c=!0;var s=w.filter(function(t){return 1===t.status&&t.mid===a.id&&(d===t.element||t.element.id&&d.querySelector(h.escapeSelector("#"+t.element.id))||d.id&&t.element.querySelector(h.escapeSelector("#"+d.id)))})[0];if(s)E(s);else{if(0<f.length){var o=f.filter(function(t){return t.uid!==i});b(o,u,!0)}w.push({status:0,mid:a.id,uid:i,element:d}),p.push(d)}}}},e=0,n=a.keys;e<n.length;e++){t(n[e])}},i=0,r=v.measurements;i<r.length;i++){n(r[i])}for(var s=0,o=p;s<o.length;s++){var a=o[s];null===(t=m)||void 0===t||t.observe(a)}!c&&0<f.length&&b(f,u,!0)},d=function(t,e,n){n=n?2*n:100,t.isReady()?e():setTimeout(function(){return d(t,e,n)},n)},f=function(t){a.clean(v.measurements);for(var e=0,n=t;e<n.length;e++){var i=n[e],r=Math.floor((i.last-i.start)/1e3),s=a.updateExp(i.mid,i.uid,0,r);g.postEvent(11,i.mid,s,{pid:i.uid,ts:r.toString()})}a.setSession([])},n=function(t){o.forEach(function(t){return t.setActive(!1)}),b(w.filter(function(){return!0}),t,!0),f(a.getSession())},r=function(e){o.filter(function(t){return t.isReady()}).map(function(t){return t.getDisplayedSlots()}).forEach(function(t){t.forEach(function(t){return s(e,t)})}),o.forEach(function(t){return t.setActive(!0)})},p=function(t,e){if(i)switch(t){case 0:r(e);break;case 1:n(e)}},S=function(t){var e,n=brandmetrics.getModule(32768),i=brandmetrics.getModule(67108864),r=brandmetrics.getModule(16384),s=brandmetrics.getModule(8192);return(window.omid3p||window.oo)&&i?e=new i(t):window.mraid&&n?e=new n(t):window.IntersectionObserver&&r?e=new r(t):s&&(e=new s(t)),e},t=function(){function t(t,e,n,i,r){var s=this;this.storage=r,a=r,v=t,g=e,o=i,m=S({collection:this,callback:l,utils:h=n}),h.on({event:"pagestatus",handler:function(t){p(t,s)}})}return t.prototype.isInitiated=function(){return null!=o&&null!=this.storage},t.prototype.reinitialize=function(){var e=this;n(this),r(this),o.forEach(function(t){t.slotDisplayed(function(t){return s(e,t)})})},t.prototype.start=function(){var r=this;f(a.getSession()),f(a.getAndRemoveOutdatedSessions());for(var t=function(i){d(i,function(){for(var t=0,e=i.getDisplayedSlots();t<e.length;t++){var n=e[t];s(r,n)}i.slotDisplayed(function(t){return s(r,t)})})},e=0,n=o;e<n.length;e++){t(n[e])}i=!0},t.prototype.getState=function(){return this.storage.state()},t.prototype.triggerApiExposure=function(t){s(this,{key:{source:"api",key:t.key},element:t.element})},t}();window.brandmetrics.register({id:2,ctor:t})}();"use strict";var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)n[o]=i[a];return n};!function(){var r=/^#([0-9])/,n=[],a=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];n.forEach(function(e){e.event===t&&e.handler.apply(e,r)})};!function(){var e,t=!0,r=function(e,t,r){e.addEventListener&&e.addEventListener(t,r)},n=function(){t||(a("pagestatus",0),t=!0),clearTimeout(e),e=setTimeout(o,3e4)},o=function(){t&&(a("pagestatus",1),t=!1)},i=window;r(i,"load",n),r(i,"touchstart",n),r(i,"keypress",n),r(i,"scroll",n),r(i,"pagehide",o),r(i,"beforeunload",o),r(document,"visibilitychange",function(){document.hidden?o():n()}),i.IntersectionObserver&&new IntersectionObserver(function(){n()},{threshold:.1}).observe(document.documentElement);n()}();var c=function(e){return Math.abs((e[2]-e[0])*(e[1]-e[3]))},i=new Array,d=function(e,t,r){if(0<i.length&&(null===e||e.isReady())){var n=i.shift();try{s(e,n,r)}catch(e){var o="Error in command: "+n.cmd+", msg: "+e;throw t.postDiagnostics(o),new Error(o)}d(e,t,r)}},s=function(e,t,r){var n,o,i,a,c,d,s;if(null!==e&&!e.isReady())throw new Error("Try to execute commands before initiated");switch(t.cmd=void 0===t.cmd?"":t.cmd.toLowerCase(),t.cmd){case"_loadsurvey":null===(n=e)||void 0===n||n.triggerSurvey(t.val);break;case"_forcesurvey":null===(o=e)||void 0===o||o.triggerSurvey({mid:t.val.mid,force:!0,dtName:t.val.style});break;case"_querysurvey":if(void 0===t.val||void 0===t.val.callback)throw new Error("No callback defined");null===(i=e)||void 0===i||i.triggerSurvey({autoRender:!1,callback:t.val.callback});break;case"_addmetadata":var u=t.val;void 0===u.value&&void 0!==u.val&&(u.value=u.val),null===(a=e)||void 0===a||a.addMetadata(u);break;case"_setdonottrack":null===(c=e)||void 0===c||c.setDoNotTrack();break;case"_triggerexposure":if(void 0===t.val)throw new Error("The command _triggerexposure needs a value.");null===(d=e)||void 0===d||d.triggerExposure(t.val);break;case"_addeventlistener":null!==e?e.addEventListener(t.val):r.on(t.val);break;case"_reinitialize":null===(s=e)||void 0===s||s.reinitialize();break;default:throw new Error("unknown cmd")}},e=function(){function e(){this.guid=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},this.escapeSelector=function(e){var t=r.exec(e);return t&&(e=e.replace(t[0],"#\\3"+t[1]+" ")),e}}return e.prototype.getPageRect=function(){var e=document.documentElement.scrollLeft||document.body.scrollLeft||window.pageXOffset,t=document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset;return[e,t,e+("innerWidth"in window?window.innerWidth:document.body.clientWidth),t+("innerHeight"in window?window.innerHeight:document.body.clientHeight)]},e.prototype.getElementRect=function(e){for(var t=0,r=0,n=e.offsetWidth,o=e.offsetHeight;null!==e.offsetParent;)t+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return[t,r,t+n,r+o]},e.prototype.rectsIntersect=function(e,t){return e[0]<t[2]&&e[2]>t[0]&&e[1]<t[3]&&e[3]>t[1]},e.prototype.rectsRatio=function(e,t){var r=0;if(this.rectsIntersect(e,t)){var n=Math.max(e[0],t[0]),o=Math.min(e[2],t[2]),i=Math.max(e[1],t[1]),a=Math.min(e[3],t[3]);r=c([n,i,o,a])/c(t)}return r},e.prototype.inView=function(e){var t=this.getPageRect(),r=this.getElementRect(e);return this.inViewByRatio(this.rectsRatio(t,r))||this.inViewByRatio(this.rectsRatio(r,t))},e.prototype.inViewByRatio=function(e){return.5<=e},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];a.apply(void 0,__spreadArrays([e],t))},e.prototype.on=function(e){n.push(e)},e.prototype.un=function(e){for(var t=n.length-1;0<=t;t--){var r=n[t];r.event===e.event&&r.handler===e.handler&&n.splice(t,1)}},e.prototype.getIdleTimeout=function(){return 3e4},e.prototype.initProcessing=function(r,n){var o=this;window.brandmetrics.cmd=window.brandmetrics.cmd||window._brandmetrics||[],window._brandmetrics||(window._brandmetrics=window.brandmetrics.cmd),window.brandmetrics.cmd.push=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.push.apply(i,e),d(r,n,o),Array.prototype.push.apply(this,e)},i.push.apply(i,window.brandmetrics.cmd)},e.prototype.process=function(e,t){d(e,t,this)},e}();window.brandmetrics.register({id:4,ctor:e})}();"use strict";var __extends=this&&this.__extends||function(){var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();!function(){var c,s,a,p=function(t,e){var n=[];for(var r in e=e||{},a)if(a.hasOwnProperty(r)&&(0===t.length||0<=t.indexOf(r))||e.hasOwnProperty(r)){var o=a[r],i=e[r]||o.value||(void 0!==o.func?o.func():void 0);null!=i&&""!==i&&n.push(r+"="+u(i))}return n.join("&")},u=function(t){return"function"==typeof encodeURIComponent?encodeURIComponent(t):window.escape(t)},e=function(){var t=document.location.ancestorOrigins&&0<document.location.ancestorOrigins.length?document.location.ancestorOrigins:[window.document.location.href],e=t[t.length-1],n=document.createElement("a");return n.href=e,n.host||""},d=function(t,e){(new Image).src=c.baseUrl+"/"+t+"?"+e},t=function(){function t(t){s={},a={siteid:{value:(c=t).siteId},toploc:{func:function(){return e()}},test:{value:c.isTest?"true":void 0},qdata:{},mid:{},pid:{},meta:{},state:{},ms:{},forced:{},msg:{},eid:{},ts:{},rt:{},rnd:{func:function(){return Math.floor(9999001*Math.random()+1e3).toString()}},adkey:{},dtname:{}}}return t.prototype.GetBaseUrl=function(){return c.baseUrl},t.prototype.GetConfigUrl=function(t,e,n,r,o){void 0===e&&(e=!1),void 0===n&&(n=!1);var i="";if(0<o.length)for(var s=0,a=o;s<a.length;s++){var u=a[s];i=i+(u.uid+";"+u.mid+";"+u.pixels.map(function(t){return t.uid+","+t.exp}).join(";"))+"|"}var d=p([],{test:e?"true":void 0,forced:n?"true":void 0,dtname:r,mid:null===t?void 0:t,ms:i});return c.baseUrl+"/c.js?"+d},t.prototype.GetTemplateUrl=function(t,e){var n={mid:t};e&&(n.dtname=e);var r=p(["siteid","toploc","test"],n);return(c.cdnUrl?c.cdnUrl:c.baseUrl)+"/s.html?"+r},t.prototype.upsertParam=function(t,e){s[t]=e},t.prototype.postAd=function(t,e,n,r){var o=p([],{mid:t,adkey:e}),i=new XMLHttpRequest;i.open("POST",c.baseUrl+"/ac?"+o,!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify({content:n,key:r}))},t.prototype.postAnswer=function(t,e,n,r){var o="";void 0!==n&&(o=n.uid+";"+n.nbrOfSurveys+";"+n.pixels.map(function(t){return t.uid+","+t.exp+","+t.time}).join(";"));var i=p([],{test:"true"===(r=r||{}).test?"true":void 0,pid:r.pid,forced:"true"===r.forced?"true":void 0,dtname:r.dtname,mid:t,qdata:e,state:o,meta:function(){var t=[];for(var e in s)if(s.hasOwnProperty(e)){var n=s[e];null!=n&&""!==n&&t.push(e+"="+u(n))}return t.join("&")}()});d("a",i)},t.prototype.postDiagnostics=function(t){if(c.logErrors){var e=p(["rnd"],{msg:t});d("diagnostics",e)}},t.prototype.postOptout=function(){if(void 0!==c.siteId){var t=p(["siteid"]);d("optout",t)}},t.prototype.postEvent=function(t,e,n,r){var o=function(t,e,n,r){r=r||{};var o="";if(void 0!==n){for(var i=0,s=0,a=n.pixels;s<a.length;s++)i+=a[s].exp;o=""+i}return p([],{test:"true"===r.test?"true":void 0,forced:"true"===r.forced?"true":void 0,dtname:r.dtname,pid:r.pid,eid:t.toString(),ts:r.ts,state:o,mid:e})}(t,e,n,r);d("i",o)},t.prototype.GetRedirectUrl=function(t){var e=p([],{siteid:c.siteId,rt:t});return c.baseUrl+"/r?"+e},t}(),n=function(n){function t(t){var e=n.call(this,t)||this;return e._messageClient=new(brandmetrics.getModule(8388608)),e}return __extends(t,n),t.prototype.postEvent=function(t,e,n,r){var o={type:2,event:1,eventType:t,state:n,mid:e,props:r};this._messageClient.send(o)},t}(t);window.brandmetrics.register({id:1048576,ctor:n}),window.brandmetrics.register({id:8,ctor:t})}();"use strict";!function(){var c,p,l,y,f,t="created",r=!1,i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},s=function(e){try{if(void 0!==e.data.req&&"get"===e.data.req){var t=void 0;"inject"===c.displayOption.type&&(t=c.displayOption.displayTypeName);var n={key:e.data.key,iframeCss:c.displayOption.iframeCss,url:p.GetTemplateUrl(c.measurementId,t)};return void e.source.postMessage(n,"*")}var i=e.data;if(e.origin!==p.GetBaseUrl()&&"null"!==e.origin)return void("string"==typeof e.data&&-1<e.data.indexOf(c.measurementId)&&p.postDiagnostics("Message origin not expected "+e.origin));var r=function(e){if("string"!=typeof e||-1===e.indexOf(c.measurementId))return null;var t=e.split("|"),n=t[1];switch(n){case"closed":return{mid:t[0],type:n};case"completed":var i,r="true",s="";return 2<t.length&&-1<(i=t[2]).indexOf("closeSurvey")&&(r=i.substring(i.lastIndexOf("=")+1)),3<t.length&&-1<(i=t[3]).indexOf("closeSurveyTimeout")&&(s=i.substring(i.lastIndexOf("=")+1)),{mid:t[0],type:n,closeSurvey:r,closeSurveyTimeout:s};case"rendered":var o=t[2],a=o.substring(o.lastIndexOf("=")+1),d="";if(3<t.length){var u=t[3];d=u.substring(u.lastIndexOf("=")+1)}return{mid:t[0],type:n,size:a,surveyType:d};case"resize":return{mid:t[0],type:n,size:e.substring(e.lastIndexOf("=")+1)};case"answer":return{mid:t[0],type:n,answer:t[2]};case"redirect":return{target:t[2],type:n};case"updateStyle":return{mid:t[0],type:n,style:e.substring(e.lastIndexOf("=")+1)};case"requestClientSize":return{mid:t[0],type:n};default:return null}}(i);if(null===r)return;var s=void 0===y?void 0:y.state()[c.measurementId];switch(r.type){case"rendered":p.postEvent(1,r.mid,s,c.props);var o=f.element(),a=!1;if(r.surveyType&&(a="2"===r.surveyType||"3"===r.surveyType),a){f.resize(r.size),l.emit("surveyrendered",{});break}m(o),f.resize(r.size),void 0!==o&&(window.addEventListener("resize",function(){return v()}),window.addEventListener("scroll",function(){return v()}),v()),l.emit("surveyrendered",{});break;case"resize":f.resize(r.size),m(f.element());break;case"answer":var d=y?y.updateSrv(c.measurementId,!0):void 0;p.postAnswer(r.mid,r.answer,d,c.props),l.emit("surveyanswered",{});break;case"completed":if(p.postEvent(3,r.mid,s,c.props),"true"===r.closeSurvey){var u=Number(r.closeSurveyTimeout);!isNaN(u)&&0<u?setTimeout(function(){f.close()},u):f.close()}break;case"closed":p.postEvent(4,r.mid,s,c.props),f.close(),l.emit("surveyclosed",{});break;case"redirect":window.location.href=p.GetRedirectUrl(r.target);break;case"updateStyle":f.updateStyle(r.style);break;case"requestClientSize":f.requestClientSize(r.mid)}}catch(e){p.postDiagnostics("Error in handleMessage, "+e)}},m=function(e){if(void 0!==e){var t="";for(var n in i)""!==e.style.getPropertyValue(n)&&(t=i[n]);""!==t?e.addEventListener(t,function(){return v()},!1):v()}},v=function(){try{var e=f.element();if(!r&&void 0!==e){var t=l.getPageRect(),n=l.getElementRect(e);if(.5<=l.rectsRatio(t,n)){r=!0;var i=y?y.updateSrv(c.measurementId,!1):void 0;p.postEvent(2,c.measurementId,i,c.props)}}}catch(e){p.postDiagnostics("Error in InView, "+e),r=!0}},n=function(){var e,t=c,n=document.createElement("iframe");return"inject"===t.displayOption.type&&t.displayOption.sandboxProps?n.sandbox.value=t.displayOption.sandboxProps+" allow-scripts":n.sandbox.value="allow-scripts",n.setAttribute("data-bmsurvey",""),n.height="0","inject"===c.displayOption.type&&(e=c.displayOption.displayTypeName),n.style.cssText=c.displayOption.iframeCss,n.src=p.GetTemplateUrl(t.measurementId,e),n.scrolling="no",n},o=function(e,t,n){if(void 0!==window.apntag&&window.apntag.loaded){var i=window.apntag,r={};n?(r[e]=t,i.setKeywords(n,r)):i.anq.push(function(){(r=i.requests?i.requests.keywords:{})[e]=t,i.setPageOpts({keywords:r})})}else setTimeout(function(){o(e,t,n)},200)},a=function(t,e){if(void 0!==window.googletag&&window.googletag.apiReady){var n=window.googletag;if(t){var i=n.pubads().getSlots().filter(function(e){return e.getSlotElementId()===t})[0];i&&i.setTargeting(e,"yes")}else n.pubads().setTargeting(e,"yes"),n&&n.pubads&&n.pubads().getTargetingKeys}else setTimeout(function(){a(t,e)},200)},d=function(){function e(e){this._dc=e}return e.prototype.state=function(){return t},e.prototype.resize=function(){},e.prototype.element=function(){},e.prototype.close=function(){t="closed"},e.prototype.updateStyle=function(){},e.prototype.requestClientSize=function(e){},e.prototype.show=function(){var e=this._dc.targetKey||"brandmetrics-survey",t=this._dc.adSlot;a(t,e)},e}(),u=function(){function e(e){this._dc=e}return e.prototype.state=function(){return t},e.prototype.resize=function(){},e.prototype.element=function(){},e.prototype.close=function(){t="closed"},e.prototype.updateStyle=function(){},e.prototype.requestClientSize=function(e){},e.prototype.show=function(){var e=this._dc.targetKeyword||"kw",t=this._dc.targetValue||"brandmetrics-survey",n=this._dc.adSlot;o(e,t,n)},e}(),g=function(){function e(e){this._dc=e,this._iframe=n()}return e.prototype.state=function(){return t},e.prototype.resize=function(e){var t=null,n=null;if(0<e.indexOf(",")){var i=e.split(",");t=i[0],n=i[1]}else t=e;this._iframe.height=t+"px",n&&(this._iframe.width=n+"px")},e.prototype.element=function(){return this._iframe},e.prototype.close=function(){t="closed",this._iframe.style.display="none"},e.prototype.updateStyle=function(e){for(var t=0,n=e.split(";");t<n.length;t++){var i=n[t];if(""!==i.trim()){var r=i.split(":");this._iframe.style.setProperty(r[0].trim(),r[1].trim())}}},e.prototype.requestClientSize=function(e){var t;this._iframe.contentWindow&&this._iframe.contentWindow.postMessage(e+"|clientsize|"+(t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)+","+t),"*")},e.prototype.show=function(){if("block"!==this._iframe.style.display){var e=function(e){var t=e.selector;if(!t)throw new Error("No targetElement configured");var n=(!0===e.onTop?window.top.document:window.document).querySelectorAll(l.escapeSelector(t));if(n.length<=0)throw new Error("can't find target element: "+t);return n[n.length-1]}(this._dc);null==e.querySelector("iframe[data-bmsurvey]")&&(!function(e,t,n){var i=t.offsetWidth;e.style.cssText=n.iframeCss.replace("{{targetwidth}}",i.toString());var r=!1;try{""!=("before"===n.injectType?"beforebegin":"after"===n.injectType?"afterend":"prepend"===n.injectType?"afterbegin":"append"===n.injectType?"beforeend":"")&&(t.insertAdjacentElement("beforebegin",e),r=!0)}catch(e){}!1===r&&t.appendChild(e)}(this._iframe,e,this._dc),this._iframe.style.display="block")}},e}();window.brandmetrics.register({id:16,ctor:function(e,t,n,i){p=e,l=n,y=i,"inject"===(c=t).displayOption.type&&!0===c.displayOption.onTop?window.top.addEventListener("message",s,!1):window.addEventListener("message",s,!1);var r=c.displayOption;return f="dfp"===r.type?new d(r):"apn"===r.type?new u(r):"inject"===r.type?new g(r):{state:function(){return"failed"},resize:function(){},element:function(){},show:function(){},close:function(){},updateStyle:function(){},requestClientSize:function(){}}}})}();"use strict";!function(){var s,f,h,i,m="__bm_m",u="__bm_s",v={},o=!1,y=function(e){if(void 0===e&&(e=!1),o||e){var t=h.getItem(m),r={};try{r=null!=t?f.DeserializeMeasurements(t):{}}catch(e){h.removeItem(m)}v=r}return v},t=function(){return o?u+"#"+i:u},a=function(){function e(){this._data={},this.length=0}return e.prototype.calcLength=function(){this.length=Object.keys(this._data).length},e.prototype.getItem=function(e){return this._data.hasOwnProperty(e)?this._data[e]:null},e.prototype.setItem=function(e,t){var r=this._data[e]=String(t);return this.calcLength(),r},e.prototype.removeItem=function(e){var t=delete this._data[e];return this.calcLength(),t},e.prototype.clear=function(){return this._data={},this.calcLength(),this._data},e.prototype.key=function(e){var t=Object.keys(this._data);return t.length<e?t[e]:null},e}(),e=function(){function e(e,t,r){f=new(brandmetrics.getModule(524288)),s=t,o=r;var n="__bm_ls_check";try{localStorage.setItem(n,n),localStorage.removeItem(n),h=localStorage}catch(e){h=new a}v=y(!0),i=Math.floor(1e6*Math.random())}return e.prototype.clean=function(e){var r={},n=y(),i=0,t=function(t){n.hasOwnProperty(t)&&(i++,void 0!==e.filter(function(e){return e.id===t})[0]&&(r[t]=n[t]))};for(var o in n)t(o);(0!==e.length&&i-e.length==1||(i-e.length)/i<=.2)&&(n=r);var a=Date.now();for(var o in n)if(n.hasOwnProperty(o)){for(var s=n[o],u=Math.max(s.created,s.lastSurvey),l=0,c=s.pixels;l<c.length;l++){var p=c[l];u=Math.max(u,p.lastexp)}var d=a-u;d<a&&24192e5<d&&delete n[o]}v=n,h.setItem(m,f.SerializeMeasurements(n))},e.prototype.state=function(){return y()},e.prototype.updateExp=function(e,t,r,n){var i=y(),o=i[e];void 0===o&&(o={mid:e,uid:s.guid(),isAnswered:!1,lastSurvey:0,nbrOfSurveys:0,created:Date.now(),pixels:[]},i[e]=o);var a=o.pixels.filter(function(e){return e.uid===t})[0];return void 0===a&&(a={uid:t,exp:0,lastexp:0,time:0},o.pixels.push(a)),a.exp=a.exp+r,a.time=a.time+n,a.lastexp=Date.now(),h.setItem(m,f.SerializeMeasurements(i)),o},e.prototype.updateSrv=function(e,t){var r=y(),n=r[e];return void 0===n&&(n={mid:e,uid:s.guid(),created:Date.now(),isAnswered:!1,lastSurvey:0,nbrOfSurveys:0,pixels:[]},r[e]=n),!0===t?n.isAnswered=!0:(n.lastSurvey=Date.now(),n.nbrOfSurveys=n.nbrOfSurveys+1),h.setItem(m,f.SerializeMeasurements(r)),n},e.prototype.getTemp=function(){return[]},e.prototype.setTemp=function(e){throw new Error("Method not implemented."+e)},e.prototype.getSession=function(){var e=h.getItem(t());return null!=e?f.DeserializeSessions(e):[]},e.prototype.setSession=function(e){h.setItem(t(),f.SerializeSessions(e))},e.prototype.getAndRemoveOutdatedSessions=function(){var a,s=[];if(o)for(var e=function(e,t){var r=h.key(e);if(0===(null===(a=r)||void 0===a?void 0:a.indexOf(u+"#"))){var n=f.DeserializeSessions(h.getItem(r)),i=(new Date).getTime(),o=!0;n.forEach(function(e){i-e.last<3e5&&(o=!1)}),o&&(s.push.apply(s,n),h.removeItem(r))}},t=0,r=h.length;t<r;t++)e(t);return s},e}();window.brandmetrics.register({id:32,ctor:e})}();"use strict";!function(){var o=function(t){var e=t,n=t.getResponseInformation(),o={source:"gpt",advertiserId:n&&n.advertiserId,campaignId:n&&n.campaignId,creativeId:""+(n&&n.creativeId),lineItemId:""+(n&&n.lineItemId)},i={key:o,element:e.getSlotElementId(),ad:e.getHtml()};return i},t=function(){function t(){this.active=!0}return t.prototype.isReady=function(){var t=!(!window.googletag||!window.googletag.apiReady);return t},t.prototype.getDisplayedSlots=function(){var t=window.googletag.pubads().getSlots().filter(function(t){return t.getResponseInformation()}).map(function(t){return o(t)});return t},t.prototype.slotDisplayed=function(e){var n=this;window.googletag.pubads().addEventListener("slotRenderEnded",function(t){n.active&&e(o(t.slot))})},t.prototype.setActive=function(t){this.active=t},t}();window.brandmetrics.register({id:512,ctor:t})}();"use strict";!function(){var t,n,g,r=function(e){var t;return"function"==typeof Event?t=new Event(e):(t=document.createEvent("Event")).initEvent(e,!0,!0),t};history.pushState=(t=history.pushState,function(){var e=t.apply(this,arguments);try{window.dispatchEvent(r("pushState")),window.dispatchEvent(r("locationchange"))}catch(e){}return e}),history.replaceState=(n=history.replaceState,function(){var e=n.apply(this,arguments);try{window.dispatchEvent(r("replaceState")),window.dispatchEvent(r("locationchange"))}catch(e){}return e}),window.addEventListener("popstate",function(){window.dispatchEvent(new Event("locationchange"))});var i,e,o,c,a={},l=!1,E=function(e,t){var n=function(n,e){var r="";switch(e.type){case"attribute":for(var t=function(e){var t=n;e.selector&&(t=n.querySelectorAll(e.selector)[0]),r=e.attributes.map(function(e){return t.getAttribute(e)}).join("-")},o=0,i=e.extractors;o<i.length;o++)t(i[o]);break;case"url":if(r=window.location.href,e.regex){var c=r.match(new RegExp(e.regex));c&&1<c.length&&(r=c.slice(1).join("-"))}}return r}(e,t.id),r=""===e.id?void 0:e.id,o=r+n;n&&!a[o]&&(a[o]={key:{source:"ntv",key:n},element:e},i&&i(a[o]))},s=(e=function(){!function(){for(var e=0,t=g;e<t.length;e++){var n=t[e];switch(n.element.type){case"query":for(var r=0,o=Array.prototype.slice.call(document.querySelectorAll(n.element.selector));r<o.length;r++){for(var i=o[r],c=!0,a=0,l=n.element.subselectors||[];a<l.length;a++){var s=l[a];if(0===i.querySelectorAll(s).length){c=!1;break}}c&&E(i,n)}break;case"url":var u=window.location.href,v=new RegExp(n.element.regex),h=u.match(v);if(h){var p=document.body,d=n.element.selector;if(1<h.length&&d){for(var f=1;f<h.length;f++){var w="\\$\\("+f+"\\)";d=d.replace(new RegExp(w,"g"),h[f])}try{var y=document.querySelector(d);y&&(p=y)}catch(e){}}E(p,n)}}}}()},c=!(o=1e3),function(){c||(e(),c=!0,setTimeout(function(){c=!1},o))}),u=function(){l||(window.addEventListener("locationchange",s),document.addEventListener("scroll",s),l=!0)},v=function(){function e(e){switch(this.active=!0,e.type){case"ntv":g=e.conf||[];break;default:throw new Error("Trying to initialize native listener with none native configuration.")}u(),s()}return e.prototype.isReady=function(){return!0},e.prototype.getDisplayedSlots=function(){var e=[];for(var t in a)a.hasOwnProperty(t)&&e.push(a[t]);return e},e.prototype.slotDisplayed=function(e){i=e},e.prototype.setActive=function(e){this.active=e,this.active?u():l&&(window.removeEventListener("locationchange",s),document.removeEventListener("scroll",s),l=!1)},e}();window.brandmetrics.register({id:4096,ctor:v})}();"use strict";!function(){var e,t,i,r=[],l=null,u=function(n){e&&e(t,n)},n=function(){function n(n){t=n.collection,e=n.callback,i=n.utils}return n.prototype.observe=function(n){if(!this.isWatching(n)){var e={element:n,inView:i.inView(n)};r.push(e),u([e])}null===l&&(l=setInterval(function(){var n;n=r.filter(function(n){var e=i.inView(n.element);return e!==n.inView&&(n.inView=e,!0)}),u(n)},1e3))},n.prototype.unObserve=function(e){0===(r=r.filter(function(n){return n.element!==e})).length&&null!==l&&(clearInterval(l),l=null)},n.prototype.isWatching=function(e){return 0<r.filter(function(n){return n.element===e}).length},n}();window.brandmetrics.register({id:8192,ctor:n})}();"use strict";!function(){var t,e,u,i,r=[],c=function(n){t&&t(e,n)},o=function(o){var n=r.filter(function(n){var t,e,i=(t=n.element,0<(e=o.filter(function(n){return n.target===t})).length?e[0]:null);if(i){var r=u.inViewByRatio(i.intersectionRatio);if(!r&&i.isIntersecting&&i.rootBounds&&i.boundingClientRect)i.rootBounds.height*i.rootBounds.width<i.boundingClientRect.height*i.boundingClientRect.width&&(r=u.inView(n.element));if(r!==n.inView)return n.inView=r,!0}return!1});c(n)},n=function(){function n(n){e=n.collection,t=n.callback,u=n.utils,i=new IntersectionObserver(o,{threshold:[0,.5]})}return n.prototype.observe=function(n){if(!this.isWatching(n)){var t={element:n,inView:u.inView(n)};r.push(t),c([t]),i.observe(n)}},n.prototype.unObserve=function(t){r=r.filter(function(n){return n.element!==t}),i.unobserve(t)},n.prototype.isWatching=function(t){return 0<r.filter(function(n){return n.element===t}).length},n}();window.brandmetrics.register({id:16384,ctor:n})}();"use strict";!function(){var u,a=function(t,e){void 0===e&&(e=!0);var i,s,n,o,r=u.options;if("auto"===r.startMode.type||"sessionSubsequent"===r.startMode.type&&(i=r.startMode,s="__bmsessionviews",n=1,null!==(o=sessionStorage.getItem(s))&&(n=parseInt(o,10)+1),sessionStorage.setItem(s,n.toString()),n>i.conf.count)){var c=!0;if(r.startMode.conf&&r.startMode.conf.requiredElement)document.querySelector(u.utils.escapeSelector(r.startMode.conf.requiredElement))||(c=!1,e&&setTimeout(function(){a(t,!1)},1e3));c&&t.triggerSurvey()}},t=function(){function t(t){this.isInitiated=!1,u=t}return t.prototype.start=function(){var t=this,e=u.bm,i=u.collection,s=u.callback;if(this.isInitiated)s();else if(u.utils.initProcessing(e,u.client),i){i.start();var n=function(){i.isInitiated()?(t.isInitiated=!0,u.utils.process(e,u.client),a(e),s()):setTimeout(function(){return n()},100)};n()}else this.isInitiated=!0,u.utils.process(e,u.client),a(e),s()},t}();window.brandmetrics.register({id:131072,ctor:t})}();"use strict";!function(){var e=function(){function e(){}return e.prototype.SerializeMeasurements=function(e){for(var r="",t=0,n=0,i=Object.keys(e);n<i.length;n++){var s=i[n];r+=0!==t?"¤":"";var a=e[s];r+=s+"|"+a.isAnswered+"|"+a.lastSurvey+"|"+a.nbrOfSurveys+"|"+a.uid+"|"+a.created;for(var o=0,l=a.pixels;o<l.length;o++){var p=l[o];r+=";"+p.exp+"|"+p.lastexp+"|"+p.time+"|"+p.uid}t++}return r},e.prototype.DeserializeMeasurements=function(e){var s={};if(e&&""!==e)for(var a,r=0,t=e.split("¤");r<t.length;r++){t[r].split(";").forEach(function(e,r){if(e&&""!==e){var t=e.split("|");if(0===r){if(5!==t.length&&6!==t.length)throw new Error("The string cannot be deserialized");a={mid:t[0],isAnswered:(i=t[1],"true"===i.toLowerCase()),lastSurvey:parseInt(t[2],10),nbrOfSurveys:parseInt(t[3],10),uid:t[4],created:6===t.length?parseInt(t[5],10):Date.now(),pixels:[]},s[a.mid]=a}else{if(4!==t.length)throw new Error;var n={exp:parseInt(t[0],10),lastexp:parseInt(t[1],10),time:parseInt(t[2],10),uid:t[3]};a.pixels.push(n)}}var i})}return s},e.prototype.SerializeSessions=function(e){var t="";return e.forEach(function(e,r){t+=0!==r?";":"",t+=e.last+"|"+e.mid+"|"+e.start+"|"+e.uid}),t},e.prototype.DeserializeSessions=function(e){var r=[];if(e&&""!==e)for(var t=0,n=e.split(";");t<n.length;t++){var i=n[t].split("|");if(4!==i.length)throw new Error("The string cannot be deserialized");r.push({last:parseInt(i[0],10),mid:i[1],start:parseInt(i[2],10),uid:i[3]})}return r},e}();window.brandmetrics.register({id:524288,ctor:e})}();