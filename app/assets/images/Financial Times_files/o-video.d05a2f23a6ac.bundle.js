(window.webpackJsonp=window.webpackJsonp||[]).push([["o-video"],{b5b7ab78:function(e,t,i){"use strict";i.r(t);var a=i("922a4198"),n={mpeg4:['video/mp4; codecs="mp4v.20.8"'],h264:['video/mp4; codecs="avc1.42E01E"','video/mp4; codecs="avc1.42E01E, mp4a.40.2"'],ogg:['video/ogg; codecs="theora"'],webm:['video/webm; codecs="vp8, vorbis"']};var o=function(){var e=document.createElement("video"),t=[];try{Object.keys(n).forEach((function(i){n[i].some((function(t){return e.canPlayType(t)}))&&t.push(i)}))}catch(e){}return t};var s=function(e,t){var i,a=t||{},n=a.optimumvideowidth,s=a.supportedFormats||o(),d=e.filter((function(e){return s.indexOf(e.codec.toLowerCase())>-1})).sort((function(e,t){return e.pixelWidth-t.pixelWidth}));return n?(d.some((function(e){return e.pixelWidth>=n&&(i=e,!0)})),i||d.pop()):d.pop()};function d(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var r=!1;var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video=t,this.adsLoaded=!1,this.videoLoaded=!1,this.loadingStateDisplayed=!1,this.adsCompleted=!1}var t,i,a;return t=e,a=[{key:"loadAdsLibrary",value:function(){return new Promise((function(e,t){var i=document.querySelector('[src="//imasdk.googleapis.com/js/sdkloader/ima3.js"]');i||((i=document.createElement("script")).setAttribute("type","text/javascript"),i.setAttribute("src","//imasdk.googleapis.com/js/sdkloader/ima3.js"),i.setAttribute("async",!0),i.setAttribute("defer",!0),document.getElementsByTagName("head")[0].appendChild(i)),r||window.google&&window.google.ima?e():(i.addEventListener("load",(function(){r=!0,e()})),i.addEventListener("error",(function(e){t(e)})))}))}}],(i=[{key:"getVideoBrand",value:function(){return!!(this.video.videoData&&this.video.videoData.brand&&this.video.videoData.brand.name)&&this.video.videoData.brand.name}},{key:"setUpAds",value:function(){var e;this.adContainerEl=document.createElement("div"),this.video.containerEl.appendChild(this.adContainerEl),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainerEl,this.video.videoEl),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsManagerLoadedHandler=this.adsManagerLoadedHandler.bind(this),this.adErrorHandler=this.adErrorHandler.bind(this),this.adEventHandler=this.adEventHandler.bind(this),this.contentPauseRequestHandler=this.contentPauseRequestHandler.bind(this),this.contentResumeRequestHandler=this.contentResumeRequestHandler.bind(this),this.getAdProgress=this.getAdProgress.bind(this),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.adsManagerLoadedHandler,!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.adErrorHandler,!1),this.requestAds(),this.playAdEventHandler=this.playAdEventHandler.bind(this),this.video.opts.placeholder?this.playAdEventHandler():(this.overlayEl=((e=document.createElement("div")).classList.add("o-video__overlay"),e),this.video.containerEl.appendChild(this.overlayEl),this.overlayEl.addEventListener("click",this.playAdEventHandler))}},{key:"requestAds",value:function(){var e=new google.ima.AdsRequest,t="pos=".concat(this.video.targeting.position,"&ttid=").concat(this.video.targeting.videoId),i=this.getVideoBrand();i&&(t+="&brand=".concat(i));var a="http://pubads.g.doubleclick.net/gampad/ads?env=vp&gdfp_req=1&impl=s&output=xml_vast2&iu=".concat(this.video.targeting.site,"&sz=").concat(this.video.targeting.sizes,"&unviewed_position_start=1&scp=").concat(encodeURIComponent(t));e.adTagUrl=a,e.linearAdSlotWidth=592,e.linearAdSlotHeight=333,e.nonLinearAdSlotWidth=592,e.nonLinearAdSlotHeight=150;var n={detail:{category:"video",action:"adRequested",contentId:this.video.opts.id},bubbles:!0},o=new CustomEvent("oTracking.event",n);document.body.dispatchEvent(o),this.adsLoader.requestAds(e)}},{key:"adsManagerLoadedHandler",value:function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=e.getAdsManager(this.video.videoEl,t),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.adErrorHandler),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.contentPauseRequestHandler),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.contentResumeRequestHandler),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.adEventHandler),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.adEventHandler),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.adEventHandler),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.adEventHandler),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.adEventHandler),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,this.adEventHandler),this.adsLoaded=!0,this.startAds()}},{key:"startAds",value:function(){if(this.videoLoaded&&this.loadingStateDisplayed){if(this.video.opts.advertising){if(!this.adsLoaded)return}else this.playUserVideo();this.loadingStateEl&&(this.loadingStateEl.parentNode.removeChild(this.loadingStateEl),this.loadingStateEl=null);try{this.adsManager.init(this.video.videoEl.clientWidth,this.video.videoEl.clientHeight,google.ima.ViewMode.NORMAL),this.adsManager.start()}catch(e){this.reportError(e),this.playUserVideo()}}}},{key:"playAdEventHandler",value:function(){var e=this;this.adContainerEl.classList.add("o-video__ad"),this.adDisplayContainer.initialize(),this.loadingStateEl=document.createElement("span"),this.loadingStateEl.setAttribute("role","progressbar"),this.loadingStateEl.setAttribute("aria-valuetext","Loading"),this.loadingStateEl.className="o-video__loading-state",this.adContainerEl.appendChild(this.loadingStateEl),setTimeout((function(){e.loadingStateDisplayed=!0,e.startAds()}),2e3),this.video.videoEl.addEventListener("loadedmetadata",(function t(){e.videoLoaded=!0,e.startAds(),e.video.videoEl.removeEventListener("loadedmetadata",t)})),this.video.videoEl.load(),this.overlayEl&&(this.overlayEl.removeEventListener("click",this.playAdEventHandler),this.video.containerEl.removeChild(this.overlayEl)),delete this.overlayEl}},{key:"adEventHandler",value:function(e){var t=e.getAd(),i={detail:{advertising:!0,category:"video",contentId:this.video.opts.id,progress:0,adDuration:t.getDuration(),adMinDuration:t.getMinSuggestedDuration(),adTitle:t.getTitle(),adProgress:this.getAdProgress()},bubbles:!0};switch(e.type){case google.ima.AdEvent.Type.LOADED:t.isLinear()||this.playUserVideo();break;case google.ima.AdEvent.Type.STARTED:i.detail.action="adStart";var a=new CustomEvent("oTracking.event",i);document.body.dispatchEvent(a),t.isLinear(),this.video.liveRegionEl.innerHTML="Video will play after ad in ".concat(i.detail.adDuration," seconds");break;case google.ima.AdEvent.Type.COMPLETE:i.detail.action="adComplete";var n=new CustomEvent("oTracking.event",i);document.body.dispatchEvent(n),t.isLinear(),this.video.liveRegionEl.innerHTML="";break;case google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED:i.detail.action="adSkippable";var o=new CustomEvent("oTracking.event",i);document.body.dispatchEvent(o);break;case google.ima.AdEvent.Type.SKIPPED:i.detail.action="adSkip";var s=new CustomEvent("oTracking.event",i);document.body.dispatchEvent(s);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:i.detail.action="allAdsCompleted";var d=new CustomEvent("oTracking.event",i);document.body.dispatchEvent(d);break;default:throw new Error("adEvent has type "+e.type+", which is not handled by adEventHandler")}}},{key:"reportError",value:function(e){document.body.dispatchEvent(new CustomEvent("oErrors.log",{bubbles:!0,detail:{error:e}}))}},{key:"adErrorHandler",value:function(e){var t="getError"in e&&"function"==typeof e.getError?e.getError():e,i="".concat(t.getErrorCode(),", ").concat(t.getType(),", ").concat(t.getMessage(),", ").concat(t.getVastErrorCode());this.reportError(new Error(i)),this.adsManager&&this.adsManager.destroy(),this.video.containerEl.removeChild(this.adContainerEl),this.overlayEl&&(this.overlayEl.removeEventListener("click",this.playAdEventHandler),this.video.containerEl.removeChild(this.overlayEl),delete this.overlayEl),this.video.placeholderEl&&this.video.placeholderEl.removeEventListener("click",this.playAdEventHandler),this.video.opts.advertising=!1,this.startAds()}},{key:"contentPauseRequestHandler",value:function(){this.adsCompleted=!1,this.video.videoEl.pause()}},{key:"contentResumeRequestHandler",value:function(){this.video.containerEl.removeChild(this.adContainerEl),this.adsCompleted=!0,this.playUserVideo()}},{key:"playUserVideo",value:function(){this.video.addCaptions(),this.video.videoEl.play()}},{key:"getAdProgress",value:function(){if(!this.adsManager||!this.adsManager.getCurrentAd())return 0;var e=this.adsManager.getCurrentAd().getDuration(),t=this.adsManager.getRemainingTime();return parseInt(100*(e-t)/e,10)}}])&&d(t.prototype,i),a&&d(t,a),e}();function h(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.video=t,this.opts=this.video.opts.placeholderInfo.reduce((function(e,t){return e[t]=!0,e}),{}),this.infoEl=document.createElement("div"),this.infoEl.className="o-video__info",this.opts.brand&&(this.brandEl=document.createElement("span"),this.brandEl.className="o-video__info-brand",this.infoEl.appendChild(this.brandEl)),this.opts.title&&(this.titleEl=document.createElement("h4"),this.titleEl.className="o-video__info-title",this.infoEl.appendChild(this.titleEl)),this.opts.description&&(this.descriptionEl=document.createElement("p"),this.descriptionEl.className="o-video__info-description",this.infoEl.appendChild(this.descriptionEl)),this.update(),this.video.placeholderEl.appendChild(this.infoEl)}var t,i,a;return t=e,(i=[{key:"update",value:function(){if(this.brandEl){var e=this.video.videoData.brand&&this.video.videoData.brand.name;this.brandEl.textContent=e}this.titleEl&&(this.titleEl.textContent=this.video.videoData.title),this.descriptionEl&&(this.descriptionEl.textContent=this.video.videoData.standfirst)}},{key:"teardown",value:function(){this.video.placeholderEl.removeChild(this.infoEl),delete this.infoEl,delete this.brandEl,delete this.titleEl,delete this.descriptionEl}}])&&h(t.prototype,i),a&&h(t,a),e}();function v(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.opts=t;var i=t.player.videoData?t.player.videoData.id:t.player.opts.id;this.currentIndex=i?t.queue.indexOf(i.toString()):-1,this.cache={},this.opts.autoplay&&(this.opts.player.containerEl.addEventListener("ended",this.next.bind(this),!0),-1===this.currentIndex&&this.next())}var t,i,a;return t=e,(i=[{key:"next",value:function(){this.goto(this.currentIndex+1)}},{key:"prev",value:function(){this.goto(this.currentIndex-1)}},{key:"goto",value:function(e){var t=this;e<0?this.currentIndex=this.opts.queue.length-1:e>=this.opts.queue.length?this.currentIndex=0:this.currentIndex=e;var i=this.opts.player.videoData&&this.opts.player.videoData.id;i&&!this.cache[i]&&(this.cache[i]=this.opts.player.videoData),this.opts.player.fireWatchedEvent(),this.opts.player.resetAmountWatched();var a=this.opts.queue[this.currentIndex],n={id:a,data:this.cache[a]};return this.opts.player.update(n).then((function(){t.opts.player.videoEl&&t.opts.player.videoEl.play()}))}}])&&v(t.prototype,i),a&&v(t,a),e}();function p(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var E=function(e){var t=document.createElement("div");return t.className="o-video__guidance ".concat(e?"o-video__guidance--banner":""),t},g=function(){var e=document.createElement("a");return e.setAttribute("href","https://www.ft.com/accessibility#video-transcriptions"),e.className="o-video__guidance__link",e.innerText="Subtitles unavailable",e.target="_blank",e.addEventListener("click",(function(e){return e.stopPropagation()})),e},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.removeBanner=this.removeBanner.bind(this),this.hideBanner=this.hideBanner.bind(this)}var t,i,a;return t=e,(i=[{key:"createPlaceholder",value:function(){var e=E();return e.appendChild(g()),e}},{key:"createBanner",value:function(){var e,t;return this.banner=E(!0),this.banner.appendChild((e=this.removeBanner,(t=document.createElement("button")).className="o-video__guidance__close",t.addEventListener("click",(function(t){t.stopPropagation(),e()})),t)),this.banner.appendChild(g()),this.timeout=setTimeout(this.hideBanner,5e3),this.banner}},{key:"removeBanner",value:function(){this.banner&&(this.banner.remove(),clearTimeout(this.timeout))}},{key:"hideBanner",value:function(){this.banner&&this.banner.classList.add("o-video__guidance--hidden")}}])&&p(t.prototype,i),a&&p(t,a),e}();function y(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t){e.opts.advertising&&e.videoAds&&e.videoAds.adsLoaded&&!e.videoAds.adsCompleted||("progress"!==t.type||function(e){var t=e.getProgress(),i=e.opts.id;A[i]||(A[i]=[]);if(![8,9,10,11,12,23,24,25,26,27,48,49,50,51,52,73,74,75,76,77,100].includes(t))return!1;if(A[i].includes(t))return!1;return A[i].push(t),!0}(e))&&b(t.type,e,{progress:e.getProgress(),duration:e.getDuration(),textTrackMode:e.getTrackMode()})}function b(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new CustomEvent("oTracking.event",{detail:Object.assign({category:"video",action:e,advertising:t.opts.advertising,contentId:t.opts.id},i),bubbles:!0});document.body.dispatchEvent(a)}var A={};function k(){this.updateAmountWatched(),b("watched",this,{amount:this.getAmountWatched(0),amountPercentage:this.getAmountWatchedPercentage(0)})}function w(e){e.detail.hidden?this.updateAmountWatched():this.videoEl.paused||this.markPlayStart()}var C="onbeforeunload"in window?"beforeunload":"unload",L={advertising:!1,allProgress:!1,autorender:!0,classes:[],optimumwidth:null,placeholder:!1,placeholderInfo:["title"],placeholderHint:"",playsinline:!1,showCaptions:!0,showGuidance:!0,data:null},P=function(){function e(t,i){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.containerEl=t,this.amountWatched=0,this.fireWatchedEvent=k.bind(this),this.visibilityListener=w.bind(this),this.didUserPressPlay=!1,this.opts=Object.assign({},L,i,function(e){var t={};return Array.prototype.forEach.call(e,(function(e){if(0===e.name.indexOf("data-o-video")){var i=e.name.replace("data-o-video-","").replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()}));try{t[i]="placeholderInfo"===i?JSON.parse(e.value.replace(/\'/g,'"')):JSON.parse(e.value)}catch(a){t[i]=e.value}}})),t}(this.containerEl.attributes)),"string"!=typeof this.opts.systemcode)throw new Error('o-video requires "systemcode" is configured using the "data-o-video-systemcode" data attribute, or configured with the `opts` constructor argument. It must be set to a valid [Bizops system code](https://biz-ops.in.ft.com/list/Systems).');"string"==typeof this.opts.classes&&(this.opts.classes=this.opts.classes.split(" ")),-1===this.opts.classes.indexOf("o-video__video")&&this.opts.classes.push("o-video__video"),this.targeting={site:"/5887/ft.com",position:"video",sizes:"592x333|400x225",videoId:this.opts.id},this.opts.advertising&&(this.videoAds=new l(this)),this.containerEl.setAttribute("data-o-video-js",""),!0===this.opts.autorender&&this.init(),this.opts.showGuidance&&(this.guidance=new m)}var t,i,n;return t=e,n=[{key:"init",value:function(t,i){var a=[];t?"string"==typeof t&&(t=document.querySelector(t)):t=document.body;for(var n=t.querySelectorAll(':not([data-o-video-js])[data-o-component~="o-video"]'),o=0;o<n.length;o++)a.push(new e(n[o],i));return a}}],(i=[{key:"getData",value:function(){var e=this;return(this.opts.data?Promise.resolve(this.opts.data):fetch("https://next-media-api.ft.com/v1/".concat(this.opts.id)).then((function(t){if(t.ok)return t.json();throw Error("Next Media API responded with a "+t.status+" ("+t.statusText+") for id "+e.opts.id)}))).then((function(t){var i,a,n,o;e.videoData=t,e.posterImage=t.mainImageUrl&&(i=t.mainImageUrl,a=e.opts.optimumwidth,n=e.opts.systemcode,o="https://www.ft.com/__origami/service/image/v2/images/raw/".concat(encodeURIComponent(i),"?source=").concat(n,"&quality=low"),a&&(o+="&fit=scale-down&width=".concat(a)),o),e.rendition=s(t.renditions,e.opts)}))}},{key:"renderVideo",value:function(){this.rendition&&(this.opts.placeholder?this.addPlaceholder():this.addVideo())}},{key:"init",value:function(){var e=this;return(this.opts.advertising?l.loadAdsLibrary():Promise.resolve()).catch((function(){e.opts.advertising=!1})).then((function(){return e.getData()})).then((function(){return e.renderVideo()}))}},{key:"addVideo",value:function(){this.liveRegionEl=document.createElement("div"),this.liveRegionEl.setAttribute("aria-live","assertive"),this.liveRegionEl.classList.add("o-video__live-region"),this.videoEl=document.createElement("video"),this.videoEl.controls=!0,this.videoEl.className=Array.isArray(this.opts.classes)?this.opts.classes.join(" "):this.opts.classes,this.containerEl.classList.add("o-video--player"),this.opts.playsinline&&(this.videoEl.setAttribute("playsinline","true"),this.videoEl.setAttribute("webkit-playsinline","true")),this.videoEl.controlsList&&this.videoEl.controlsList.add("nodownload"),this.updateVideo(),this.placeholderEl&&!this.opts.advertising&&(this.videoEl.autoplay=this.videoEl.autostart=!0),this.containerEl.appendChild(this.liveRegionEl),this.containerEl.appendChild(this.videoEl),function(e,t){var i=this;t.forEach((function(t){e.videoEl.addEventListener(t,f.bind(i,e))}))}(this,["playing","pause","ended","progress","seeked","error","stalled"]),this.videoEl.addEventListener("playing",this.pauseOtherVideos.bind(this)),this.videoEl.addEventListener("playing",this.markPlayStart.bind(this)),this.videoEl.addEventListener("pause",this.updateAmountWatched.bind(this)),this.videoEl.addEventListener("suspend",this.clearCurrentlyPlaying.bind(this)),this.videoEl.addEventListener("ended",this.clearCurrentlyPlaying.bind(this)),this.opts.advertising&&this.videoAds.setUpAds(),window.addEventListener(C,this.fireWatchedEvent),a.default.listenTo("visibility"),window.addEventListener("oViewport.visibility",this.visibilityListener)}},{key:"addCaptions",value:function(){if(!1!==this.opts.showCaptions){if(void 0===this.videoData)throw new Error("Please call `getData()` before calling `addCaptions()` directly.");var e=this.videoEl.querySelector("track");if(e&&this.videoEl.removeChild(e),this.videoData.captionsUrl){var t=document.createElement("track");t.setAttribute("label","English"),t.setAttribute("kind","captions"),t.setAttribute("srclang","en"),t.setAttribute("src",this.videoData.captionsUrl),t.setAttribute("crossorigin","true"),this.videoEl.setAttribute("crossorigin","true"),this.videoEl.appendChild(t)}}}},{key:"updateVideo",value:function(){var e,t,i;this.posterImage?this.videoEl.poster=this.posterImage:this.videoEl.removeAttribute("poster"),this.videoEl.src=this.rendition&&this.rendition.url,this.guidance&&this.guidance.removeBanner(),e=this.videoEl,t="playing",i=this.showGuidanceBanner.bind(this),e.addEventListener(t,(function a(){e.removeEventListener(t,a),i.apply(void 0,arguments)})),this.addCaptions()}},{key:"addPlaceholder",value:function(){var e=this;this.placeholderEl=document.createElement("div"),this.placeholderEl.className="o-video__placeholder",this.placeholderImageEl=document.createElement("img"),this.placeholderImageEl.className="o-video__placeholder-image",this.placeholderImageEl.setAttribute("role","presentation"),this.placeholderImageEl.setAttribute("alt",""),this.placeholderEl.appendChild(this.placeholderImageEl),this.opts.placeholderInfo.length&&(this.infoPanel=new c(this));var t=document.createElement("div");t.className="o-video__play-cta ".concat(this.opts.placeholderHint?"o-video__play-cta--with-hint":"o-video__play-cta--without-hint"),this.playButtonEl=document.createElement("button"),this.playButtonEl.className="o-video__play-button";var i=document.createElement("span");i.className="o-video__play-button-icon",i.textContent=this.opts.placeholderHint,t.appendChild(i),!(this.videoData||{}).captionsUrl&&this.guidance&&t.appendChild(this.guidance.createPlaceholder()),this.playButtonEl.appendChild(t),this.placeholderEl.appendChild(this.playButtonEl),this.placeholderEl.addEventListener("click",(function(){e.didUserPressPlay=!0,e.play()})),this.updatePlaceholder(),this.containerEl.appendChild(this.placeholderEl)}},{key:"play",value:function(){this.placeholderEl?(this.addVideo(),this.videoEl.focus(),this.containerEl.removeChild(this.placeholderEl),this.infoPanel&&this.infoPanel.teardown(),delete this.placeholderEl,delete this.placeholderImageEl):this.videoEl.play()}},{key:"updatePlaceholder",value:function(){this.posterImage&&(this.placeholderImageEl.src=this.posterImage),this.infoPanel&&this.infoPanel.update(),this.playButtonEl&&this.playButtonEl.setAttribute("aria-label","Play video ".concat(this.videoData.title))}},{key:"update",value:function(e){var t=this;return this.videoEl&&this.videoEl.pause(),this.clearCurrentlyPlaying(),this.didUserPressPlay=!1,this.opts=Object.assign(this.opts,{data:null},e),this.videoEl||this.placeholderEl?this.getData().then((function(){t.placeholderEl?t.updatePlaceholder():t.updateVideo()})):this.init()}},{key:"getProgress",value:function(){return this.videoEl.duration?parseInt(100*this.videoEl.currentTime/this.videoEl.duration,10):0}},{key:"getDuration",value:function(){return this.videoEl.duration?parseInt(this.videoEl.duration,10):0}},{key:"getTrackMode",value:function(){return this.videoEl.textTracks&&this.videoEl.textTracks[0]?this.videoEl.textTracks[0].mode:void 0}},{key:"getAmountWatched",value:function(e){var t=this.amountWatched/1e3;return void 0!==e?Number(t.toFixed(e)):t}},{key:"getAmountWatchedPercentage",value:function(e){var t=this.videoEl&&this.videoEl.duration?100/this.videoEl.duration*this.getAmountWatched():0;return void 0!==e?Number(t.toFixed(e)):t}},{key:"pauseOtherVideos",value:function(){this.currentlyPlayingVideo&&this.currentlyPlayingVideo!==this.videoEl&&this.currentlyPlayingVideo.pause(),this.currentlyPlayingVideo=this.videoEl}},{key:"clearCurrentlyPlaying",value:function(){this.currentlyPlayingVideo!==this.videoEl&&(this.currentlyPlayingVideo=null)}},{key:"markPlayStart",value:function(){this.playStart=Date.now()}},{key:"updateAmountWatched",value:function(){void 0!==this.playStart&&(this.amountWatched+=Date.now()-this.playStart,this.playStart=void 0)}},{key:"resetAmountWatched",value:function(){this.amountWatched=0}},{key:"showGuidanceBanner",value:function(){var e=(this.videoData||{}).captionsUrl;this.didUserPressPlay||e||!this.guidance||this.containerEl.appendChild(this.guidance.createBanner())}},{key:"destroy",value:function(){window.removeEventListener(C,this.fireWatchedEvent),window.removeEventListener("oViewport.visibility",this.visibilityListener)}}])&&y(t.prototype,i),n&&y(t,n),e}();P.Playlist=u;var _=P;document.addEventListener("o.DOMContentLoaded",(function e(){_.init(),document.removeEventListener("o.DOMContentLoaded",e)}));t.default=_}}]);
//# sourceMappingURL=o-video.d05a2f23a6ac.bundle.js.map