(window.webpackJsonp=window.webpackJsonp||[]).push([["shared.volatile"],{"038b8f1d":function(t,e){t.exports=function(t){var e=document,n=e.referrer,r=e.URL,a=t.appName,o=t.product,i=t.version,c=t.nativeAppVersion,s=t.domain,d={appName:a||t.name,currentUrl:r,referrerUrl:n,product:o,version:i,domain:s};return c&&(d.nativeAppVersion=c),d}},"163e87d1":function(t,e,n){"use strict";n.r(e),n.d(e,"CONFIG",(function(){return r})),n.d(e,"init",(function(){return pt})),n.d(e,"initRepublishing",(function(){})),n.d(e,"checkIfUserIsSyndicationCustomer",(function(){})),n.d(e,"getUserData",(function(){}));var r={};n.r(r),n.d(r,"MESSAGES",(function(){})),n.d(r,"getMessage",(function(){return j})),n.d(r,"TRACKING",(function(){return I}));var a=n("f26e1e46"),o=n.n(a),i=n("33cab54f"),c=n("8b8c7872");function s(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){s(o,r,a,i,c,"next",t)}function c(t){s(o,r,a,i,c,"throw",t)}i(void 0)}))}}function u(){return l.apply(this,arguments)}function l(){return(l=d(o.a.mark((function t(){var e,n,r,a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="/syndication/user-status",n={credentials:"include"},t.prev=2,t.next=5,fetch(e,n);case 5:if(!(r=t.sent).ok){t.next=10;break}return t.abrupt("return",r.json());case 10:t.t0=r.status,t.next=401===t.t0?13:503===t.t0?14:21;break;case 13:return t.abrupt("return",null);case 14:if(!r.headers.get("content-type").includes("application/json")){t.next=21;break}return t.next=17,r.json();case 17:return(a=t.sent).migrated=!0,a.MAINTENANCE_MODE=!0,t.abrupt("return",a);case 21:return t.next=23,r.text();case 23:throw c=t.sent,new Error("Next ".concat(e,' responded with "').concat(c,'" (').concat(r.status,")"));case 25:t.next=30;break;case 27:t.prev=27,t.t1=t.catch(2),Object(i.broadcast)("oErrors.log",{error:t.t1,info:{component:"next-syndication-redux"}});case 30:case"end":return t.stop()}}),t,null,[[2,27]])})))).apply(this,arguments)}function f(t){do{if(t===document.documentElement)return null;var e=t.getAttribute("data-content-id");if(!e&&!t.classList.contains("o-header__subnav-item")&&!(e=t.getAttribute("data-id"))){var n=t;"A"!==t.tagName.toUpperCase()&&(n=n.querySelector("a")),n&&n.hasAttribute("href")&&(e=p(e=n.getAttribute("href").split("/").pop()))&&t.setAttribute("data-content-id",e)}return e&&(e=p(e),t.setAttribute("data-content-id",e)),e||null}while(t=t.parentElement);return null}function p(t){return t.indexOf("#")>-1&&(t=t.substring(0,t.indexOf("#"))),t.indexOf("?")>-1&&(t=t.substring(0,t.indexOf("?"))),t}function h(t,e){return t.prepend?t.prepend(e):t.childNodes.length?t.insertBefore(e,t.childNodes[0]):t.appendChild(e),t}function v(t){var e=document.createDocumentFragment(),n=document.createElement("div");return n.insertAdjacentHTML("afterbegin",t),Array.from(n.children).reverse().forEach((function(t){return h(e,t)})),e}function m(t,e){return String(t).replace(/\{\{([^\}]+)\}\}/gim,(function(t,n){return n in e?e[n]:""}))}function y(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){y(o,r,a,i,c,"next",t)}function c(t){y(o,r,a,i,c,"throw",t)}i(void 0)}))}}var g,_=[],w={};function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;g=t,addEventListener("nSyndication.fetch",(function(t){return x(t.detail.response)}),!0),"[object Array]"===Object.prototype.toString.call(e)&&x(e)}function S(){return(S=b(o.a.mark((function t(e){var n,r,a,c,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==g.MAINTENANCE_MODE){t.next=4;break}return n=e.map((function(t){return{id:t,canBeSyndicated:"maintenance",messageCode:"MSG_5100"}})),Object(i.broadcast)("nSyndication.fetch",{request:e,response:n}),t.abrupt("return",Promise.resolve(n));case 4:if(r={credentials:"include",headers:{"content-type":"application/json"},method:"POST",body:JSON.stringify(e)},!e.length){t.next=25;break}return t.prev=6,t.next=9,fetch("/syndication/resolve".concat(location.search),r);case 9:if((a=t.sent).ok){t.next=15;break}return t.next=13,a.text();case 13:throw c=t.sent,new Error('Next /syndication/resolve responded with "'.concat(c,'" (').concat(a.status,")"));case 15:return t.next=17,a.json();case 17:return s=t.sent,Object(i.broadcast)("nSyndication.fetch",{request:e,response:s}),t.abrupt("return",s);case 22:t.prev=22,t.t0=t.catch(6),Object(i.broadcast)("oErrors.log",{error:t.t0,info:{component:"next-syndication-redux"}});case 25:case"end":return t.stop()}}),t,null,[[6,22]])})))).apply(this,arguments)}function A(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",n="".concat(t,"__").concat(e);return w[n]||w[t]||_.find((function(n){return E(n,t,e)}))||null}(f(t),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"data-content-id";do{if(t===document.documentElement)return null;var n=t.getAttribute(e);if(n)return n}while(t=t.parentElement);return null}(t,"data-iso-lang")||"en")}function T(t){return _.filter((function(e){return e.id===t}))}function E(t,e,n){var r="".concat(e,"__").concat(n);return t.__id__===r||t.id===e&&t.lang===n}function x(t){var e=[];return t.forEach((function(t){var n=t.id,r=t.lang||"en",a=t.__id__="".concat(n,"__").concat(r);if(a in w){e.push(t);var o=_.findIndex((function(t){return E(t,n,r)}));o>-1&&(_[o]=t)}e.includes(t)||_.push(t),w[a]=t})),Object(i.broadcast)("nSyndication.dataChanged",{existing:e,items:_}),{DATA_STORE:_,DATA_STORE_MAP:w,EXISTING:e}}var O='<p>Please ensure you have considered your <a data-trackable="contractual-rights" href="/republishing/contract">contractual rights</a> before republishing.</p>',C='<p class="syndication-message__content--warning">This content will incur additional charges to republish. Please contact us for further details (<a href="mailto:syndication@ft.com">syndication@ft.com</a> or +44 (0)207 873 4816).</p>',M={EMBARGO:"<p>Please note that this content is embargoed until {{embargoPeriod}} after its original publication date of {{publishedDateDisplay}}.</p>",ENGLISH:'<p class="syndication-message__content--warning">Please note that this content is only available to download in English.</p>',MSG_2000:"{{embargoMessage}}{{translationMessage}}".concat(O),MSG_2100:"<p>This content has already been downloaded and therefore will not count towards your republishing limit.</p>\n{{embargoMessage}}\n".concat(O),MSG_2200:'<p>Please contact us for details of republishing rights for this content (<a href="mailto:syndication@ft.com">syndication@ft.com</a> or +44 (0)207 873 4816).</p>',MSG_2300:"{{embargoMessage}}".concat(C),MSG_2320:"{{embargoMessage}}".concat(C,"\n").concat(O),MSG_2340:"<p>This content has already been downloaded and therefore will not count towards your republishing limit.</p>\n{{embargoMessage}}\n".concat(C,"\n").concat(O),MSG_4000:"<p>This content is not available for republishing.</p>",MSG_4050:"<p>Sorry, this content is no longer available.</p>",MSG_4100:"<p>You have reached your download limit for {{type}}s. Please contact your Account Manager to increase your limit.</p>",MSG_4200:"<p>Your contract does not allow {{type}}s to be downloaded. Please contact your Account Manager to change this.</p>",MSG_4250:"<p>You do not have rights to republish this type of content. Please contact your Account Manager for further details.</p>",MSG_4300:"<p>Report contains multiple articles. Please view each article individually for republishing rights.</p>",MSG_5000:"<p>Sorry, an error has occurred. Please try signing out and then in again. If error persists, please contact your Account Manager.</p>",MSG_5100:"<p>The Republishing Service is currently undergoing maintenance. Please try again later.</p>"};function j(t,e){var n=e.MAINTENANCE_MODE,r=e.contributor_content;return t.translationMessage="",t.embargoPeriod&&"number"==typeof t.embargoPeriod&&(t.embargoPeriod="".concat(t.embargoPeriod," day").concat(t.embargoPeriod>1?"s":"")),t.embargoMessage=t.embargoPeriod?m(M.EMBARGO,t):"",Boolean(document.getElementById("ftlabsTranslationContainer"))&&(t.translationMessage=m(M.ENGLISH,t)),!0===n?M.MSG_5100:"package"===t.type?M.MSG_4300:!0===t.notAvailable?M.MSG_4050:"verify"===t.canBeSyndicated&&("en"!==t.lang?M.MSG_4250:M.MSG_2200),m("withContributorPayment"===t.canBeSyndicated&&!0!==r?M.MSG_2300:"withContributorPayment"===t.canBeSyndicated&&!0===t.downloaded?M.MSG_2340:"withContributorPayment"===t.canBeSyndicated?M.MSG_2320:"no"!==t.canBeSyndicated&&t.canBeSyndicated?!0===t.downloaded?M.MSG_2100:0===t.canDownload?"en"!==t.lang?M.MSG_4250:M.MSG_4200:-1===t.canDownload?M.MSG_4100:M.MSG_2000:M.MSG_4000,t)}var P,I={CATEGORY:"syndication",DATA:{context:{app:"Syndication"},system:{product:"Syndication",source:"o-tracking"}},URI:"https://spoor-api.ft.com/px.gif"};function q(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function N(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var D,G=(N(P={},"a.card__concept-article-link",{fn:"closest",slc:".card__concept-article"}),N(P,"a.topic-card__concept-article-link",{fn:"closest",slc:".topic-card__concept-article"}),N(P,"a.package__content-item",{fn:"querySelector",slc:".package__title"}),N(P,".story__link",{fn:"closest",slc:'article[data-trackable="story"]'}),N(P,"a",{fn:"closest",slc:".o-teaser__heading"}),N(P,".o-teaser",{fn:"querySelector",slc:".o-teaser__heading"}),N(P,".stream-item",{fn:"querySelector",slc:".card-openable__headline"}),N(P,'article[class="article"]',{fn:"querySelector",slc:".topper__headline"}),N(P,"article.article--brand",{fn:"querySelector",slc:".topper__headline"}),N(P,"article.article-grid",{fn:"querySelector",slc:".topper__headline",up:1}),N(P,"div.hero",{fn:"querySelector",slc:".hero__heading"}),N(P,"main.video",{fn:"querySelector",slc:".video__title"}),N(P,"li.o-teaser__related-item",{}),P);function R(t){return D=t,addEventListener("asyncContentLoaded",(function(){return F()}),!0),addEventListener("nSyndication.dataChanged",(function(){return function(t){Array.isArray(t)||(t=B());var e=Array.from(t).reduce((function(t,e){var n=e.getAttribute("data-content-id");return Array.isArray(t[n])||(t[n]=[]),t[n].push(e),t}),{});_.forEach((function(t){return function(t,e){if(!e.length)return;e.forEach((function(e){return function(t,e){var n=function(t){var e="FORM"!==t.tagName.toUpperCase()&&"BUTTON"!==t.tagName.toUpperCase();if(t!==document.documentElement&&e)for(var n=Object.entries(G),r=0,a=n;r<a.length;r++){var o=q(a[r],2),i=o[0],c=o[1];if(t.matches(i)){if("number"==typeof c.up&&c.up==c.up)for(var s=-1;++s<c.up;)t=t.parentElement;if(!c.fn&&!c.slc)return t;var d=t[c.fn](c.slc);if(d)return d}}return null}(e);null!==n&&"true"!==n.getAttribute("data-syndicated")&&(n.classList.add("n-syndication"),n.classList.add("n-syndication-state-".concat(t.canBeSyndicated)),h(n,function(t){var e=t.messageCode,n=t.lang,r=void 0===n?"en":n,a=t.id,o=t.type,i="n-syndication-icon-state-".concat(e).toLowerCase();return v('<button\n\t\t\t\t\t\t\tclass="n-syndication-icon '.concat(i,'"\n\t\t\t\t\t\t\tdata-content-id="').concat(a,'"\n\t\t\t\t\t\t\tdata-iso-lang="').concat(r,'"\n\t\t\t\t\t\t\tdata-content-type="').concat(o,'"\n\t\t\t\t\t\t\tdata-syndicated="true"\n\t\t\t\t\t\t\tdata-trackable="syn-icon"\n\t\t\t\t\t\t\tdata-message-code="').concat(e,'"\n\t\t\t\t\t\t\ttype="button">\n\t\t\t\t\t\t\t<span class="o-normalise-visually-hidden">').concat(j(t,D),"</span>\n\t\t\t\t\t\t</button>"))}(t)),n.setAttribute("data-content-type",t.type),n.setAttribute("data-syndicated","true"));n!==e&&(e.setAttribute("data-content-type",t.type),e.setAttribute("data-syndicated","true"))}(t,e)}))}(t,e[t.id])})),Object(i.broadcast)("nSyndication.iconified")}()}),!0),F()}function B(){return Object(i.$$)(["[data-content-id]","[data-id]","a.card__concept-article-link","a.topic-card__concept-article-link","a.package__content-item",".story__link"].join(", "))}function F(){var t,e,n=B();return function(t){return S.apply(this,arguments)}((t=n,e=Array.from(t).reduce((function(t,e){var n=f(e);return n&&(t[n]=n),t}),{}),Object.keys(e)))}var U,z,H,V,$,Y=n("922a4198"),J=n("a6e351b8"),W=new(n.n(J).a)("local","syndication"),Z=location.pathname.includes("/download"),K=location.pathname.includes("/save");function X(t){addEventListener("click",Q,!0),addEventListener("keyup",tt,!0),addEventListener("resize",at,!0),Y.default.listenTo("resize"),$=t}function Q(t){var e=A(t.target),n=!0,r={};if(r.category=I.CATEGORY,r.contractID=$.contract_id,r.product=I.CATEGORY,r.url=location.href,r.action=t.target.getAttribute("data-trackable"),e&&(r.lang=e.lang,r.message=e.messageCode,r.article_id=e.id,r.syndication_content=e.type),t.target.matches('[data-content-id][data-syndicated="true"].n-syndication-icon'))ot(t);else if(t.target.matches('[data-content-id][data-syndicated="true"].download-button'))t.preventDefault(),ot(t);else if(t.target.matches('.n-syndication-action[data-action="save"]'))!function(t){T(A(t.target).id).forEach((function(t){return t.saved=!0}))}(t),rt(),ot(t),nt();else if(t.target.matches('.n-syndication-action[data-action="download"]'))!function(t){var e=A(t.target);T(e.id).forEach((function(t){t.downloaded=!0,t.messageCode="MSG_2100"})),Object(i.broadcast)("nSyndication.downloadItem",{item:e})}(t),nt();else if(it()){var a=t.target.getAttribute("data-action");(t.target.matches(".n-syndication-modal-shadow")||a&&"close"===a)&&(t.preventDefault(),nt())}else n=!1;!n||Object(i.broadcast)("oTracking.event",r)}function tt(t){switch(t.key){case"Escape":rt();var e={};e.category=I.CATEGORY,e.contractID=$.contract_id,e.product=I.CATEGORY,e.url=location.href,e.action="close-syndication-modal",Object(i.broadcast)("oTracking.event",e);break;case" ":case"Enter":t.target.matches('[data-content-id][data-syndicated="true"].n-syndication-icon')&&ot(t)}}function et(t){var e,n,r=function(t){return[!0===$.MAINTENANCE_MODE,"package"===t.type,!0===t.notAvailable,"verify"===t.canBeSyndicated,"withContributorPayment"===t.canBeSyndicated&&!0!==$.contributor_content,"no"===t.canBeSyndicated,!t.canBeSyndicated,t.canDownload<1].includes(!0)}(t),a=function(t){return[!0===t.saved,!0===$.MAINTENANCE_MODE,"package"===t.type,!0!==t.notAvailable&&"no"===t.canBeSyndicated,!0!==t.notAvailable&&!t.canBeSyndicated].includes(!0)}(t),o=r?"#":function(t,e){var n="".concat(location.port?"":"https://dl.syndication.ft.com","/syndication/download/").concat(t).concat(V);e.lang&&(n+=(n.includes("?")?"&":"?")+"lang=".concat(e.lang));return n}(t.id,t),i=r?"Download unavailable":"Download",c=a?"#":function(t,e){var n="/syndication/save/".concat(t).concat(V);e.lang&&(n+=(n.includes("?")?"&":"?")+"lang=".concat(e.lang));return n}(t.id,t),s=Z?"save-for-later":"save-for-later-downloads-page",d=!0===$.MAINTENANCE_MODE?"":t.title;return n=!0===t.saved?"Already saved":a?"Save unavailable":"Save for later",Z?e="redownload":K||(e="download-items"),v('<div class="n-syndication-modal-shadow"></div>\n\t\t\t\t\t\t\t<div class="n-syndication-modal n-syndication-modal-'.concat(t.type,'" role="dialog" aria-labelledby="\'Download:  ').concat(d,'" tabindex="0">\n\t\t\t\t\t\t\t\t<header class="n-syndication-modal-heading">\n\t\t\t\t\t\t\t\t\t<a class="n-syndication-modal-close" data-action="close" \'data-trackable="close-syndication-modal" role="button" href="#" aria-label="Close" title="Close" tabindex="0"></a>\n\t\t\t\t\t\t\t\t\t<span role="heading" class="n-syndication-modal-title">').concat(d,'</span>\n\t\t\t\t\t\t\t\t</header>\n\t\t\t\t\t\t\t\t<section class=" n-syndication-modal-content">\n\t\t\t\t\t\t\t\t\t').concat(t.wordCount?'<span class="n-syndication-modal-word-count">Word count: '.concat(t.wordCount,"</span>"):"",'\n\t\t\t\t\t\t\t\t\t<div class="n-syndication-modal-message">\n\t\t\t\t\t\t\t\t\t').concat(j(t,$),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="n-syndication-actions" data-content-id="').concat(t.id,'" data-iso-lang="').concat(t.lang,'">\n\t\t\t\t\t\t\t\t\t\t<a class="n-syndication-action" data-action="save" ').concat(a?"disabled":"",' data-trackable="').concat(s,'" href="').concat(c,'">').concat(n,'</a>\n\t\t\t\t\t\t\t\t\t\t<a class="n-syndication-action n-syndication-action-primary" data-action="download" ').concat(r?"disabled":""," ").concat(e?'data-trackable="'.concat(e,'"'):"",' href="').concat(o,'">').concat(i,"</a>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</section>\n\t\t\t\t\t\t\t</div>"))}function nt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,e=setTimeout((function(){clearTimeout(e),e=null,rt()}),t)}function rt(){it()&&(z.remove(),H.remove(),U=null,z=null,H=null)}function at(){if(it()){var t=document.documentElement,e=t.clientWidth/2-z.clientWidth/2,n=Math.max(t.clientHeight/3-z.clientHeight/2,100);z.style.left="".concat(e,"px"),z.style.top="".concat(n,"px")}}function ot(t){it()&&rt(),function(t){do{if("A"===t.tagName.toUpperCase())return!0}while(t=t.parentElement);return!1}(t.target.parentElement)&&t.preventDefault(),W.get("download_format").then((function(e){V=e&&Date.now()-e.time<=3e5?"?format=".concat(e.format):"",U=et(A(t.target)),z=U.lastElementChild||U.lastChild,H=U.firstElementChild||U.firstChild,document.body.appendChild(U),at()}))}function it(){return!(!z||!document.body.contains(z))}function ct(t){var e=document.createElement("a");e.classList.add("o-header__nav-link"),e.classList.add("n-syndication-republishing"),e.setAttribute("data-trackable","Republishing"),e.setAttribute("href","/republishing/contract"),e.textContent="Republishing",e.addEventListener("click",(function(e){Object(i.broadcast)("oTracking.event",{category:"syndication",action:"Republishing",contractID:t.contract_id,product:"syndication",referrer:location.href,url:e.target.href||e.target.getAttribute("href")})}));var n=document.createElement("li");return n.classList.add("o-header__nav-item"),n.setAttribute("data-trackable","syndication"),n.appendChild(e),n}function st(t){!function(t){var e=Object(i.$)("#o-header-nav-desktop");if(e){var n=e.querySelector(".o-header__container");if(n){var r=n.querySelector('[data-trackable="user-nav"]');r||((r=document.createElement("ul")).classList.add("o-header__nav-list"),r.classList.add("o-header__nav-list--right"),r.setAttribute("data-trackable","user-nav"),n.appendChild(r));var a=ct(t);r.appendChild(a)}}}(t),function(t){var e=Object(i.$)("#o-header-drawer");if(e){var n=e.querySelector('[data-trackable="Portfolio"]');if(n){var r=ct(t);n.parentElement.insertAdjacentElement("afterend",r)}}}(t)}function dt(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function ut(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){dt(o,r,a,i,c,"next",t)}function c(t){dt(o,r,a,i,c,"throw",t)}i(void 0)}))}}function lt(){return ft.apply(this,arguments)}function ft(){return(ft=ut(o.a.mark((function t(){var e,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="S1",t.next=3,Object(c.products)().catch((function(t){return t}));case 3:return n=t.sent,t.abrupt("return",!(!n||!n.products)&&n.products.includes(e));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function pt(t){return ht.apply(this,arguments)}function ht(){return(ht=ut(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.get("syndication")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,lt();case 4:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,u();case 9:if(n=t.sent,!(!n||!0!==n.migrated)){t.next=13;break}return t.abrupt("return");case 13:if(st(n),r=n.allowed||{},!(!0===r.spanish_content||!0===r.spanish_weekend)||!0===r.ft_com){t.next=18;break}return t.abrupt("return");case 18:k(n),R(n),X(n),Object(i.$$)(".video__actions__download").forEach((function(t){return t.parentNode.removeChild(t)}));case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},"1c5be40c":function(t,e,n){var r=n("20ee13ff").default,a=n("d4400cb8"),o=n("d4f6402f"),i=n("038b8f1d"),c=n("6fc56ae0");function s(t){var e="https://www.ft.com/__feedback-api/v1/survey/".concat(t);return fetch(e,{headers:{Accept:"application/json"}}).then((function(t){return 200!==t.status&&t.text().then((function(t){throw new Error("Bad response status ".concat(status,": ").concat(t))})),t.json()}))}function d(t,e,n,r){var a=t.content,c=r.containerSelector,s=void 0===c?"body":c;document.querySelectorAll(".n-feedback__survey-next,.n-feedback__survey-back",a).forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var n="."+e.target.getAttribute("data-survey-next");u(t,n)}),!0)}));var d=document.querySelector(".n-feedback__survey__wrapper-form",a);d&&d.addEventListener("submit",(function(a){a.preventDefault();var c=function(t){var e=t.content,n=document.querySelector(".n-feedback__survey__wrapper-form",e),r={};return n.querySelectorAll("input,textarea").forEach((function(t){"radio"===t.type?t.checked&&(r[t.name]=t.value):"checkbox"===t.type?t.checked&&(r[t.name]=(r[t.name]||[]).concat(t.value)):r[t.name]=t.value})),r}(t),d=i(r);u(t,".feedback-overlay__loader-wrapper"),o(n,e,c,d).then((function(){u(t,".n-feedback__survey-block-finished"),t.wrapper.addEventListener("oOverlay.destroy",(function(){!function(t){document.querySelector("".concat(t," .n-feedback__container")).classList.add("n-feedback--hidden")}(s)}))})).catch((function(e){console.error("Failed to post form",e),t.close()}))})),a&&a.addEventListener("change",(function(t){l(t.target.closest(".n-feedback__survey-block"))}))}function u(t,e){var n=t.content,r=document.querySelector(e,n),a=document.querySelectorAll(".n-feedback__survey-block",n);l(r),a.forEach((function(t){return t.classList.add("n-feedback--hidden")})),r.classList.remove("n-feedback--hidden")}function l(t){var e=document.querySelector(".n-feedback__survey-next",t);return function(t){var e=document.querySelectorAll('[data-validation="true"]',t);return 0===Array.prototype.slice.call(e).filter((function(t){if(t.classList.contains("n-feedback__question-radio")){var e=document.querySelectorAll('input[type="radio"]',t);return 0===Array.prototype.slice.call(e).filter((function(t){return t.checked})).length}})).length}(t)?(e.removeAttribute("disabled"),!0):(e.setAttribute("disabled","disabled"),!1)}function f(t){t[t.visible?"close":"open"]()}function p(t,e){var n=c[e].formHead;t.innerHTML='<div class="n-feedback__overlay__container"></div>\n\t\t<p class="n-feedback__desktop__prompt">\n\t\t\t'.concat(n,'\n\t\t</p>\n\t\t<button class="n-feedback__survey-trigger" aria-label="Give feedback on the Financial Times website" data-trackable="feedback-start">\n\t\t\t<span>Feedback</span>\n\t\t</button>')}var h=function(t){return t.domain||(t.domain="FT.com"),t.containerSelector||(t.containerSelector="body"),t};t.exports.init=function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o="SV_9mBFdO5zpERO0cZ",i=h(n),c=i.containerSelector,u=i.domain,v=document.querySelector("".concat(c," .n-feedback__container"));v.classList.remove("n-feedback--hidden"),p(v,u);var m=document.querySelector("".concat(c," .n-feedback__container .n-feedback__survey-trigger")),y="feedback-overlay-".concat(c);return m&&m.addEventListener("click",(function(){e||(e=new r(y,{html:'<div class="feedback-overlay__loader-wrapper"><div class="o-loading o-loading--dark o-loading--large"></div></div>',fullscreen:!0,class:"feedback-overlay",zindex:1001,customclose:".n-feedback__survey__close-button"})),t||s(o).then((function(r){if(!r||r&&0===r.length)console.error("Bad survey data");else{t=r;var i=a.buildSurvey(t,o,u);e.visible||e.open(),e.content.innerHTML=i,d(e,t,o,n),l(document.querySelectorAll(".n-feedback__survey-block",e.content)[0])}})).catch((function(t){e.destroy(),v.classList.add("n-feedback--hidden"),m.classList.add("n-feedback--hidden"),console.error("Failed to get survey data",t)})),f(e)}),!0),{destroy:function(){e&&e.destroy()}}}},"1ea050fd":function(t,e){function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var e,r=t.filter((function(t){return t.questions&&t.questions.length>0}));return(e=[]).concat.apply(e,n(r.map((function(t){return t.questions})))).map((function(t){return{id:t.questionId,text:t.questionText}}))}},"6fc56ae0":function(t,e){t.exports={app:{formHead:"How easy or hard was it to use the FT app today?"},"FT.com":{formHead:"How easy or hard was it to use FT.com today?"}}},d2988f39:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"SPOOR_API_INGEST_URL",(function(){return q})),n.d(e,"broadcast",(function(){return _})),n.d(e,"init",(function(){return L})),n.d(e,"trackers",(function(){return I}));var r=n("0887d82c"),a=n.n(r),o=n("a4a69ef7"),i=n.n(o),c=n("939738f6"),s=n.n(c),d=n("b4722769");function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b={appName:"app",contentId:"rootContentId",contentType:"rootContentType",conceptId:"rootConceptId",conceptType:"rootConceptType",segmentid:"marketing_segment_id",cpccampaign:"cpc_campaign",abTestState:"active_ammit_flags"};function g(t){var e={};return Object.keys(t).forEach((function(n){var r=t[n];"abTestState"===n&&(r=function(t){var e={};return t.split(",").map((function(t){var n=m(t.split(":"),2),r=n[0],a=n[1];r&&a&&(e[r]=a)})),e}(r)),"contentId"===n&&(e.content=h(h({},e.content),{},{uuid:r})),"contentType"===n&&(e.content=h(h({},e.content),{},{asset_type:r})),e[b[n]||n]=r})),e}function _(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=Element.prototype.isPrototypeOf(this)?this:document.body,a=new CustomEvent(t,{bubbles:n,cancelable:!0,detail:e});r.dispatchEvent(a)}var w=function(){function t(t){var e=this;if(void 0===t&&(t={}),this.config={dataConsumption:!1,largestContentfulPaint:!1,resourceTiming:!1,analyticsTracker:function(t){},logPrefix:"Perfume.js:",logging:!0,maxMeasureTime:15e3},this.c=window.console,this.d=document,this.t=!1,this.i=0,this.s="Recording already",this.o={},this.h={},this.u={beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0},this.w=window,this.m=window.performance,this.v=window.navigator,this.l=function(){e.d.hidden&&(e.t=e.d.hidden)},this.config=Object.assign({},this.config,t),this.p()){if(this.g())try{this.T()}catch(t){this.config.logging&&this.c.warn(this.config.logPrefix,t)}this.k(),this._("navigationTiming",this.N()),this._("networkInformation",this.I())}}return t.prototype.start=function(t){this.p()&&(this.o[t]?this.P(this.s+" started."):(this.o[t]=!0,this.m.mark("mark_"+t+"_start"),this.t=!1))},t.prototype.end=function(t,e){var n=this;if(void 0===e&&(e={}),this.p())if(this.o[t]){this.m.mark("mark_"+t+"_end");var r=this.C(t),a=parseFloat(r.toFixed(2));delete this.o[t],this.j((function(){var r={F:t,data:a,duration:a,L:e,O:n.D()};n.log(r),n.q(r)}))}else this.P(this.s+" stopped.")},t.prototype.endPaint=function(t,e){var n=this;setTimeout((function(){n.end(t,e)}))},t.prototype.clear=function(t){this.m.clearMarks("mark_"+t+"_start"),this.m.clearMarks("mark_"+t+"_end"),delete this.o[t]},t.prototype.M=function(t){this.B({R:t,F:"firstInputDelay",S:"duration"}),this.A(),this.G()},t.prototype.G=function(){this.H&&(clearTimeout(this.H),this.H=void 0,this._("dataConsumption",this.u))},t.prototype.A=function(){this.h.J&&this.i&&(this.K(this.i,"largestContentfulPaint"),this.h.J.disconnect())},t.prototype.U=function(){this.h.V=this.W("first-input",this.M.bind(this))},t.prototype.X=function(){var t=this;this.h.Y=this.W("paint",(function(e){t.B({R:e,Z:"first-paint",F:"firstPaint",S:"startTime"}),t.B({R:e,Z:"first-contentful-paint",F:"firstContentfulPaint",S:"startTime"})}))},t.prototype.$=function(){var t=this;this.h.J=this.W("largest-contentful-paint",(function(e){var n=e.pop();n&&(t.i=n.renderTime||n.loadTime)}))},t.prototype.T=function(){this.X(),this.U(),this.$(),(this.config.resourceTiming||this.config.dataConsumption)&&this.tt()},t.prototype.tt=function(){var t=this;this.W("resource",(function(e){t.it({R:e})})),this.H=setTimeout((function(){t.G()}),15e3)},t.prototype.p=function(){return this.m&&!!this.m.getEntriesByType&&!!this.m.now&&!!this.m.mark},t.prototype.g=function(){return this.w.chrome&&"PerformanceObserver"in this.w},t.prototype.nt=function(t){var e=this.m.getEntriesByName(t),n=e[e.length-1];return n&&"measure"===n.entryType?n.duration:-1},t.prototype.D=function(){return this.v?{deviceMemory:this.v.deviceMemory?this.v.deviceMemory:0,hardwareConcurrency:this.v.hardwareConcurrency?this.v.hardwareConcurrency:0}:{}},t.prototype.N=function(){if(!this.p())return{};var t=performance.getEntriesByType("navigation")[0];if(!t)return{};var e=t.responseStart,n=t.responseEnd;return{fetchTime:n-t.fetchStart,workerTime:t.workerStart>0?n-t.workerStart:0,totalTime:n-t.requestStart,downloadTime:n-e,timeToFirstByte:e-t.requestStart,headerSize:t.transferSize-t.encodedBodySize||0,dnsLookupTime:t.domainLookupEnd-t.domainLookupStart}},t.prototype.I=function(){if("connection"in this.v){var t=this.v.connection;return"object"!=typeof t?{}:{downlink:t.downlink,effectiveType:t.effectiveType,rtt:t.rtt,saveData:!!t.saveData}}return{}},t.prototype._=function(t,e){var n=this;Object.keys(e).forEach((function(t){"number"==typeof e[t]&&(e[t]=parseFloat(e[t].toFixed(2)))}));var r=this.D();this.j((function(){n.log({F:t,data:e,O:r}),n.q({F:t,data:e,O:r})}))},t.prototype.K=function(t,e,n){var r=this;void 0===n&&(n="ms");var a=parseFloat(t.toFixed(2));if(!(a>this.config.maxMeasureTime||a<=0)){var o=this.D();this.j((function(){r.log({F:e,data:a+" "+n,O:o}),r.q({F:e,duration:a,O:o})}))}},t.prototype.log=function(t){!this.t&&this.config.logging&&this.c.log("%c "+this.config.logPrefix+" "+t.F+" ","color:#ff6d00;font-size:11px;",t.data,t.O)},t.prototype.P=function(t){this.config.logging&&this.c.warn(this.config.logPrefix,t)},t.prototype.k=function(){void 0!==this.d.hidden&&this.d.addEventListener("visibilitychange",this.l)},t.prototype.C=function(t){var e="mark_"+t+"_start",n="mark_"+t+"_end";return this.m.measure(t,e,n),this.nt(t)},t.prototype.W=function(t,e){return this.st=new PerformanceObserver((function(t){var n=t.getEntries();e(n)})),this.st.observe({type:t,buffered:!0}),this.st},t.prototype.B=function(t){var e=this;t.R.forEach((function(n){(!t.Z||t.Z&&n.name===t.Z)&&e.K(n[t.S],t.F),e.h.Y&&"first-contentful-paint"===n.name&&e.h.Y.disconnect()})),this.h.V&&"firstInputDelay"===t.F&&this.h.V.disconnect()},t.prototype.it=function(t){var e=this;t.R.forEach((function(t){if(e.config.resourceTiming&&e._("resourceTiming",t),e.config.dataConsumption&&t.decodedBodySize&&t.initiatorType){var n=t.decodedBodySize/1e3;e.u[t.initiatorType]+=n,e.u.total+=n}}))},t.prototype.j=function(t){"requestIdleCallback"in this.w?this.w.requestIdleCallback(t,{timeout:3e3}):t()},t.prototype.q=function(t){if(!this.t){var e=t.F,n=t.data,r=t.duration,a=t.L,o=t.O,i=a||{};this.config.analyticsTracker({metricName:e,data:n,duration:r,eventProperties:i,navigatorInformation:o})}},t}(),k="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};var S=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){var e=[],n=void 0===k?window:k,r=Math.pow(256,6),a=Math.pow(2,52),o=2*a,i=Math.random;function c(t){var e,n=t.length,r=this,a=0,o=r.i=r.j=0,i=r.S=[];for(n||(t=[n++]);a<256;)i[a]=a++;for(a=0;a<256;a++)i[a]=i[o=255&o+t[a%n]+(e=i[a])],i[o]=e;(r.g=function(t){for(var e,n=0,a=r.i,o=r.j,i=r.S;t--;)e=i[a=255&a+1],n=256*n+i[255&(i[a]=i[o=255&o+e])+(i[o]=e)];return r.i=a,r.j=o,n})(256)}function s(t,e){var n,r=[],a=(typeof t)[0];if(e&&"o"==a)for(n in t)try{r.push(s(t[n],e-1))}catch(t){}return r.length?r:"s"==a?t:t+"\0"}function d(t,e){for(var n,r=t+"",a=0;a<r.length;)e[255&a]=255&(n^=19*e[255&a])+r.charCodeAt(a++);return l(e)}function u(t){try{return n.crypto.getRandomValues(t=new Uint8Array(256)),l(t)}catch(t){return[+new Date,n,n.navigator&&n.navigator.plugins,n.screen,l(e)]}}function l(t){return String.fromCharCode.apply(0,t)}t.exports=function(n,i){if(i&&!0===i.global)return i.global=!1,Math.random=t.exports(n,i),i.global=!0,Math.random;var f=i&&i.entropy||!1,p=[],h=(d(s(f?[n,l(e)]:0 in arguments?n:u(),3),p),new c(p));return d(l(h.S),e),function(){for(var t=h.g(6),e=r,n=0;t<a;)t=256*(t+n),e*=256,n=h.g(1);for(;t>=o;)t/=2,e/=2,n>>>=1;return(t+n)/e}},t.exports.resetGlobal=function(){Math.random=i},d(Math.random(),e)}));S.resetGlobal;var A=["domInteractive","domComplete","timeToFirstByte","firstPaint","largestContentfulPaint","firstInputDelay"],T=[25,50,75,100],E={onScroll:function(){},target:"body",debug:!1},x=function(){function t(e){u(this,t),this.options=h(h({},E),e),this.init()}return f(t,[{key:"init",value:function(){var t=this,e=document.querySelector(this.options.target);e&&"IntersectionObserver"in window&&(this.observer=new IntersectionObserver(this.handleIntersection.bind(this)),e.style.position="relative",T.forEach((function(n){var r=document.createElement("div");r.className="n-tracking-scroll-depth-marker",r.style.position="absolute",r.style.top="".concat(n,"%"),r.style.bottom="0",r.style.width="100%",r.style.zIndex="-1",r.setAttribute("data-scroll-depth",n),e.appendChild(r),t.observer.observe(r)})))}},{key:"handleIntersection",value:function(t){var e=this;t.forEach((function(t){if(t.isIntersecting||t.intersectionRatio>0){var n=t.target,r=n.getAttribute("data-scroll-depth");e.options.onScroll(r),e.options.debug&&console.log("ScrollDepth",{marker:r}),n.parentNode&&n.parentNode.removeChild(n),e.observer.unobserve(n)}}))}}]),t}(),O=["load","click","focus","scroll","mousemove","touchstart","touchend","touchcancel","touchleave"],C=["blur"],M=["beforeunload","unload","pagehide"],j={onExit:function(){},debug:!1},P=function(){function t(e){u(this,t),this.options=h(h({},j),e),this.totalAttentionTime=0,this.hasExited=!1,this.init()}return f(t,[{key:"init",value:function(){var t=this;O.forEach((function(e){window.addEventListener(e,t.startAttention.bind(t))})),C.forEach((function(e){window.addEventListener(e,t.endAttention.bind(t))})),M.forEach((function(e){window.addEventListener(e,t.handleExit.bind(t))})),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),document.querySelectorAll("video").forEach((function(e){e.addEventListener("playing",t.startConstantAttention.bind(t)),e.addEventListener("pause",t.endConstantAttention.bind(t)),e.addEventListener("ended",t.endConstantAttention.bind(t))}))}},{key:"startAttention",value:function(t){clearTimeout(this.attentionTimeout),this.startAttentionTime||(this.startAttentionTime=Date.now()),this.attentionTimeout=setTimeout(this.endAttention.bind(this,{type:"timeout"}),15e3),this.options.debug&&console.log("AttentionTime start",{event:t.type})}},{key:"endAttention",value:function(t){this.startAttentionTime&&(clearTimeout(this.attentionTimeout),this.totalAttentionTime=this.getAttentionTime(),this.startAttentionTime=null),this.options.debug&&console.log("AttentionTime end",{event:t.type,time:this.totalAttentionTime})}},{key:"startConstantAttention",value:function(){this.constantAttentionInterval=setInterval(this.startAttention.bind(this),15e3)}},{key:"endConstantAttention",value:function(t){this.endAttention(t),clearInterval(this.constantAttentionInterval)}},{key:"getAttentionTime",value:function(){var t=0;return this.startAttentionTime&&(t=Math.round((Date.now()-this.startAttentionTime)/1e3)),this.totalAttentionTime+t}},{key:"handleVisibilityChange",value:function(t){"hidden"===document.visibilityState?this.endAttention(t):this.startAttention(t)}},{key:"handleExit",value:function(t){this.hasExited||(this.endAttention(t),this.options.debug&&console.log("AttentionTime",{event:t.type,time:this.totalAttentionTime}),this.options.onExit(this.totalAttentionTime),this.hasExited=!0)}}]),t}(),I=Object.freeze({__proto__:null,realUserMonitoringForPerformance:function(){if(!(!1 in window)){var t,e=(t=document.cookie&&document.cookie.match(/spoor-id=([^;]+)/))?t[1]:null;if(n=5,r=S(e)(),Math.round(100*r)<=n){var n,r,a=performance.getEntriesByType("navigation")[0];if("navigate"===a.type){var o={};d.default.complete.then((function(){o.domInteractive=Math.round(a.domInteractive),o.domComplete=Math.round(a.domComplete)}));var i=!1;new w({analyticsTracker:function(t){var e=t.metricName,n=t.duration,r=t.data;i||(n&&(o[e]=Math.round(n)),"navigationTiming"===e&&(o.timeToFirstByte=Math.round(r.timeToFirstByte)),function(t){return A.every((function(e){return"number"==typeof t[e]}))}(o)&&(console.log({performanceMetrics:o}),_("oTracking.event",{action:"performance",category:"page",context:o}),i=!0))},logging:!1,largestContentfulPaint:!0})}}}},pageAttention:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(t){_("oTracking.event",{category:"page",action:"interaction",context:{attention:{total:t}}})},n=new P(h(h({},t),{},{onExit:e})),r=function(t){_("oTracking.event",{category:"page",action:"scrolldepth",meta:{percentagesViewed:t,attention:n.getAttentionTime()}})};new x(h(h({},t),{},{onScroll:r}))},textCopying:function(){document.addEventListener("copy",(function(t){var e={nodeName:t.target.nodeName.toLowerCase()};if(window.getSelection){var n=window.getSelection().toString().trim();e.characters=n.length,e.words=n.split(/\s+/).length,e.selection=function(t){if(t.length>100){var e=100-" … ".length,n=Math.floor(e/2),r=Math.ceil(e/2);return t.substr(0,n)+" … "+t.substr(-1*r)}return t}(n)}_("oTracking.event",{action:"copy",category:"text",context:e})}))}}),q="https://spoor-api.ft.com/ingest";function L(t){var e,n=t.appContext,r=t.extraContext,o=t.pageViewContext,c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,e={},n=["segmentid","cpccampaign"],r=new URLSearchParams(t);return n.forEach((function(t){var n=r.get(t);n&&(e[t]=n)})),e}(),d={server:q,context:g(h(h(h({},c),n),r)),user:(e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,{layout:i.a.getCurrentLayout(),orientation:s.a.getOrientation(),connectionType:e?e.type:void 0}),useSendBeacon:!1};if(a.a.init(d),window===window.top||"errors-next.ft.com"===window.location.hostname){var u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.search,e=new URLSearchParams(t),n=e.get("nextErrorStatus"),r=e.get("nextErrorReason");if(n||r)return{errorStatus:n,errorReason:r,url:window.parent.location.toString(),referrer:window.parent.document.referrer}}();a.a.page(h(h({},u),o))}return a.a.click.init("cta"),a.a}}.call(this,n("fcdffa92"))},d4400cb8:function(t,e,n){function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=n("6fc56ae0");function i(t){return'<div class="n-feedback__center-block"><h2 class="n-feedback__question-header">'.concat(t.questionText,"</h2></div>")}function c(t){return'<p class="n-feedback__question-text">'.concat(t.questionText,"</p>")}function s(t){return'<div class="n-feedback__center-block"><p class="n-feedback__question-footer">'.concat(t.questionText,"</p></div>")}function d(t){var e={MC:u,TE:l},n=t.questionType.type;return n in e?e[n](t):""}function u(t){var e=t.validation.doesForceResponse,n=['<fieldset class="n-feedback__question-radio" data-validation='.concat(e,">\n\t\t\t<legend>").concat(t.questionText,'</legend>\n\t\t\t<div class="n-feedback__question-radio__container n-feedback__center-block">')];return Object.entries(t.choices).reverse().forEach((function(e,a,o){var i=r(e,2),c=i[0],s=i[1],d="";c!==o[0][0]&&c!==o[o.length-1][0]&&(d="hidden-label");var u="choice-".concat(c,"-").concat(~~(65535*Math.random()));n.push('<div class="n-feedback__question-radio__choice-container">\n\t\t\t\t<div class="o-forms-field">\n\t\t\t\t\t<div class="o-forms-input o-forms-input--radio-round o-forms-input--inline">\n\t\t\t\t\t\t<input type="radio" id="'.concat(u,'" name="').concat(t.questionId,'" value="').concat(c,'" />\n\t\t\t\t\t\t<label for="').concat(u,'" class="o-forms-input__label ').concat(d,'">\n\t\t\t\t\t\t\t<span class="n-feedback__question-radio-text">').concat(s.choiceText,"</span>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>"))})),n.push("</div></fieldset>"),n.join("\n")}function l(t){var e="text-".concat(t.questionId,"-").concat(~~(65535*Math.random()));return'<div class="n-feedback__center-block">\n\t\t\t<div class="n-feedback__question-text-entry o-forms">\n\t\t\t\t<div class="o-forms-field">\n\t\t\t\t\t<label for="'.concat(e,'" class="o-forms-label">\n\t\t\t\t\t\t<span class="o-forms-title">\n\t\t\t\t\t\t\t<span class="o-forms-title__main">').concat(t.questionText,'</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class="o-forms-input o-forms-input--textarea">\n\t\t\t\t\t\t\t<textarea id="').concat(e,'" name="').concat(t.questionId,'"></textarea>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>')}t.exports={buildSurvey:function(t,e,n){var r={header:i,footer:s,text:c,question:d},a=['<div class="n-feedback__survey" aria-live="assertive">\n\t\t\t<a class="n-feedback__survey__close-button o-overlay__close" href="#void">\n\t\t\t\t<span>I don\'t want to give feedback</span>\n\t\t\t</a>\n\t\t\t<form class="n-feedback__survey__wrapper-form">\n\t\t\t\t<input type="hidden" name="surveyId" value="'.concat(e,'" />')];t.forEach((function(e,i){var c=['<div class="n-feedback__survey-block '.concat(0===i?"":"n-feedback--hidden"," n-feedback__survey-block-").concat(i,'">')];e.questions.forEach((function(t){"How easy or hard was it to use FT.com today?"===t.questionText.trim()&&"app"===n&&(t.questionText=o[n].formHead);var e=t.questionName.toLowerCase();if(e in r){var a=r[e](t);c.push(a)}})),c.push(function(t,e){var n=[];return n.push('<div class="n-feedback__center-block"><p class="n-feedback__survey__button-bar">'),e>0&&n.push('<button class="n-feedback__primary-button n-feedback__survey-back"\n\t\t\t\tdata-survey-next="n-feedback__survey-block-'.concat(e-1,'"\n\t\t\t\tdata-trackable="feedback-previous-block">\n\t\t\t\tBack\n\t\t\t</button>')),t-1>e?n.push('<button class="n-feedback__primary-button n-feedback__survey-next"\n\t\t\t\tdata-survey-next="n-feedback__survey-block-'.concat(e+1,'"\n\t\t\t\tdata-trackable="feedback-next-block">\n\t\t\t\tNext\n\t\t\t</button>')):n.push('<button class="n-feedback__primary-button n-feedback__survey-submit"\n\t\t\t\tdata-trackable="feedback-submit">\n\t\t\t\tSubmit\n\t\t\t</button>'),n.push("</p></div>"),n.join("\n")}(t.length,i)),c.push("</div>"),a.push(c.join("\n"))})),a.push("</form>"),a.push('<div class="n-feedback__survey-block feedback-overlay__loader-wrapper n-feedback--hidden"><div class="o-loading o-loading--dark o-loading--large"></div></div>');var u=t.map((function(t){return t.questions.find((function(t){return"Text"===t.questionName}))}))[0];return a.push('<div class="n-feedback__survey-block n-feedback--hidden n-feedback__survey-block-finished">\n\t\t\t'.concat(i({questionText:"Thanks for your feedback"}),"\n\n\t\t\t").concat(u?s(u):"",'\n\n\t\t\t<div class="n-feedback__center-block"><p class="n-feedback__survey__button-bar">\n\t\t\t\t<button class="n-feedback__primary-button o-overlay__close">\n\t\t\t\t\tClose\n\t\t\t\t</button>\n\t\t</div>')),a.push("</div>"),a.join("\n")}}},d4f6402f:function(t,e,n){var r=n("1ea050fd");t.exports=function(t,e,n,a){var o={surveyId:t,surveyResponse:r(e).map((function(t){return{id:t.id,text:t.text,response:n[t.id]||""}})),additionalData:a},i={credentials:"include",method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)};return fetch("".concat("https://www.ft.com/__feedback-api/v1","/survey"),i)}},e7aa4383:function(t,e,n){"use strict";n.r(e),n.d(e,"adsUtils",(function(){return j})),n.d(e,"displayAds",(function(){return C})),n.d(e,"getAdsData",(function(){return M}));var r=n("f26e1e46"),a=n.n(r),o=n("9caaec1a"),i=n("6811401b"),c=n.n(i),s=n("d2988f39"),d=n("b8f58555"),u=n("8f475512");function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n,r,a,o,i){try{var c=t[o](i),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,a)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){p(o,r,a,i,c,"next",t)}function c(t){p(o,r,a,i,c,"throw",t)}i(void 0)}))}}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"nPermutive",(function(){return u.a}));var m=function(){var t=document.getElementById("n-ads-options"),e={};if(t)try{e=JSON.parse(t.innerHTML)}catch(t){console.error("Error while getting n-ads embedded options",t)}return e},y=function(t){return"object"==typeof t&&t.constructor==Object},b=function(t,e){var n;if(!t||!e)return"0%";for(var r in t)r<e||n&&r>n||(n=r);return n?t[n]:"0%"},g=function(t){var e=window.LUX||window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance;e&&e.mark&&(e.clearMarks(t),e.mark(t))},_=function(){window.addEventListener("message",(function(t){var e=t.data;if((void 0===e?"":e).match(/oAds/))try{var n=JSON.parse(t.data),r=(n||{}).type;if(!r)return;if("oAdsEmbed.monitor"===r){var a={category:"ads",action:"embed",message:n.message||""};return void Object(s.broadcast)("oTracking.event",a)}if("oAdsEmbed.listens"===r){var o=t.source;if(o){var i=window.smartmatchCreativeMatches;if(i){var c={messageType:"oAdsEmbed",body:{smartmatchCreativeMatches:i}};o.postMessage(c,"*")}}}}catch(t){}}))};function w(t){y(t)&&t.matches&&(window.smartmatchCreativeMatches=t.matches)}var k=[{sampleSize:.1,spoorAction:"page-initialised",triggers:["serverScriptLoaded"],marks:["consentBehavioral","consentProgrammatic","moatTimeout","initialising","IVTComplete","adsAPIComplete","initialised","serverScriptLoaded"],navigation:["domInteractive"]},{sampleSize:.1,spoorAction:"slot-requested",triggers:["slotGoRender"],marks:["slotReady","slotCanRender","slotGoRender"],multiple:!0},{sampleSize:.1,spoorAction:"slot-rendered",triggers:["slotRenderEnded"],marks:["slotRenderStart","slotExpand","slotRenderEnded"],multiple:!0},{sampleSize:.1,spoorAction:"slot-collapsed",triggers:["slotCollapsed"],marks:["slotCollapsed"],multiple:!0}];function S(t){c.a.utils.setupMetrics(k,(function(t){return Object(s.broadcast)("oTracking.event",t)}),t)}function A(){return(A=h(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=f(f(f({},m()),e),n.get("adsEnableTestCreatives")&&{testads:!0})).smartmatch&&(w(e.smartmatch),_()),e.appName){t.next=4;break}throw new Error("Error initialising display ads. `options.appName` is required");case 4:return e.disableMonitoring||S(!0),Object(d.setUSPrivacy)(),t.next=8,C.initOads(e,n);case 8:r=t.sent,C.initAdSlots(r);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(){return(T=h(a.a.mark((function t(e,n){var r,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=C.getOAdsConfig(e,n),t.next=4,c.a.init(o);case 4:r=t.sent,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("There was an error when initialising o-ads",t.t0);case 10:return t.abrupt("return",r);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}function E(t){return t?(console.warn("o-ads running in sandbox mode. No live ads showing"),"test.5887.origami"):location.hash.includes("adsandbox")?(console.warn("o-ads running in sandbox mode. No live ads showing"),"sandbox.next.ft"):location.hash.includes("moatwrappertest")?(console.warn("o-ads running in sandbox mode. No live ads showing"),"test.5887.moatperformance"):"ft.com"}function x(t){return Array.isArray(t)?t.join("/"):"unclassified"}var O=function(t){var e=t.appName,n=t.rootId,r=t.abTestState,a=t.adsLayout,o=t.enableTestCreatives,i=t.targeting,c=t.smartmatch;return f(f(f(f({pt:e.toLowerCase().substr(0,3),nlayout:a||"default",mvt:r,rootid:n},o&&{enableTestCreatives:o}),i&&C.getUserTargeting(i.user)),i&&C.getArticleTargeting(i.article)),c&&function(t){if(y(t)){if(t.targeting){var e=t.targeting,n=e.key,r=e.value;if("smid"===n&&void 0!==r)return v({},n,r)}return null}}(c))};var C={init:function(t,e){return A.apply(this,arguments)},initAdSlots:function(t){var e=document.querySelectorAll(".o-ads, [data-o-ads-name]");e.length?e.forEach((function(e){return t.slots.initSlot(e)})):console.warn("No ad slot found on the page")},initOads:function(t,e){return T.apply(this,arguments)},getOAdsConfig:function(t,e){var n=t.lazyLoadMargins,r=t.sandbox,a=t.adUnit,o=O(t);return{gpt:{network:"5887",site:E(r),zone:x(a),rendering:e.get("adsEnableSRA")?"sra":null},formats:{PaidPost:{sizes:"fluid"},OneByOne:{sizes:[1,1]},Outstream:{sizes:[1,1]}},responsive:{extra:[1025,0],large:[980,0],medium:[760,0],small:[0,0]},collapseEmpty:"before",lazyLoad:{viewportMargin:b(n,window.innerWidth)},targeting:o,disableConsentCookie:!1}},getAllTargeting:O,getUserTargeting:function(t){if(y(t)){var e="boolean"==typeof t.loggedInStatus,n=t.hui&&t.hui.gender,r=t.hui&&t.hui.indb2b,a=t.industry&&t.industry.code,o=t.responsibility&&t.responsibility.code,i=t.position&&t.position.code;return f(f(f(f(f(f(f(f(f({},t.uuid&&{guid:t.uuid}),t.spoorId&&{device_spoor_id:t.spoorId}),t.subscriptionLevel&&{slv:t.subscriptionLevel}),e&&{loggedIn:t.loggedInStatus}),n&&{gender:t.hui.gender}),r&&{indb2b:t.hui.indb2b}),a&&v({},"05",t.industry.code)),o&&v({},"06",t.responsibility.code)),i&&v({},"07",t.position.code))}return null},getArticleTargeting:function(t){if(y(t)){var e=Array.isArray(t.specialReport)&&t.specialReport.length>0;return f(f(f(f(f(f(f(f({},t.uuid&&{auuid:t.uuid}),t.title&&{title:t.title}),t.admants&&{ad:t.admants.join(",")}),t.categories&&{ca:t.categories.join(",")}),t.topic&&{topic:t.topic.join(",")}),t.brand&&{secbrand:t.brand.join(",")}),e&&{sr:t.specialReport.join(",")}),t.srUUID&&{sruuid:t.srUUID})}return null},getGptSite:E,getGptZone:x,validateTraffic:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},e=document.getElementById("n-ads-moat");if(!e){var n=document.createElement("script");n.defer=!0,n.src="https://sejs.moatads.com/financialtimesprebidheader859796398452/yi.js",n.id="n-ads-moat",n.onload=function(){g("oAds.IVTComplete"),t()},n.onerror=function(){g("oAds.IVTComplete"),t()},document.head.appendChild(n)}}};function M(t){var e,n=t.user,r=void 0!==n&&n,a=t.page,o=void 0!==a&&a,i=t.host,c=void 0===i?"https://ads-api.ft.com/v2":i,s=[];if(r?s.push(function(t){var e="".concat(t,"/user");return fetch(e,{timeout:2e3,useCorsProxy:!0,credentials:"include"}).then((function(t){return t.json()}))}(c)):s.push(Promise.resolve()),y(o)&&o.id&&o.type){var d="article"===(e=o.type)?"content":"stream"===e?"concept":void 0;s.push(function(t,e,n){if(n&&"content"===e||"concept"===e){var r="".concat(t,"/").concat(e,"/").concat(n);return fetch(r,{timeout:2e3,useCorsProxy:!0}).then((function(t){return t.json()}))}console.error("Invalid ads-api endpoint specified for retrieving page targeting data")}(c,d,o.id))}return Promise.all(s).then((function(t){return g("oAds.adsAPIComplete"),function(t,e){var n={metadata:{}};return t.length>=1&&(n.metadata.user=f({},y(t[0])&&t[0])),2===t.length&&y(e)&&(n.metadata[e.type]=f({},y(t[1])&&t[1]),n.metadata[e.type].adUnit&&(n.adUnit=n.metadata[e.type].adUnit,delete n.metadata[e.type].adUnit),n.metadata[e.type].smartmatch&&(n.smartmatch=n.metadata[e.type].smartmatch,delete n.metadata[e.type].smartmatch)),n}(t,o)}))}var j={getRootID:o.getRootID,enablePermutiveFtCom:function(t){var e=t.metadata,n=t.type,r=t.rootId;u.a.setup(),u.a.loadPermutiveScript(),e&&e.user&&u.a.identifyUser(e.user);var a=u.a.fromAdsDataToPageView(f(f({},e),{},{rootId:r,type:n}));u.a.trackPageView(a)}}}}]);
//# sourceMappingURL=shared.volatile.f54639776fc9.bundle.js.map