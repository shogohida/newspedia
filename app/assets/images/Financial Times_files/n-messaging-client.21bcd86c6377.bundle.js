(window.webpackJsonp=window.webpackJsonp||[]).push([["n-messaging-client"],{"00ca0ee5":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return p}));var o=n("bbcba212"),a=n("0461bd81"),r=n("c99a337b"),i=n("3a9016ed");function s(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=m(t);if(e){var a=m(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(m,t);var e,n,r,u=l(m);function m(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),(e=u.call(this,t)).state={isFollowed:{},myftInit:a.client.init()},e}return e=m,(n=[{key:"onFollowClick",value:function(t){var e=this;this.state.myftInit.then((function(){return a.client[t.action](t.actorType,t.actorId,t.relationshipName,t.subjectType,t.subjectId,{token:t.token})})).then((function(){var n=Object.assign({},e.state.isFollowed);"add"===t.action?n[t.subjectId]=!0:n[t.subjectId]=!1,e.setState({isFollowed:n})})).finally((function(){"add"===t.action&&e.props.trackEventAction("act",t.subjectId)}))}},{key:"createFollowButton",value:function(t,e,n,a){var r=Object(o.createElement)(i.FollowButton,{conceptId:t,conceptName:e,conceptNameAsButtonText:!0,isFollowed:n,csrfToken:a,variant:"inverse",onSubmit:this.onFollowClick.bind(this)});return Object(o.createElement)("div",{className:"o-banner__action"},r)}},{key:"render",value:function(){for(var t=[],e=0;e<this.props.topicIds.length;e++){var n=this.createFollowButton(this.props.topicIds[e],this.props.topicNames[e],this.state.isFollowed[this.props.topicIds[e]],this.props.csrfToken);t.push(n)}return o.createElement.apply(void 0,["div",{className:"o-banner__actions"}].concat(t))}}])&&s(e.prototype,n),r&&s(e,r),m}(o.Component);function p(t,e,n,a){t.bannerElement.classList.add("o-banner--small","n-messaging-client--one-click-myft-buttons");var i=t.bannerElement.querySelector(".o-banner__actions"),s=t.innerElement.querySelector(".o-banner__action");s.parentNode.removeChild(s);var c=t.innerElement.querySelector(".o-banner__action--secondary");c.parentNode.removeChild(c);var l=document.createElement("div");l.classList.add("o-banner__actions"),l.appendChild(c),t.innerElement.appendChild(l);var u=Object(r.default)(),m=n.renderData.topicIds||[],p=n.renderData.topicNames||[],f=Object(o.createElement)(d,{topicIds:m,topicNames:p,csrfToken:u,trackEventAction:a});Object(o.render)(f,i.parentNode,i),e()}},"03f4cdb1":function(t,e,n){var o=n("99a4eb02"),a=n("23c6c18a"),r=function(t){document.body.dispatchEvent(t)},i=function(t){return a[t]?a[t].eventRules:void 0},s=function(){return o.get("nMessagingEventCounter")?JSON.parse(o.get("nMessagingEventCounter")):{}},c=function(t,e){var n=s();return"object"==typeof n[t]&&"number"==typeof n[t][e]?n[t][e]:0},l=function(t,e){var n=s(),a=c(t,e);n[t]=n[t]||{},n[t][e]=a+1;var r=new Date((new Date).getTime()+3e5);o.set("nMessagingEventCounter",n,{domain:"ft.com",expires:r})};t.exports={generateMessageEvent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.messageId,n=t.position,o=t.flag,a=t.trackingContext,s=t.variant;return function(t,c){var u=Object.assign({category:"n-messaging",action:t,messaging:e,messaging_position:n,messaging_flag:o,messaging_variant:s},a);c&&(u.messaging_action=c);var m=new CustomEvent("oTracking.event",{detail:u,bubbles:!0});r(m);var d=new CustomEvent("oTracking.event",{detail:Object.assign({},u,{category:"component"}),bubbles:!0});r(d),i(e)&&l(e,t)}},listen:function(t,e,n){t&&t.addEventListener(e,n)},messageEventLimitsBreached:function(t){var e=i(t);return!!e&&Object.keys(e.maxOccurrences).some((function(n){return c(t,event)>=e.maxOccurrences[n]}))}}},"1868bfa5":function(t,e,n){var o={"./bottom/b2b-trial-member/main":"52ac4590","./bottom/cookie-consent/main":"82da35ea","./bottom/marketing-popup-prompt/main":"7d373a79","./bottom/myft-account-topic-recs/main":"00ca0ee5","./bottom/oneclick-daily-digest/main":"e704fd8a","./bottom/swg-entitlements-prompt/main":"39b5a603","./top/anon-subscribe-now/main":"2e48b3ec","./top/gift-articles/main":"e31b4642","./top/my-ft-feedpage/main":"ea7076fc","./top/myft-disengaged-tooltip/main":"33a19ecd","./top/nav-account-settings/main":"cd425df0","./top/next-best-action/main":"74926571","./top/onboarding-region/main":"99a50e7d"};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}a.keys=function(){return Object.keys(o)},a.resolve=r,t.exports=a,a.id="1868bfa5"},"23c6c18a":function(t,e){t.exports={licenceJoinPromptSsiClient:{path:"bottom/lazy",lazy:!0},ssiSurvey:{path:"bottom/secondary-school-survey"},cookieConsentA:{path:"bottom/cookie-consent"},cookieConsentB:{path:"bottom/cookie-consent"},cookieConsentC:{path:"bottom/cookie-consent"},swgEntitlementsPrompt:{path:"bottom/swg-entitlements-prompt"},marketingPopupPrompt:{path:"bottom/marketing-popup-prompt",lazy:!0,guruQueryString:"offerId=499f84e9-d7fb-f90d-ba6a-9cbb65060a44",trackingContext:{opportunity_type:"marketingPrompt",opportunity_subtype:"discount_33%off"}},paymentFailure:{path:"top/payment-failure"},anonSubscribeNow:{path:"top/anon-subscribe-now",trackingContext:{opportunity_type:"marketingPrompt",opportunity_subtype:"top_trial_splitter"}},ukElection:{path:"top/uk-election"},printBannerUsa:{path:"top/print-banner-usa",trackingContext:{opportunity_type:"marketingPrompt",opportunity_subtype:"top_trial_splitter_US"}},navAccountSettings:{path:"top/nav-account-settings",tooltip:!0},onboardingMyFt:{path:"bottom/onboarding-myft"},onboardingPremium:{path:"bottom/onboarding-premium"},onboardingRegion:{path:"top/onboarding-region",tooltip:!0},bookYourConsult:{path:"bottom/book-your-consult"},b2bTrialNewsletter:{path:"bottom/lazy",lazy:!0},b2bTrialMyFt:{path:"bottom/lazy",lazy:!0},b2bTrialCountdown:{path:"top/lazy",lazy:!0},b2bTrialContactUs:{path:"bottom/b2b-trial-contact-us"},b2bTrialMember:{path:"bottom/b2b-trial-member",lazy:!0},b2bTrialMobile:{path:"bottom/b2b-trial-mobile"},techScrollAsia:{path:"bottom/tech-scroll-asia"},b2bTrialAnon:{path:"bottom/lazy",lazy:!0},appPromoMobile:{path:"bottom/app-promo-mobile"},contentMessage:{path:"bottom/content-message"},b2cTrialAcquisitions:{path:"bottom/lazy",lazy:!0},b2cSubAcquisitions:{path:"bottom/lazy",lazy:!0},ftWeekendPromo:{path:"bottom/lazy",lazy:!0,eventRules:{maxOccurrences:{act:1,view:3,close:1}}},giftArticles:{path:"top/gift-articles",tooltip:!0},myFtFeedpage:{path:"top/my-ft-feedpage",tooltip:!0},myftDisengagedTooltip:{path:"top/myft-disengaged-tooltip",tooltip:!0},nbeAutoSub:{path:"top/nbe-auto-sub"},dailyDigest:{path:"bottom/daily-digest"},newsletterPromo:{path:"bottom/lazy",lazy:!0},myFtFeedpageOverview:{path:"bottom/lazy",lazy:!0},fastFt:{path:"bottom/fast-ft"},marketsData:{path:"bottom/markets-data"},oneClickDailyDigest:{path:"bottom/oneclick-daily-digest"},myFtAccountTopicRecs:{path:"bottom/myft-account-topic-recs",lazy:!0},usElection2020Promo:{path:"bottom/us-election-2020-promo"},coronavirusNewsletterPromo:{path:"bottom/coronavirus-newsletter-promo"},nextBestAction:{path:"top/next-best-action",lazy:!0},coronavirusNewsletterPromoTop:{path:"top/coronavirus-newsletter-promo-top"},tbybInTrialSubscribe:{path:"bottom/tbyb-in-trial-subscribe"},tbybPostTrialSubscribe:{path:"bottom/tbyb-post-trial-subscribe"}}},"2b5e386d":function(t,e,n){var o=n("96f50564"),a=n("9b6503ab"),r=n("b88707c7"),i=n("23c6c18a");t.exports={init:function(){var t=this,e=document.querySelectorAll("[data-n-messaging-slot]"),n=e&&Array.prototype.slice.call(e).map((function(t){var e=t.dataset||{},n=i[e.nMessagingName];return{slot:e.nMessagingSlot,name:e.nMessagingName,content:t.querySelector("[data-n-messaging-component]"),path:n.path,component:n.component,lazy:n.lazy,guruQueryString:n.guruQueryString,trackingContext:n.trackingContext}}));n.length>0&&Promise.all(n.map((function(e){return t.initialiseMessage(e)}))).catch(this.handleError)},initialiseMessage:function(t){var e=this.renderHandler(t.slot),n=this.setupHandler(t.component||t.path);return(t.lazy?o(t):Promise.resolve(null)).then((function(e){return{config:t,guruResult:e,customSetup:n}})).then(e)},renderHandler:function(t){return"top"===t?a:"bottom"===t?r:void 0},setupHandler:function(t){try{if(t)return n("1868bfa5")("./".concat(t,"/main"))}catch(t){return}},handleError:function(t){throw console.error(t),t}}},"2e48b3ec":function(t,e){t.exports=function(t,e){var n=t.messageElement.querySelector(".o-message__actions"),o=t.messageElement.querySelector(".o-message__actions__primary");n.className+=" o-message__actions--clickarea",n.addEventListener("click",(function(t){if(t.target!==o)return t.stopPropagation(),o.click(),!1})),e()}},"33a19ecd":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return u}));var o=n("616ba185"),a=n("dcfa7677"),r=n("33cab54f"),i=n("99a4eb02"),s=n.n(i),c=document.querySelector(".topper__primary-theme .n-myft-follow-button"),l=s.a.get("FT_MyFT_article_tooltip")||0;function u(t,e){!c||l>=3||a.default.init([{relationship:"followed",type:"concept"}]).then((function(){return a.default.getAll("followed","concept")})).then((function(e){return function(t,e){if(t.length>0)return;var n=document.querySelector(".topper__primary-theme .js-primary-theme").innerText,a=["Find ".concat(n," stories easily."),"Start your feed."].map((function(t){return'<span style="display: block">'.concat(t,"</span>")})).join(" ");Object(r.broadcast)("oTracking.event",{action:"criteria-met",category:"myft-disengaged-tooltip",detail:{type:"article-page-about-tooltip",followedConceptCount:0}});var i=new o.default(c,{target:"myft-disengaged-tooltip",content:a,showOnConstruction:!0,position:"below"});l++,s.a.set("FT_MyFT_article_tooltip",l,{expires:365,path:"/content"}),i.tooltipEl.addEventListener("oTooltip.close",(function(){return e.close()}))}(e,t)})).finally((function(){return e()}))}},"39b5a603":function(t,e,n){var o=n("dfce6c83").swgLoader;t.exports=function(t,e){return o().then((function(t){return t.init(),t.checkEntitlements()})).catch((function(){})).finally(e)}},"4acd4fb0":function(t,e,n){t.exports={nMessagingClient:n("2b5e386d")}},"52ac4590":function(t,e){t.exports=function(t,e){var n=t.innerElement.querySelector(".o-banner__button");n.addEventListener("click",(function(t){t.preventDefault();var e=n.getAttribute("href"),o=document.createElement("input");return document.body.appendChild(o),o.setAttribute("value",e),o.select(),document.execCommand("copy"),document.body.removeChild(o),!1})),e()}},"5ca3a81c":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return r}));var o=n("0461bd81"),a=n("c99a337b");function r(){return o.client.init().then(i)}function i(){var t=Object(a.default)();return o.client.add("user",null,"preferred","preference","email-digest",{token:t,_rel:{type:"daily",sendTime:"every morning"}})}},74926571:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return w}));var o={};n.r(o),n.d(o,"newsletter",(function(){return r})),n.d(o,"myFtFeed",(function(){return i})),n.d(o,"gift",(function(){return s})),n.d(o,"app",(function(){return c})),n.d(o,"dailyDigest",(function(){return l})),n.d(o,"fastFt",(function(){return u})),n.d(o,"marketsData",(function(){return m}));var a={};function r(t){var e=t.newsletterName,n=t.newsletterSubscribeUrl;return{hasSuccessMessage:!0,renderData:{ctaHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tGet the news you need delivered to your inbox, with the\n\t\t\t\t\t<span class="o-message__content-highlight-color">\n\t\t\t\t\t\t'.concat(e,"\n\t\t\t\t\t</span>\n\t\t\t\t\tnewsletter.\n\t\t\t\t</span>\n\t\t\t"),ctaActionText:"Get the newsletter now",ctaActionHref:n,successHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tGreat!\n\t\t\t\t</span>\n\t\t\t\tYou\'re all signed up for the\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\t'.concat(e,".\n\t\t\t\t</span>\n\t\t\t\tGet more news delivered direct to your inbox with our other newsletters\n\t\t\t"),successActionText:"Browse all newsletters",successActionHref:"https://www.ft.com/newsletters"}}}function i(){return{renderData:{ctaHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\t<span class="o-message__content-highlight-color">\n\t\t\t\t\t\tmyFT\n\t\t\t\t\t</span>\n\t\t\t\t\tis a dedicated place to add topics to create your\n\t\t\t\t\t<span class="o-message__content-highlight-color">\n\t\t\t\t\t\tpersonalised feed\n\t\t\t\t\t</span>\n\t\t\t\t\tof stories\n\t\t\t\t</span>\n\t\t\t',ctaActionText:"Explore your myFT feed now",ctaActionHref:"https://www.ft.com/myft"}}}function s(){return{renderData:{ctaHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tShare this article with friends, family or colleagues, using\n\t\t\t\t\t<span class="o-message__content-highlight-color">\n\t\t\t\t\t\tGift Articles\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t',ctaActionText:"Gift this article now",ctaActionIcon:"share"}}}function c(){return{hasSuccessMessage:!0,renderData:{ctaHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tRead FT articles on the go, offline, and get notifications as stories break with the\n\t\t\t\t\t<span class="o-message__content-highlight-color">\n\t\t\t\t\t\tmobile app.\n\t\t\t\t\t</span>\n\t\t\t\t\tGet a download link\n\t\t\t\t</span>\n\t\t\t',ctaActionText:"Email me a link now",ctaActionHref:"https://www.ft.com/tour/apps",successHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tGreat!\n\t\t\t\t</span>\n\t\t\t\tWe\'ve emailed you a download link. Look out for an email from us, shortly.\n\t\t\t'}}}function l(){return{hasSuccessMessage:!0,renderData:{ctaHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tGet a summary of the latest news you follow straight to your inbox, with the\n\t\t\t\t\t<span class="o-message__content-highlight-color">\n\t\t\t\t\t\tmyFT daily Email Digest\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t',ctaActionText:"Sign up to Email Digest now",ctaActionHref:"https://www.ft.com/myft/alerts/",successHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tGreat!\n\t\t\t\t</span>\n\t\t\t\tYou\'re all signed up for the myFT daily Email Digest. Get more news delivered direct to your inbox with our email newsletters\n\t\t\t',successActionText:"Browse newsletters",successActionHref:"https://www.ft.com/newsletters"}}}function u(){return{renderData:{ctaHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tSee a live feed of market-moving news with informed content, 24 hours a day at\n\t\t\t\t\t<span class="o-message__content-highlight-color">\n\t\t\t\t\t\tfastFT\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t',ctaActionText:"Visit fastFT now",ctaActionHref:"https://www.ft.com/fastft"}}}function m(){return{renderData:{ctaHtml:'\n\t\t\t\t<span class="o-message__content-highlight">\n\t\t\t\t\tGet the latest information on equity, currency, fixed income and commodities, and invest smarter with\n\t\t\t\t\t<span class="o-message__content-highlight-color">\n\t\t\t\t\t\tMarkets Data\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t',ctaActionText:"Visit Markets Data now",ctaActionHref:"https://markets.ft.com/data"}}}n.r(a),n.d(a,"newsletter",(function(){return f})),n.d(a,"gift",(function(){return g})),n.d(a,"app",(function(){return b})),n.d(a,"dailyDigest",(function(){return h}));var d=n("c99a337b"),p=n("5ca3a81c");function f(t){var e={method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",accept:"application/json"},body:JSON.stringify({token:Object(d.default)()})};return fetch(t.renderData.ctaActionHref,e).then((function(t){if(!t.ok)throw new Error("could not subscribe to newsletter")}))}function g(){return document.querySelector(".js-gift-article").dispatchEvent(new Event("click")),Promise.resolve()}function b(){return Promise.resolve()}function h(){return Object(p.default)()}function y(t,e){["cta","success","error"].forEach((function(n){var o=t.messageElement.querySelector('[data-n-messaging-nba-view="'.concat(n,'"]'));n===e?o.classList.remove("n-messaging-nba__view--hidden"):o.classList.add("n-messaging-nba__view--hidden")}))}function v(t,e,n,o){t.messageElement.querySelector("[data-n-messaging-nba-cta-action]").addEventListener("click",(function(a){return a.preventDefault(),n(e).then((function(){y(t,o?"success":"none")})).catch((function(){y(t,"error")})),!1}))}function w(t,e,n){var r=n.renderData,i=o[r.nbaMessageId](r);!function(t,e){t.messageElement.querySelector("[data-n-messaging-nba-cta-text]").innerHTML=e.renderData.ctaHtml;var n=t.messageElement.querySelector("[data-n-messaging-nba-cta-action]");n.innerText=e.renderData.ctaActionText;var o=e.renderData.ctaActionHref;o&&n.setAttribute("href",o);var a=e.renderData.ctaActionIcon;a&&n.classList.add("o-buttons--primary","o-buttons--inverse","o-buttons-icon","o-buttons-icon--".concat(a)),t.messageElement.querySelector("[data-n-messaging-nba-actual-content]").classList.remove("n-messaging-nba__content--hidden")}(t,i);var s=a[r.nbaMessageId];i.hasSuccessMessage?(v(t,i,s,!0),function(t,e){t.messageElement.querySelector("[data-n-messaging-nba-success-text]").innerHTML=e.renderData.successHtml;var n=t.messageElement.querySelector("[data-n-messaging-nba-success-action]"),o=e.renderData.successActionText;o?(n.innerText=o,n.setAttribute("href",e.renderData.successActionHref)):n.classList.add("n-messaging-nba__action--hidden")}(t,i),function(t){t.messageElement.querySelector("[data-n-messaging-nba-close-action]").addEventListener("click",(function(e){return e.preventDefault(),y(t,"none"),!1}))}(t),function(t){t.messageElement.querySelector("[data-n-messaging-nba-error-action]").addEventListener("click",(function(e){return e.preventDefault(),y(t,"cta"),!1}))}(t)):s&&v(t,i,s,!1),e()}},"7d373a79":function(t,e,n){"use strict";n.r(e);var o=n("99a4eb02");e.default=function(t,e){return void 0===o.get("popupPromptShown")&&t.open(),t.bannerElement.querySelector(".o-banner__close").addEventListener("click",(function(){var t=new Date((new Date).getTime()+864e6);o.set("popupPromptShown","OK",{domain:"ft.com",expires:t})})),e({skip:!0})}},"82da35ea":function(t,e,n){var o=n("922a4198");t.exports=function(t,e){var n=/FTCookieConsentGDPR=true/.test(document.cookie),a=t.bannerElement,r=t.innerElement,i=function(){var t=a.getBoundingClientRect().height+parseInt(window.getComputedStyle(a).marginBottom,10);document.body.style.marginBottom="".concat(t,"px")},s=function(){a.parentNode.removeChild(a),document.body.focus()};n?e({skip:!0}):(!function(){var t=a.closest(".n-ui-hide-enhanced");t&&t.classList.remove("n-ui-hide-enhanced");var e=r.querySelector('[data-action="accept-form"]');e.addEventListener("click",(function(t){return function(t,e){return e.preventDefault(),fetch("https://consent.ft.com/__consent/consent-record-cookie",{method:"GET",credentials:"include"}).then(s).catch((function(t){return{error:t}}))}(0,t)}),!1),"undefined"!=typeof CSS&&CSS.supports("position","sticky")||(a.classList.add("o-banner--fixed"),o.listenTo("resize"),o.listenTo("orientation"),document.body.addEventListener("oViewport.orientation",(function(){i()})),document.body.addEventListener("oViewport.resize",(function(){i()})),setTimeout((function(){i()}),1))}(),e())}},"96f50564":function(t,e){function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}t.exports=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.guruEndpoint,o=void 0===e?"/__message":e,a=t.name,r=t.guruQueryString,i="".concat(o,"/").concat(a).concat(r?"?"+r:""),s={method:"GET",headers:{Accept:"application/json"},credentials:"same-origin"},c=function(t){if(!t.skip&&t.data&&t.renderData)return!0;throw new Error("Bad response body")};return fetch(i,s).then((function(t){if(200===t.status)return t.json();t.text().then((function(t){throw new Error("Bad response status ".concat(status,": ").concat(t))}))})).then((function(t){return(t.skip||c(t))&&t})).then((function(t){var e=["myft","product","marketing"],o=["small","compact"];if(t.renderData.customThemes=[],t&&t.renderData&&Array.isArray(t.renderData.theme)){var a,r=n(t.renderData.theme);try{for(r.s();!(a=r.n()).done;){var i=a.value;e.includes(i)?t.renderData.bannerTheme=i:o.includes(i)?t.renderData.bannerLayout=i:t.renderData.customThemes.push(i)}}catch(t){r.e(t)}finally{r.f()}}return t})).catch((function(){return!1}))}},"99a50e7d":function(t,e,n){var o=n("616ba185");t.exports=function(t,e){setTimeout((function(){!function(t,e){var n=t.messageElement.querySelector(".o-message__content"),a=document.querySelector('[data-trackable="World"]'),r={target:'[data-trackable="World"]',content:n.innerHTML,showOnConstruction:!0,position:"below"};if(a){var i=new o(a,r);i.tooltipEl.classList.add("n-messaging-client-tooltip"),i.tooltipEl.querySelector(".o-message__content-main").classList.add("o-message--alert-bleed"),i.tooltipEl.addEventListener("oTooltip.close",(function(){t.close()}))}e()}(t,e)}),4e3)}},"9b6503ab":function(t,e,n){var o=n("93f629c6");o=o.default||o;var a=n("03f4cdb1"),r=a.generateMessageEvent,i=a.listen,s=a.messageEventLimitsBreached,c=".".concat("o-message","__button"),l=".".concat("o-message","__link");function u(t,e){return!t.lazy&&t.content||t.lazy&&e&&e.renderData&&e.renderData.reservedSpace?t.content:null}function m(t,e){return{autoOpen:t.autoOpen||e.autoOpen,messageClass:t.messageClass||e.messageClass,type:t.type,status:t.status,parentElement:t.parentElement,content:{highlight:t.contentTitle,detail:t.content,additionalInfo:t.additionalInfo},actions:{primary:{text:t.buttonLabel,url:t.buttonUrl},secondary:{text:t.linkLabel,url:t.linkUrl}},close:t.closeButton,dynamicTrackingData:t.dynamicTrackingData}}t.exports=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.config,a=void 0===n?{}:n,d=e.guruResult,p=e.customSetup,f=d&&d.renderData&&d.renderData.dynamicTrackingData||a.name,g=a.name&&r({flag:"messageSlotTop",messageId:a.name,position:a.slot,trackingContext:a.trackingContext,variant:f}),b=u(a,d),h={messageClass:"o-message",autoOpen:!1,close:o.getDataAttributes(b).close};if(b)t=new o(b,h);else{if(!d||!d.renderData)return void(d.skip&&g&&g("skip"));t=new o(null,m(d.renderData,h))}if(s(a.name))g("skip");else{var y=t.messageElement.querySelectorAll("[data-o-message-action]");if(0===y.length&&0===(y=t.messageElement.querySelectorAll(c)).length&&(y=t.messageElement.querySelectorAll(l)),y=[].slice.call(y),i(t.messageElement,"o.messageClosed",(function(){return g("close")})),i(t.messageElement,"o.messageOpen",(function(){return g("view")})),y&&y.length>0&&y.forEach((function(t){var e=t.dataset.nAlertBannerActionType;i(t,"click",(function(){return g(t.dataset.nAlertBannerAction||"act",e)}))})),p){var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.skip,o=void 0!==n&&n;o?g("skip"):t.open()};p.default&&(p=p.default),p(t,v,d)}else t.open()}}},b88707c7:function(t,e,n){function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=r(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,i=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function r(t,e){if(t){if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var s=n("2264684a");s=s.default||s;var c=n("03f4cdb1"),l=c.generateMessageEvent,u=c.listen,m=c.messageEventLimitsBreached,d=".".concat("o-banner","__button"),p=".".concat("o-banner","__link");function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{autoOpen:t.autoOpen||e.autoOpen,suppressCloseButton:t.suppressCloseButton||!1,bannerClass:t.bannerClass||e.bannerClass,theme:t.bannerTheme,layout:t.bannerLayout,formEncoding:t.formEncoding,formMethod:t.formMethod,formAction:t.formAction,contentLong:t.contentLong,contentShort:t.contentShort,buttonLabel:t.buttonLabel,buttonUrl:t.buttonUrl,linkLabel:t.linkLabel,linkUrl:t.linkUrl,appendTo:'[data-n-messaging-slot="bottom"] [data-n-messaging-component]',dynamicTrackingData:t.dynamicTrackingData}}t.exports=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.config,r=void 0===n?{}:n,i=e.guruResult,c=e.customSetup,g=i&&i.renderData&&i.renderData.dynamicTrackingData||r.name,b=r.name&&l({flag:"messageSlotBottom",messageId:r.name,position:r.slot,trackingContext:r.trackingContext,variant:g}),h=!r.lazy&&r.content;if(h)t=new s(h,s.getOptionsFromDom(h));else{if(!i||!i.renderData)return void(i&&i.skip&&b&&b("skip"));if((t=new s(null,f(i.renderData,{bannerClass:"o-banner",autoOpen:!1}))).bannerElement.classList.add("n-messaging-client-messaging-banner"),Array.isArray(i.renderData.customThemes)){var y,v=a(i.renderData.customThemes);try{for(v.s();!(y=v.n()).done;){var w=y.value;t.bannerElement.classList.add("".concat("n-messaging-client-messaging-banner","--").concat(w))}}catch(t){v.e(t)}finally{v.f()}}}if(m(r.name))b("skip");else{var _=t.innerElement.querySelectorAll("[data-n-messaging-banner-action]"),E=[];if(0===_.length&&(_=t.innerElement.querySelectorAll(d),E=t.innerElement.querySelectorAll(p)),_=[].concat(o(_),o(E)),u(t.bannerElement,"o.bannerClosed",(function(){return b("close")})),u(t.bannerElement,"o.bannerOpened",(function(){return b("view")})),_&&_.length>0&&_.forEach((function(t){var e=t.dataset.nMessagingBannerActionType,n=t.textContent;u(t,"click",(function(){return b(t.dataset.nMessagingBannerAction||"act",e||n)}))})),c){var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.skip,o=void 0!==n&&n;o?b("skip"):t.open()};c.default&&(c=c.default),c(t,k,i,b)}else t.open()}}},cd425df0:function(t,e,n){var o=n("616ba185");t.exports=function(t,e){setTimeout((function(){!function(t,e){var n='[data-trackable="Account Settings"]',a=t.messageElement.querySelector(".o-message__content"),r=document.querySelector(n),i={target:n,content:a.innerHTML,showOnConstruction:!0,position:"below"};if(r){var s=new o(r,i);s.tooltipEl.classList.add("n-messaging-client-tooltip"),s.tooltipEl.querySelector(".o-message__content-main").classList.add("o-message--alert-bleed"),s.tooltipEl.addEventListener("oTooltip.close",(function(){t.close()}))}e()}(t,e)}),4e3)}},e31b4642:function(t,e,n){var o=n("616ba185");t.exports=function(t,e){setTimeout((function(){!function(t,e){var n=t.messageElement.querySelector(".o-message__content"),a=document.querySelector('[data-trackable="email"]'),r={target:'[data-trackable="email"]',content:n.innerHTML,showOnConstruction:!0,position:"below"};if(a){var i=new o(a,r);i.tooltipEl.classList.add("n-messaging-client-tooltip"),i.tooltipEl.querySelector(".o-message__content-main").classList.add("o-message--alert-bleed"),i.tooltipEl.addEventListener("oTooltip.close",(function(){t.close()}))}e()}(t,e)}),4e3)}},e704fd8a:function(t,e,n){"use strict";n.r(e);var o=n("5ca3a81c");e.default=function(t,e){function n(){t.bannerElement.querySelector("[data-n-messaging-daily-digest-front]").classList.add("n-messaging-daily-digest--hidden"),t.closeButtonElement.parentNode.removeChild(t.closeButtonElement),t.bannerElement.querySelector("[data-daily-digest-actions]").appendChild(t.closeButtonElement),t.bannerElement.classList.add("o-banner--success"),t.bannerElement.querySelector("[data-n-messaging-daily-digest-back]").classList.remove("n-messaging-daily-digest--hidden")}function a(t){console.log({info:"could not add user to the daily digest",err:t})}t.bannerElement.querySelector("[data-daily-digest-sign-up]").addEventListener("click",(function(t){return t.preventDefault(),Object(o.default)().then(n).catch(a),!1})),e()}},ea7076fc:function(t,e,n){var o=n("616ba185");t.exports=function(t,e){setTimeout((function(){!function(t,e){var n=t.messageElement.querySelector(".o-message__content"),a=document.querySelector('[data-trackable="my-ft"]'),r={target:'[data-trackable="my-ft"]',content:n.innerHTML,showOnConstruction:!0,position:"below"};if(a){var i=new o(a,r);i.tooltipEl.classList.add("n-messaging-client-tooltip"),i.tooltipEl.querySelector(".o-message__content-main").classList.add("o-message--alert-bleed"),i.tooltipEl.addEventListener("oTooltip.close",(function(){t.close()}))}e()}(t,e)}),4e3)}}}]);
//# sourceMappingURL=n-messaging-client.21bcd86c6377.bundle.js.map