(window.webpackJsonp=window.webpackJsonp||[]).push([["o-tooltip"],{"616ba185":function(t,e,o){"use strict";o.r(e);var i=o("1063c397"),s=o("922a4198"),n=o("e1e3ba65");function l(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.targetEl=e}var e,o,i;return e=t,(o=[{key:"offsetTop",get:function(){return this.targetEl.offsetTop}},{key:"left",get:function(){return this.targetEl.getBoundingClientRect().left}},{key:"right",get:function(){return this.left+this.width}},{key:"top",get:function(){return this.targetEl.getBoundingClientRect().top}},{key:"bottom",get:function(){return this.top+this.height}},{key:"width",get:function(){return this.targetEl.getBoundingClientRect().width}},{key:"height",get:function(){return this.targetEl.getBoundingClientRect().height}},{key:"centrePoint",get:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}}}])&&l(e.prototype,o),i&&l(e,i),t}();function a(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e,o){return e&&a(t.prototype,e),o&&a(t,o),t}var p=function(){function t(e,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._tooltips||(t._tooltips=new Map),this.opts=o||t.getOptions(e),this.opts=t.checkOptions(this.opts),o&&o.content?this.tooltipEl=t.constructElement(e,o):this.tooltipEl=e,t._tooltips.set(this.tooltipEl,this),this.targetNode=document.getElementById(this.opts.target),this.target=new t.Target(this.targetNode),this.tooltipPosition=this._getConfiguredTooltipPosition(),this.tooltipAlignment=null,this.visible=!1,this.delegates={target:new i.default(this.target.targetEl),doc:new i.default,tooltip:new i.default},this.opts.showOnClick&&this.delegates.target.on("click",this.show.bind(this)),this.opts.toggleOnClick&&this.delegates.target.on("click",this.toggle.bind(this)),this.opts.showOnHover&&(this.delegates.target.on("mouseover",this.show.bind(this)),this.delegates.target.on("mouseout",this.close.bind(this))),this.opts.showOnFocus&&(this.delegates.target.on("focusin",this.show.bind(this)),this.delegates.target.on("focusout",this.close.bind(this))),s.default.listenTo("resize"),this.render(),this.opts.showOnConstruction?(this.show(),this.opts.closeAfter&&this.closeAfter(this.opts.closeAfter)):this.opts.showAfter&&this.showAfter(this.opts.showAfter)}return h(t,null,[{key:"_getCurrentLayout",value:function(){return n.default.getCurrentLayout()}}]),h(t,[{key:"render",value:function(){this.opts.appendToBody?document.getElementById(this.opts.target+t.idSuffix)||document.body.appendChild(this.tooltipEl):this.targetNode&&this.targetNode.nextSibling!==this.tooltipEl&&(this.targetNode.nextSibling?this.targetNode.parentNode.insertBefore(this.tooltipEl,this.targetNode.nextSibling):this.targetNode.parentNode.appendChild(this.tooltipEl)),this.tooltipEl.setAttribute("role","tooltip"),this.tooltipEl.classList.add("o-tooltip"),this.opts.zIndex&&(this.tooltipEl.style.zIndex=this.opts.zIndex);var e=document.createElement("button");e.className="o-tooltip-close",e.setAttribute("aria-label","Close tooltip"),e.setAttribute("title","Close tooltip"),this.tooltipEl.appendChild(e)}},{key:"show",value:function(){this.delegates.doc.root(document.body),this.delegates.tooltip.root(this.tooltipEl),this.tooltipEl.dispatchEvent(new CustomEvent("oTooltip.show")),this.closeHandler=this.close.bind(this),this.delegates.tooltip.on("click",".o-tooltip-close",this.closeHandler),this.delegates.tooltip.on("touchend",".o-tooltip-close",this.closeHandler),this.closeOnKeyUpHandler=this.closeOnKeyUp.bind(this),this.delegates.doc.on("keyup",this.closeOnKeyUpHandler),this.resizeListenerHandler=this.resizeListener.bind(this),this.delegates.doc.on("oViewport.resize","body",this.resizeListenerHandler),this.drawTooltip(),this.visible=!0,clearTimeout(this.showTimeout),this.tooltipEl.style.display="block",this.tooltipEl.style.opacity=1,this.tooltipEl.classList.add("visible")}},{key:"toggle",value:function(){this.visible?this.close():this.show()}},{key:"closeAfter",value:function(t){var e=this;this.closeTimeout=setTimeout((function(){e.close()}),1e3*t)}},{key:"showAfter",value:function(t){var e=this;this.showTimeout=setTimeout((function(){e.show()}),1e3*t)}},{key:"destroy",value:function(){!0===this.visible&&this.close(),this.tooltipEl&&this.tooltipEl.parentElement&&this.opts&&this.opts.content&&this.tooltipEl.parentElement.removeChild(this.tooltipEl),t._tooltips.delete(this.tooltipEl),0===t._tooltips.size&&(s.default.stopListeningTo("resize"),delete t._tooltips)}},{key:"close",value:function(t,e){var o=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i&&this.tooltipEl.dispatchEvent(new CustomEvent("oTooltip.close")),this.delegates.doc.destroy(),this.delegates.tooltip.destroy(),clearTimeout(this.closeTimeout),this.visible=!1,this.tooltipEl.style.opacity=0,this.tooltipEl.classList.remove("visible"),this.tooltipEl.addEventListener("transitionend",(function(){!1===o.visible&&(o.tooltipEl.style.display="none")}),{once:!0}),this.opts.showOnClick&&this.delegates.target.on("click",null,this.show.bind(this)),!1}},{key:"closeOnKeyUp",value:function(t){27===t.keyCode&&this.close()}},{key:"resizeListener",value:function(){var t=this;this.visible&&window.requestAnimationFrame((function(){t.drawTooltip()}))}},{key:"drawTooltip",value:function(){this.tooltipEl.style.display="block",this.tooltipEl.style["max-width"]="".concat(this.width(),"px");for(var e=0,o={},i=this._getConfiguredTooltipPosition(),s="middle",n=!0;e<5&&n;){switch(e++,i){case"above":var l=this._evaulateTooltip("above");o=l.tooltipRect,s=l.alignment,n=l.isOutOfBounds;break;case"right":var r=this._evaulateTooltip("right");o=r.tooltipRect,s=r.alignment,n=r.isOutOfBounds;break;case"below":var a=this._evaulateTooltip("below");o=a.tooltipRect,s=a.alignment,n=a.isOutOfBounds;break;case"left":var h=this._evaulateTooltip("left");o=h.tooltipRect,s=h.alignment,n=h.isOutOfBounds;break;default:throw t.throwError("drawTooltip entered the default case, which is not expected.")}n&&e<5&&(i=t._rotateOrientation(i))}this.tooltipRect=o,this.tooltipAlignment=s,this.tooltipPosition=i;var p=this.target.targetEl.offsetParent&&this.target.targetEl.offsetParent.getBoundingClientRect().left,u=this.target.targetEl.offsetParent&&this.target.targetEl.offsetParent.getBoundingClientRect().top,c=this.tooltipEl.getBoundingClientRect().width;if(this.opts.appendToBody?(this.tooltipEl.id=this.opts.target+t.idSuffix,this.tooltipEl.style.top=this.tooltipRect.top+document.documentElement.scrollTop+"px",this.tooltipEl.style.left=this.tooltipRect.left+document.documentElement.scrollLeft+"px"):(this.tooltipEl.style.top=this.tooltipRect.top-u+"px",this.tooltipEl.style.left=this.tooltipRect.left-p+"px"),c!==this.tooltipEl.getBoundingClientRect().width)return this.drawTooltip();this._setArrow(),e>=5&&console.warn("There is not enough space in the client window to draw the tooltip.")}},{key:"width",value:function(){return this.tooltipEl.offsetWidth}},{key:"height",value:function(){return this.tooltipEl.offsetHeight}},{key:"_evaulateTooltip",value:function(t){for(var e,o,i="y"===("above"===t||"below"===t?"y":"x")?["middle","right","left"]:["middle","top","bottom"],s=!0,n=0;n<i.length&&!0===s;n++)o=i[n],e=this._calculateTooltipRectangle(t,o),s=this._tooltipIsOutOfBounds(e);return s&&(o="middle",e=this._calculateTooltipRectangle(t,o)),{tooltipRect:e,alignment:o,isOutOfBounds:s}}},{key:"_calculateTooltipRectangle",value:function(e,o){var i={},s="above"===e||"below"===e?"y":"x";if("y"===s){var n=this.width()/10;"left"===o&&(i.left=this.target.centrePoint.x-this.width()+n),"right"===o&&(i.left=this.target.centrePoint.x-n),"middle"===o&&(i.left=this.target.centrePoint.x-this.width()/2),"above"===e&&(i.top=this.target.top-this.height()-t.arrowDepth),"below"===e&&(i.top=this.target.bottom+t.arrowDepth)}return"x"===s&&("top"===o&&(i.top=this.target.top),"bottom"===o&&(i.top=this.target.bottom-this.height()),"middle"===o&&(i.top=this.target.centrePoint.y-this.height()/2),"right"===e&&(i.left=this.target.right+t.arrowDepth),"left"===e&&(i.left=this.target.left-this.width()-t.arrowDepth)),i.right=i.left+this.width(),i.bottom=i.top+this.height(),i}},{key:"calculateTooltipRect",value:function(t){return console.warn("`calculateTooltipRect` is deprecated."),this._calculateTooltipRectangle(t,"middle")}},{key:"_getConfiguredTooltipPosition",value:function(){var e=this.opts,o=e.position,i=e.positionS,s=e.positionM,n=e.positionL,l=e.positionXl;switch(t._getCurrentLayout()){case"S":return i||o;case"M":return s||i||o;case"L":return n||s||i||o;case"XL":return l||n||s||i||o;default:return o}}},{key:"_setArrow",value:function(){var e;(e=this.tooltipEl.classList).remove.apply(e,["o-tooltip--arrow-left","o-tooltip--arrow-right","o-tooltip--arrow-above","o-tooltip--arrow-below","o-tooltip-arrow--align-top","o-tooltip-arrow--align-bottom","o-tooltip-arrow--align-left","o-tooltip-arrow--align-right","o-tooltip-arrow--align-middle"]),this.tooltipEl.classList.add("o-tooltip--arrow-"+t.positionToArrowPositionMap[this.tooltipPosition]),this.tooltipEl.classList.add("o-tooltip-arrow--align-"+t.alignmentToArrowAlignmentMap[this.tooltipAlignment])}},{key:"_tooltipIsOutOfBounds",value:function(e){var o=t._pointIsOutOfBounds(e.top,"y",this.opts),i=t._pointIsOutOfBounds(e.bottom,"y",this.opts),s=t._pointIsOutOfBounds(e.left,"x",this.opts),n=t._pointIsOutOfBounds(e.right,"x",this.opts);return o||i||s||n}}],[{key:"getOptions",value:function(t){var e=t.dataset;return Object.keys(e).reduce((function(t,o){if("oComponent"===o)return t;var i=o.replace(/^oTooltip(\w)(\w+)$/,(function(t,e,o){return e.toLowerCase()+o}));try{t[i]=JSON.parse(e[o].replace(/\'/g,'"'))}catch(s){t[i]=e[o]}return t}),{})}},{key:"checkOptions",value:function(e){return e.target||t.throwError("tooltip.target is not set. An target for the tooltip to point at must be provided"),e.position?-1===t.validTooltipPositions.indexOf(e.position)&&t.throwError("Invalid value for tooltip position. Valid values are:"+t.validTooltipPositions.toString()+" or nothing which will default to a value of `below`"):e.position="below",e}},{key:"constructElement",value:function(t,e){var o=document.createElement("div");return t.setAttribute("id",e.target),o.setAttribute("data-o-component","o-tooltip"),o.insertAdjacentHTML("afterbegin","<div class='o-tooltip-content'>".concat(e.content,"</div>")),o}},{key:"_pointIsOutOfBounds",value:function(t,e,o){if(t<0)return!0;if(o.showOnConstruction){if("y"===e&&t>document.body.clientHeight)return!0;if("x"===e&&t>document.body.clientWidth)return!0}else{if("y"===e&&t>document.documentElement.clientHeight)return!0;if("x"===e&&t>document.documentElement.clientWidth)return!0}return!1}},{key:"_rotateOrientation",value:function(t){return{above:"right",right:"below",below:"left",left:"above"}[t]}},{key:"throwError",value:function(t){throw new Error('"o-tooltip error": '+t)}},{key:"init",value:function(e,o){return e||(e=document.body),e instanceof HTMLElement||(e=document.querySelector(e)),e instanceof HTMLElement&&/\bo-tooltip\b/.test(e.getAttribute("data-o-component"))?new t(e,o):Array.from(e.querySelectorAll('[data-o-component="o-tooltip"]'),(function(e){return new t(e,o)}))}}]),t}();p.idSuffix="-tooltip",p.arrowDepth=10,p.positionToArrowPositionMap={above:"below",below:"above",left:"right",right:"left"},p.alignmentToArrowAlignmentMap={top:"top",bottom:"bottom",right:"left",left:"right",middle:"middle"},p.validArrowAlignments=["top","bottom","left","right"],p.validTooltipPositions=["above","below","left","right"],p.Target=r;var u=p;document.addEventListener("o.DOMContentLoaded",(function t(){u.init(),document.removeEventListener("o.DOMContentLoaded",t)}));e.default=u}}]);
//# sourceMappingURL=o-tooltip.0491ae6a5c08.bundle.js.map